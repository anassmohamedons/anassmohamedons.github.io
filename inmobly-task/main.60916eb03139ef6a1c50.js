(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("qOnz"),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=o);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:o,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=Object(r.e)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,s=t.options,a=void 0===s?{}:s,u=this.normalizeInstanceIdentifier(void 0===i?o:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=Object(r.e)(h.value,2),f=d[1];u===this.normalizeInstanceIdentifier(d[0])&&f.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return c},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===o?void 0:e),options:i}),this.instances.set(n,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class s extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("lJxs"),i=n("Cfvw"),s=n("zx2A");function o(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?s=>s.pipe(o((n,s)=>Object(i.a)(t(n,s)).pipe(Object(r.a)((t,r)=>e(n,t,s,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends s.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new s.a(this),n=this.destination;n.add(e);const r=Object(s.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),s=n("quSY"),o=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends s.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[o.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,s){let o;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?o=e:e&&(o=e.next,n=e.error,s=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),s=n("quSY"),o=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.a]}(t))return function(t,e){return new r.a(n=>{const r=new s.a;return r.add(e.schedule(()=>{const i=t[o.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new s.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new s.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return s});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),s=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),s=(n("7o/Q"),n("quSY")),o=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return Object(o.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s});var r=n("HDdC");const i=new r.a(t=>t.complete());function s(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),s=n("gRHU"),o=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(s.a)}(t,e,n);if(a.add(o?o.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.4.2","app")},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("z+Ro"),i=n("yCtX"),s=n("jZKg");function o(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(s.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),s=n("Lhse"),o=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[o.a])return l=t,t=>{const e=l[o.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[s.a])return e=t,t=>{const n=e[s.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),s=n("bHdf"),o=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(s.a)(e)(Object(o.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("EY2u"),i=n("LRne"),s=n("z6cu");let o=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(s.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),s=n("quSY"),o=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new o.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.a;return this.hasError?(t.error(this.thrownError),s.a.EMPTY):this.isStopped?(t.complete(),s.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):s.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("5+tZ"),i=n("SpAZ");function s(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return rn}),n.d(e,"b",function(){return cu}),n.d(e,"c",function(){return iu}),n.d(e,"d",function(){return nu}),n.d(e,"e",function(){return ru}),n.d(e,"f",function(){return nc}),n.d(e,"g",function(){return $u}),n.d(e,"h",function(){return ta}),n.d(e,"i",function(){return _u}),n.d(e,"j",function(){return Oo}),n.d(e,"k",function(){return du}),n.d(e,"l",function(){return xo}),n.d(e,"m",function(){return mr}),n.d(e,"n",function(){return Ma}),n.d(e,"o",function(){return Zi}),n.d(e,"p",function(){return Sn}),n.d(e,"q",function(){return N}),n.d(e,"r",function(){return nn}),n.d(e,"s",function(){return fs}),n.d(e,"t",function(){return Go}),n.d(e,"u",function(){return Qo}),n.d(e,"v",function(){return hu}),n.d(e,"w",function(){return ha}),n.d(e,"x",function(){return Wu}),n.d(e,"y",function(){return la}),n.d(e,"z",function(){return qu}),n.d(e,"A",function(){return Su}),n.d(e,"B",function(){return On}),n.d(e,"C",function(){return uu}),n.d(e,"D",function(){return au}),n.d(e,"E",function(){return No}),n.d(e,"F",function(){return ko}),n.d(e,"G",function(){return _r}),n.d(e,"H",function(){return Do}),n.d(e,"I",function(){return hr}),n.d(e,"J",function(){return Cn}),n.d(e,"K",function(){return Zu}),n.d(e,"L",function(){return oa}),n.d(e,"M",function(){return ku}),n.d(e,"N",function(){return sn}),n.d(e,"O",function(){return Po}),n.d(e,"P",function(){return Ro}),n.d(e,"Q",function(){return fa}),n.d(e,"R",function(){return L}),n.d(e,"S",function(){return Bu}),n.d(e,"T",function(){return Vu}),n.d(e,"U",function(){return g}),n.d(e,"V",function(){return Fu}),n.d(e,"W",function(){return tc}),n.d(e,"X",function(){return Du}),n.d(e,"Y",function(){return lu}),n.d(e,"Z",function(){return Ji}),n.d(e,"ab",function(){return co}),n.d(e,"bb",function(){return cr}),n.d(e,"cb",function(){return $n}),n.d(e,"db",function(){return Pn}),n.d(e,"eb",function(){return Ln}),n.d(e,"fb",function(){return qn}),n.d(e,"gb",function(){return Vn}),n.d(e,"hb",function(){return Fn}),n.d(e,"ib",function(){return Un}),n.d(e,"jb",function(){return so}),n.d(e,"kb",function(){return Ju}),n.d(e,"lb",function(){return oo}),n.d(e,"mb",function(){return ao}),n.d(e,"nb",function(){return Mn}),n.d(e,"ob",function(){return B}),n.d(e,"pb",function(){return Ss}),n.d(e,"qb",function(){return Vs}),n.d(e,"rb",function(){return Ls}),n.d(e,"sb",function(){return Fs}),n.d(e,"tb",function(){return io}),n.d(e,"ub",function(){return It}),n.d(e,"vb",function(){return d}),n.d(e,"wb",function(){return Rn}),n.d(e,"xb",function(){return gs}),n.d(e,"yb",function(){return wt}),n.d(e,"zb",function(){return wo}),n.d(e,"Ab",function(){return ri}),n.d(e,"Bb",function(){return xs}),n.d(e,"Cb",function(){return $s}),n.d(e,"Db",function(){return Ya}),n.d(e,"Eb",function(){return tt}),n.d(e,"Fb",function(){return at}),n.d(e,"Gb",function(){return E}),n.d(e,"Hb",function(){return S}),n.d(e,"Ib",function(){return it}),n.d(e,"Jb",function(){return ut}),n.d(e,"Kb",function(){return ks}),n.d(e,"Lb",function(){return Ps}),n.d(e,"Mb",function(){return Rs}),n.d(e,"Nb",function(){return Ds}),n.d(e,"Ob",function(){return Ms}),n.d(e,"Pb",function(){return Ze}),n.d(e,"Qb",function(){return to}),n.d(e,"Rb",function(){return _n}),n.d(e,"Sb",function(){return Je}),n.d(e,"Tb",function(){return eu}),n.d(e,"Ub",function(){return Us}),n.d(e,"Vb",function(){return Za}),n.d(e,"Wb",function(){return Hs}),n.d(e,"Xb",function(){return ka}),n.d(e,"Yb",function(){return Na}),n.d(e,"Zb",function(){return ja}),n.d(e,"ac",function(){return Ns}),n.d(e,"bc",function(){return xa}),n.d(e,"cc",function(){return Wa}),n.d(e,"dc",function(){return $t}),n.d(e,"ec",function(){return dr}),n.d(e,"fc",function(){return st}),n.d(e,"gc",function(){return As}),n.d(e,"hc",function(){return Zs}),n.d(e,"ic",function(){return Xs}),n.d(e,"jc",function(){return Js}),n.d(e,"kc",function(){return Qa});var r=n("XNiG"),i=n("quSY"),s=n("HDdC"),o=n("VRyK"),a=n("oB13"),u=n("x+ZX");function c(){return new r.a}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function d(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(d).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function f(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function g(t){return t.__forward_ref__=g,t.toString=function(){return d(this())},t}function m(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class b extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function v(t){return"string"==typeof t?t:null==t?"":String(t)}function _(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():v(t)}function w(t,e){const n=e?` in ${e}`:"";throw new b("201",`No provider for ${_(t)} found${n}`)}function E(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function S(t){return{providers:t.providers||[],imports:t.imports||[]}}function O(t){return C(t,I)||C(t,A)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function T(t){return t&&(t.hasOwnProperty(x)||t.hasOwnProperty(k))?t[x]:null}const I=l({"\u0275prov":l}),x=l({"\u0275inj":l}),A=l({ngInjectableDef:l}),k=l({ngInjectorDef:l});var N=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let j;function D(t){const e=j;return j=t,e}function R(t,e,n){const r=O(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void w(d(t),"Injector")}function P(t){return{toString:t}.toString()}var M=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,V="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,B=F||q||V||U,H={},z=[],K=[],$=l({"\u0275cmp":l}),G=l({"\u0275dir":l}),W=l({"\u0275pipe":l}),Q=l({"\u0275mod":l}),Y=l({"\u0275loc":l}),Z=l({"\u0275fac":l}),X=l({__NG_ELEMENT_ID__:l});let J=0;function tt(t){return P(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===M.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||K,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||K,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=J++,n.inputs=ot(t.inputs,e),n.outputs=ot(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(nt):null,n})}function et(t){return ct(t)||function(t){return t[G]||null}(t)}function nt(t){return function(t){return t[W]||null}(t)}const rt={};function it(t){const e={type:t.type,bootstrap:t.bootstrap||K,declarations:t.declarations||K,imports:t.imports||K,exports:t.exports||K,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&P(()=>{rt[t.id]=t.type}),e}function st(t,e){return P(()=>{const n=lt(t,!0);n.declarations=e.declarations||K,n.imports=e.imports||K,n.exports=e.exports||K})}function ot(t,e){if(null==t)return H;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const at=tt;function ut(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ct(t){return t[$]||null}function lt(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${d(t)} does not have '\u0275mod' property.`);return n}const ht=20,dt=10;function ft(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function gt(t){return 0!=(8&t.flags)}function mt(t){return 2==(2&t.flags)}function yt(t){return 1==(1&t.flags)}function bt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(Z)?t[Z]:null}class _t{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function wt(){return Et}function Et(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ot),St}function St(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===H)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ot(t,e,n,r){const i=Ct(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:H,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new _t(u&&u.currentValue,e,o===H),t[r]=e}function Ct(t){return t.__ngSimpleChanges__||null}let Tt;function It(t){Tt=t}function xt(t){return!!t.listen}wt.ngInherit=!0;const At={createRenderer:(t,e)=>void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0};function kt(t){for(;Array.isArray(t);)t=t[0];return t}function Nt(t,e){return kt(e[t])}function jt(t,e){return kt(e[t.index])}function Dt(t,e){return t.data[e]}function Rt(t,e){return t[e]}function Pt(t,e){const n=e[t];return ft(n)?n:n[0]}function Mt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Lt(t){return 4==(4&t[2])}function Ft(t){return 128==(128&t[2])}function Vt(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function qt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Bt={lFrame:ce(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ht(){return Bt.bindingsEnabled}function zt(){return Bt.lFrame.lView}function Kt(){return Bt.lFrame.tView}function $t(t){Bt.lFrame.contextLView=t}function Gt(){let t=Wt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Wt(){return Bt.lFrame.currentTNode}function Qt(t,e){const n=Bt.lFrame;n.currentTNode=t,n.isParent=e}function Yt(){return Bt.lFrame.isParent}function Zt(){return Bt.isInCheckNoChangesMode}function Xt(t){Bt.isInCheckNoChangesMode=t}function Jt(){const t=Bt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function te(){return Bt.lFrame.bindingIndex++}function ee(t,e){const n=Bt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ne(e)}function ne(t){Bt.lFrame.currentDirectiveIndex=t}function re(){return Bt.lFrame.currentQueryIndex}function ie(t){Bt.lFrame.currentQueryIndex=t}function se(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function oe(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=se(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Bt.lFrame=ue();return r.currentTNode=e,r.lView=t,!0}function ae(t){const e=ue(),n=t[1];Bt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ue(){const t=Bt.lFrame,e=null===t?null:t.child;return null===e?ce(t):e}function ce(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function le(){const t=Bt.lFrame;return Bt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const he=le;function de(){const t=le();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fe(){return Bt.lFrame.selectedIndex}function pe(t){Bt.lFrame.selectedIndex=t}function ge(){const t=Bt.lFrame;return Dt(t.tView,t.selectedIndex)}function me(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ye(t,e,n){_e(t,e,3,n)}function be(t,e,n,r){(3&t[2])===n&&_e(t,e,n,r)}function ve(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function _e(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(we(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function we(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const Ee=-1;class Se{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Oe(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];Te(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Ce(t){return 3===t||4===t||6===t}function Te(t){return 64===t.charCodeAt(0)}function Ie(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||xe(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function xe(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Ae(t){return t!==Ee}function ke(t){return 32767&t}function Ne(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let je=!0;function De(t){const e=je;return je=t,e}let Re=0;function Pe(t,e){const n=Le(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Me(r.data,t),Me(e,null),Me(r.blueprint,null));const i=Fe(t,e),s=t.injectorIndex;if(Ae(i)){const t=ke(i),n=Ne(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function Me(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Le(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Fe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ee;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ee}function Ve(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(X)&&(r=n[X]),null==r&&(r=n[X]=Re++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ue(t,e,n){if(n&N.Optional)return t;w(e,"NodeInjector")}function qe(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],s=D(void 0);try{return i?i.get(e,r,n&N.Optional):R(e,r,n&N.Optional)}finally{D(s)}}return Ue(r,e,n)}function Be(t,e,n,r=N.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(X)?t[X]:void 0;return"number"==typeof e?e>=0?255&e:ze:e}(n);if("function"==typeof s){if(!oe(e,t,r))return r&N.Host?Ue(i,n,r):qe(e,n,r,i);try{const t=s();if(null!=t||r&N.Optional)return t;w(n)}finally{he()}}else if("number"==typeof s){let i=null,o=Le(t,e),a=Ee,u=r&N.Host?e[16][6]:null;for((-1===o||r&N.SkipSelf)&&(a=-1===o?Fe(t,e):e[o+8],a!==Ee&&Qe(r,!1)?(i=e[1],o=ke(a),e=Ne(a,e)):o=-1);-1!==o;){const t=e[1];if(We(s,o,t.data)){const t=Ke(o,e,n,i,r,u);if(t!==He)return t}a=e[o+8],a!==Ee&&Qe(r,e[1].data[o+8]===u)&&We(s,o,e)?(i=t,o=ke(a),e=Ne(a,e)):o=-1}}}return qe(e,n,r,i)}const He={};function ze(){return new Ye(Gt(),zt())}function Ke(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=$e(a,o,n,null==r?mt(a)&&je:r!=o&&0!=(3&a.type),i&N.Host&&s===a);return null!==u?Ge(e,o,u,a):He}function $e(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&bt(t)&&t.type===n)return u}return null}function Ge(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof Se){const o=i;o.resolving&&function(t,e){throw new b("200",`Circular dependency in DI detected for ${t}`)}(_(s[n]));const a=De(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?D(o.injectImpl):null;oe(t,r,N.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=Et(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&D(u),De(a),o.resolving=!1,he()}}return i}function We(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Qe(t,e){return!(t&N.Self||t&N.Host&&e)}class Ye{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Be(this._tNode,this._lView,t,void 0,e)}}function Ze(t){return P(()=>{const e=t.prototype.constructor,n=e[Z]||Xe(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Z]||Xe(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Xe(t){return y(t)?()=>{const e=Xe(m(t));return e&&e()}:vt(t)}function Je(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ce(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Gt(),t)}const tn="__parameters__";function en(t,e,n){return P(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(tn)?t[tn]:Object.defineProperty(t,tn,{value:[]})[tn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class nn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=E({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const rn=new nn("AnalyzeForEntryComponents"),sn=Function;function on(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),on(r,e)):e!==t&&e.push(r)}return e}function an(t,e){t.forEach(t=>Array.isArray(t)?an(t,e):e(t))}function un(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function cn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ln(t,e,n){let r=dn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function hn(t,e){const n=dn(t,e);if(n>=0)return t[1|n]}function dn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const fn={},pn=/\n/gm,gn="__source",mn=l({provide:String,useValue:l});let yn;function bn(t){const e=yn;return yn=t,e}function vn(t,e=N.Default){if(void 0===yn)throw new Error("inject() must be called from an injection context");return null===yn?R(t,void 0,e):yn.get(t,e&N.Optional?null:void 0,e)}function _n(t,e=N.Default){return(j||vn)(m(t),e)}function wn(t){const e=[];for(let n=0;n<t.length;n++){const r=m(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(_n(t,n))}else e.push(_n(r))}return e}function En(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Sn=En(en("Inject",t=>({token:t})),-1),On=En(en("Optional"),8),Cn=En(en("SkipSelf"),4);let Tn;function In(t){var e;return(null===(e=function(){if(void 0===Tn&&(Tn=null,B.trustedTypes))try{Tn=B.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Tn}())||void 0===e?void 0:e.createHTML(t))||t}class xn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class An extends xn{getTypeName(){return"HTML"}}class kn extends xn{getTypeName(){return"Style"}}class Nn extends xn{getTypeName(){return"Script"}}class jn extends xn{getTypeName(){return"URL"}}class Dn extends xn{getTypeName(){return"ResourceURL"}}function Rn(t){return t instanceof xn?t.changingThisBreaksApplicationSecurity:t}function Pn(t,e){const n=Mn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Mn(t){return t instanceof xn&&t.getTypeName()||null}function Ln(t){return new An(t)}function Fn(t){return new kn(t)}function Vn(t){return new Nn(t)}function Un(t){return new jn(t)}function qn(t){return new Dn(t)}class Bn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(In(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Hn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=In(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=In(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const zn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Kn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function $n(t){return(t=String(t)).match(zn)||t.match(Kn)?t:"unsafe:"+t}function Gn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Wn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Qn=Gn("area,br,col,hr,img,wbr"),Yn=Gn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zn=Gn("rp,rt"),Xn=Wn(Zn,Yn),Jn=Wn(Qn,Wn(Yn,Gn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wn(Zn,Gn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xn),tr=Gn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),er=Gn("srcset"),nr=Wn(tr,er,Gn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Gn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),rr=Gn("script,style,template");class ir{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Jn.hasOwnProperty(e))return this.sanitizedSomething=!0,!rr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,s=e.toLowerCase();if(!nr.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;tr[s]&&(o=$n(o)),er[s]&&(r=o,o=(r=String(r)).split(",").map(t=>$n(t.trim())).join(", ")),this.buf.push(" ",e,'="',ar(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Jn.hasOwnProperty(e)&&!Qn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ar(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const sr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,or=/([^\#-~ |!])/g;function ar(t){return t.replace(/&/g,"&amp;").replace(sr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(or,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ur;function cr(t,e){let n=null;try{ur=ur||function(t){const e=new Hn(t);return function(){try{return!!(new window.DOMParser).parseFromString(In(""),"text/html")}catch(t){return!1}}()?new Bn(e):e}(t);let r=e?String(e):"";n=ur.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=ur.getInertBodyElement(r)}while(r!==s);return In((new ir).sanitizeChildren(lr(n)||n))}finally{if(n){const t=lr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function lr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var hr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function dr(t){const e=function(){const t=zt();return t&&t[12]}();return e?e.sanitize(hr.URL,t)||"":Pn(t,"URL")?Rn(t):$n(v(t))}function fr(t){return t.ngDebugContext}function pr(t){return t.ngOriginalError}function gr(t,...e){t.error(...e)}class mr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||gr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?fr(t)?fr(t):this._findContext(pr(t)):null}_findOriginalError(t){let e=pr(t);for(;e&&pr(e);)e=pr(e);return e}}function yr(t,e){t.__ngContext__=e}const br=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(B))();function vr(t){return t instanceof Function?t():t}var _r=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function wr(t,e){return(void 0)(t,e)}function Er(t){const e=t[3];return pt(e)?e[3]:e}function Sr(t){return Cr(t[13])}function Or(t){return Cr(t[4])}function Cr(t){for(;null!==t&&!pt(t);)t=t[4];return t}function Tr(t,e,n,r,i){if(null!=r){let s,o=!1;pt(r)?s=r:ft(r)&&(o=!0,r=r[0]);const a=kt(r);0===t&&null!==n?null==i?Dr(e,n,a):jr(e,n,a,i||null,!0):1===t&&null!==n?jr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Pr(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==kt(n)&&Tr(e,t,r,s,i);for(let o=dt;o<n.length;o++){const i=n[o];qr(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Ir(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function xr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,qt(i,-1)),n.splice(r,1)}function Ar(t,e){if(t.length<=dt)return;const n=dt+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&xr(s,r),e>0&&(t[n-1][4]=r[4]);const o=cn(t,dt+e);qr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function kr(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&qr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Nr(t[1],t);for(;e;){let n=null;if(ft(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ft(e)&&Nr(e[1],e),e=e[3];null===e&&(e=t),ft(e)&&Nr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Nr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Se)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):kt(e[t]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&xr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function jr(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Dr(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function Rr(t,e,n,r,i){null!==r?jr(t,e,n,r,i):Dr(t,e,n)}function Pr(t,e){return xt(t)?t.parentNode(e):e.parentNode}function Mr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return jt(r,n)}(t,e.parent,n)}(t,r,e),s=e[11],o=function(t,e,n){return function(t,e,n){return 40&t.type?jt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Rr(s,i,n[a],o,!1);else Rr(s,i,n,o,!1)}function Lr(t,e){if(null!==e){const n=e.type;if(3&n)return jt(e,t);if(4&n)return Vr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Lr(t,n);{const n=t[e.index];return pt(n)?Vr(-1,n):kt(n)}}if(32&n)return wr(e,t)()||kt(t[e.index]);{const n=Fr(t,e);return null!==n?Array.isArray(n)?n[0]:Lr(Er(t[16]),n):Lr(t,e.next)}}return null}function Fr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Vr(t,e){const n=dt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Lr(t,r)}return e[7]}function Ur(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&yr(kt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Ur(t,e,n.child,r,i,s,!1),Tr(e,t,i,a,s);else if(32&u){const o=wr(n,r);let u;for(;u=o();)Tr(e,t,i,u,s);Tr(e,t,i,a,s)}else 16&u?Br(t,e,r,n,i,s):Tr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function qr(t,e,n,r,i,s){Ur(n,r,t.firstChild,e,i,s,!1)}function Br(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Tr(e,t,i,a[u],s);else Ur(t,e,a,o[3],i,s,!0)}function Hr(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function zr(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Kr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const $r="ng-template";function Gr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Kr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Wr(t){return 4===t.type&&t.value!==$r}function Qr(t,e,n){return e===(4!==t.type||n?t.value:$r)}function Yr(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(Ce(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Qr(t,u,n)||""===u&&1===e.length){if(Zr(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Gr(t.attrs,c,n)){if(Zr(r))return!1;o=!0}continue}const l=Xr(8&r?"class":u,i,Wr(t),n);if(-1===l){if(Zr(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Kr(e,c,0)||2&r&&c!==t){if(Zr(r))return!1;o=!0}}}}else{if(!o&&!Zr(r)&&!Zr(u))return!1;if(o&&Zr(u))continue;o=!1,r=u|1&r}}return Zr(r)||o}function Zr(t){return 0==(1&t)}function Xr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Jr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Yr(t,e[r],n))return!0;return!1}function ti(t,e){return t?":not("+e.trim()+")":e}function ei(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Zr(o)||(e+=ti(s,i),i=""),r=o,s=s||!Zr(r);n++}return""!==i&&(e+=ti(s,i)),e}const ni={};function ri(t){ii(Kt(),zt(),fe()+t,Zt())}function ii(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&ye(e,r,n)}else{const r=t.preOrderHooks;null!==r&&be(e,r,0,n)}pe(n)}function si(t,e){return t<<17|e<<2}function oi(t){return t>>17&32767}function ai(t){return 2|t}function ui(t){return(131068&t)>>2}function ci(t,e){return-131069&t|e<<2}function li(t){return 1|t}function hi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];ie(i),n.contentQueries(2,e[s],s)}}}function di(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function fi(t,e,n,r,i){let s=t.data[e];if(null===s)s=function(t,e,n,r,i){const s=Wt(),o=Yt(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,r,i),Bt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=function(){const t=Bt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return Qt(s,!0),s}function pi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function gi(t,e,n){ae(e);try{const r=t.viewQuery;null!==r&&zi(1,r,n);const i=t.template;null!==i&&bi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&hi(t,e),t.staticViewQueries&&zi(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)Vi(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,de()}}function mi(t,e,n,r){const i=e[2];if(256==(256&i))return;ae(e);const s=Zt();try{Ut(e),Bt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&bi(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&ye(e,n,null)}else{const n=t.preOrderHooks;null!==n&&be(e,n,0,null),ve(e,0)}if(function(t){for(let e=Sr(t);null!==e;e=Or(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&qt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Sr(t);null!==e;e=Or(e))for(let t=dt;t<e.length;t++){const n=e[t],r=n[1];Ft(n)&&mi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&hi(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&ye(e,n)}else{const n=t.contentHooks;null!==n&&be(e,n,1),ve(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)pe(~r);else{const i=r,s=n[++t],o=n[++t];ee(s,i),o(2,e[i])}}}finally{pe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Li(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&zi(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&ye(e,n)}else{const n=t.viewHooks;null!==n&&be(e,n,2),ve(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,qt(e[3],-1))}finally{de()}}function yi(t,e,n,r){const i=e[10],s=!Zt(),o=Lt(e);try{s&&!o&&i.begin&&i.begin(),o&&gi(t,e,r),mi(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function bi(t,e,n,r,i){const s=fe(),o=2&r;try{pe(-1),o&&e.length>ht&&ii(t,e,ht,Zt()),n(r,i)}finally{pe(s)}}function vi(t,e,n){Ht()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Pe(n,e),yr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=bt(r);s&&Di(e,n,r);const u=Ge(e,t,a,n);yr(u,e),null!==o&&Ri(0,a-i,u,r,0,o),s&&(Pt(n.index,e)[8]=u)}}(t,e,n,jt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Bt.lFrame.currentDirectiveIndex;try{pe(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ne(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||xi(r,i)}}finally{pe(-1),ne(o)}}(t,e,n))}function _i(t,e,n=jt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function wi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ei(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ei(t,e,n,r,i,s,o,a,u,c){const l=ht+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ni);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Si(t,e,n,r){const i=$i(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Gi(t).push(r,i.length-1))}function Oi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ci(t,e,n,r,i,s,o,a){const u=jt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Qi(t,n,c,r,i),mt(e)&&function(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,xt(s)?s.setProperty(u,r,i):Te(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ti(t,e,n,r){let i=!1;if(Ht()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Jr(n,o.selectors,!1)&&(i||(i=[]),Ve(Pe(n,e),t,o.type),bt(o)?(Ai(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Ni(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=pi(t,e,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=Ie(n.mergedAttrs,c.hostAttrs),ji(t,n,e,u,c),ki(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Wr(e)?null:Pi(n,i);s.push(c),o=Oi(n,u,o),a=Oi(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new b("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=Ie(n.mergedAttrs,n.attrs),i}function Ii(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function xi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ai(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ki(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;bt(e)&&(n[""]=t)}}function Ni(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ji(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=vt(i.type)),o=new Se(s,bt(i),null);t.blueprint[r]=o,n[r]=o,Ii(t,e,0,r,pi(t,n,i.hostVars,ni),i)}function Di(t,e,n){const r=jt(e,t),i=wi(n),s=t[10],o=Ui(t,di(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function Ri(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function Pi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Mi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Li(t,e){const n=Pt(e,t);if(Ft(n)){const t=n[1];80&n[2]?mi(t,n,t.template,n[8]):n[5]>0&&Fi(n)}}function Fi(t){for(let n=Sr(t);null!==n;n=Or(n))for(let t=dt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];mi(t,e,t.template,e[8])}else e[5]>0&&Fi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Pt(e[n],t);Ft(r)&&r[5]>0&&Fi(r)}}function Vi(t,e){const n=Pt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),gi(r,n,n[8])}function Ui(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function qi(t){for(;t;){t[2]|=64;const e=Er(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Bi(t,e,n){const r=e[10];r.begin&&r.begin();try{mi(t,e,t.template,n)}catch(i){throw Wi(e,i),i}finally{r.end&&r.end()}}function Hi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Mt(n),i=r[1];yi(i,r,i.template,n)}}(t[8])}function zi(t,e,n){ie(0),e(t,n)}const Ki=(()=>Promise.resolve(null))();function $i(t){return t[7]||(t[7]=[])}function Gi(t){return t.cleanup||(t.cleanup=[])}function Wi(t,e){const n=t[9],r=n?n.get(mr,null):null;r&&r.handleError(e)}function Qi(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Yi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=f(i,t):2==s&&(r=f(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Zi=new nn("INJECTOR",-1);class Xi{get(t,e=fn){if(e===fn){const e=new Error(`NullInjectorError: No provider for ${d(t)}!`);throw e.name="NullInjectorError",e}return e}}const Ji=new nn("Set Injector scope."),ts={},es={},ns=[];let rs;function is(){return void 0===rs&&(rs=new Xi),rs}function ss(t,e=null,n=null,r){return new os(t,n,e||is(),r)}class os{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&an(e,n=>this.processProvider(n,t,e)),an([t],t=>this.processInjectorType(t,[],i)),this.records.set(Zi,cs(void 0,this));const s=this.records.get(Ji);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:d(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=fn,n=N.Default){this.assertNotDestroyed();const r=bn(this);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof nn)&&O(t);e=n&&this.injectableDefInScope(n)?cs(as(t),ts):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?is():this.parent).get(t,e=n&N.Optional&&e===fn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(d(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[gn]&&i.unshift(e[gn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=d(e);if(Array.isArray(e))i=e.map(d).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(pn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{bn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(d(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=m(t)))return!1;let r=T(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=T(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{an(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];an(r,t=>this.processProvider(t,n,r||ns))}}this.injectorDefTypes.add(s);const a=vt(s)||(()=>new s);this.records.set(s,cs(a,ts));const u=r.providers;if(null!=u&&!o){const e=t;an(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=hs(t=m(t))?t:m(t&&t.provide);const i=function(t,e,n){return ls(t)?cs(void 0,t.useValue):cs(us(t),ts)}(t);if(hs(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=cs(void 0,ts,!0),e.factory=()=>wn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ts&&(e.value=es,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function as(t){const e=O(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof nn)throw new Error(`Token ${d(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${d(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[A]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function us(t,e,n){let r;if(hs(t)){const e=m(t);return vt(e)||as(e)}if(ls(t))r=()=>m(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...wn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>_n(m(t.useExisting));else{const e=m(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||as(e);r=()=>new e(...wn(t.deps))}var i;return r}function cs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ls(t){return null!==t&&"object"==typeof t&&mn in t}function hs(t){return"function"==typeof t}const ds=function(t,e,n){return function(t,e=null,n=null,r){const i=ss(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let fs=(()=>{class t{static create(t,e){return Array.isArray(t)?ds(t,e,""):ds(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=fn,t.NULL=new Xi,t.\u0275prov=E({token:t,providedIn:"any",factory:()=>_n(Zi)}),t.__NG_ELEMENT_ID__=-1,t})();function ps(t,e){me(Mt(t)[1],Gt())}function gs(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(bt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ms(t.inputs),e.declaredInputs=ms(t.declaredInputs),e.outputs=ms(t.outputs);const n=i.hostBindings;n&&vs(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&ys(t,s),o&&bs(t,o),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),bt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===gs&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ie(i.hostAttrs,n=Ie(n,i.hostAttrs))}}(r)}function ms(t){return t===H?{}:t===K?[]:t}function ys(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function bs(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function vs(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let _s=null;function ws(){if(!_s){const t=B.Symbol;if(t&&t.iterator)_s=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(_s=n)}}}return _s}class Es{constructor(t){this.wrapped=t}static wrap(t){return new Es(t)}static unwrap(t){return Es.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Es}}function Ss(t){return!!Os(t)&&(Array.isArray(t)||!(t instanceof Map)&&ws()in t)}function Os(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Cs(t,e,n){return t[e]=n}function Ts(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Is(t,e,n,r){const i=Ts(t,e,n);return Ts(t,e+1,r)||i}function xs(t,e,n,r){const i=zt();return Ts(i,te(),e)&&(Kt(),function(t,e,n,r,i,s){const o=jt(t,e);!function(t,e,n,r,i,s,o){if(null==s)xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?v(s):o(s,r||"",i);xt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],o,s,t.value,n,r,i)}(ge(),i,t,e,n,r)),xs}function As(t,e,n,r,i,s,o,a){const u=zt(),c=Kt(),l=t+ht,h=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=fi(e,t,4,o||null,Vt(c,a));Ti(e,n,l,Vt(c,u)),me(e,l);const h=l.tViews=Ei(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Qt(h,!1);const d=u[11].createComment("");Mr(c,u,d,h),yr(d,u),Ui(u,u[l]=Mi(d,u,d,h)),yt(h)&&vi(c,u,h),null!=o&&_i(u,h,a)}function ks(t,e=N.Default){const n=zt();return null===n?_n(t,e):Be(Gt(),n,m(t),e)}function Ns(t,e,n){const r=zt();return Ts(r,te(),e)&&Ci(Kt(),ge(),r,t,e,r[11],n,!1),Ns}function js(t,e,n,r,i){const s=i?"class":"style";Qi(t,n,e.inputs[s],s,r)}function Ds(t,e,n,r){const i=zt(),s=Kt(),o=ht+t,a=i[11],u=i[o]=Ir(a,e,Bt.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=fi(e,t,2,i,Vt(a,s));return Ti(e,n,u,Vt(a,o)),null!==u.attrs&&Yi(u,u.attrs,!1),null!==u.mergedAttrs&&Yi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];Qt(c,!0);const l=c.mergedAttrs;null!==l&&Oe(a,u,l);const h=c.classes;null!==h&&zr(a,u,h);const d=c.styles;null!==d&&Hr(a,u,d),64!=(64&c.flags)&&Mr(s,i,u,c),0===Bt.lFrame.elementDepthCount&&yr(u,i),Bt.lFrame.elementDepthCount++,yt(c)&&(vi(s,i,c),function(t,e,n){if(gt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(s,c,i)),null!==r&&_i(i,c)}function Rs(){let t=Gt();Yt()?Bt.lFrame.isParent=!1:(t=t.parent,Qt(t,!1));const e=t;Bt.lFrame.elementDepthCount--;const n=Kt();n.firstCreatePass&&(me(n,t),gt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&js(n,e,zt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&js(n,e,zt(),e.stylesWithoutHost,!1)}function Ps(t,e,n,r){Ds(t,e,n,r),Rs()}function Ms(){return zt()}function Ls(t){return!!t&&"function"==typeof t.then}function Fs(t){return!!t&&"function"==typeof t.subscribe}const Vs=Fs;function Us(t,e,n=!1,r){const i=zt(),s=Kt(),o=Gt();return function(t,e,n,r,i,s,o=!1,a){const u=yt(r),c=t.firstCreatePass&&Gi(t),l=$i(e);let h=!0;if(3&r.type){const d=jt(r,e),f=a?a(d):H,p=f.target||d,g=l.length,m=a?t=>a(kt(t[r.index])).target:r.index;if(xt(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Bs(r,e,0,s,!1);const t=n.listen(f.name||p,i,s);l.push(s,t),c&&c.push(i,m,g,g+1)}}else s=Bs(r,e,0,s,!0),p.addEventListener(i,s,o),l.push(s),c&&c.push(i,m,g,o)}else s=Bs(r,e,0,s,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,n,r),Us}function qs(t,e,n,r){try{return!1!==n(r)}catch(i){return Wi(t,i),!1}}function Bs(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&qi(o);let a=qs(e,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=qs(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Hs(t=1){return function(t){return(Bt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Bt.lFrame.contextLView))[8]}(t)}function zs(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?oi(s):ui(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];Ks(t[a],e)&&(u=!0,t[a+1]=r?li(n):ai(n)),a=r?oi(n):ui(n)}u&&(t[n+1]=r?ai(s):li(s))}function Ks(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&dn(t,e)>=0}function $s(t,e){return function(t,e,n,r){const i=zt(),s=Kt(),o=function(t){const e=Bt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();s.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[fe()],o=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(s)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Bt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=e.residualClasses;if(null===i)0===e.classBindings&&(n=Ws(n=Gs(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=Gs(i,t,e,n,r),null===s){let n=function(t,e,n){const r=e.classBindings;if(0!==ui(r))return t[oi(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Gs(null,t,e,n[1],r),n=Ws(n,e.attrs,r),function(t,e,n,r){t[oi(e.classBindings)]=r}(t,e,0,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Ws(r,t[s].hostAttrs,true);return Ws(r,e.attrs,true)}(t,e)}return void 0!==s&&(e.residualClasses=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=e.classBindings,a=oi(o),u=ui(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||dn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=oi(t[a+1]);t[r+1]=si(e,a),0!==e&&(t[e+1]=ci(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=si(a,0),0!==a&&(t[a+1]=ci(t[a+1],r)),a=r;else t[r+1]=si(u,0),0===a?a=r:t[u+1]=ci(t[u+1],r),u=r;l&&(t[r+1]=ai(t[r+1])),zs(t,c,r,!0),zs(t,c,r,!1),function(t,e,n,r,i){const s=t.residualClasses;null!=s&&"string"==typeof e&&dn(s,e)>=0&&(n[r+1]=li(n[r+1]))}(e,c,t,r),o=si(a,u),e.classBindings=o}(i,s,e,n,o)}}(s,t,o,true),e!==ni&&Ts(i,o,e)&&function(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Ys(1==(1&c)?Qs(u,e,n,i,ui(c),o):void 0)||(Ys(s)||function(t){return 2==(2&t)}(c)&&(s=Qs(u,null,n,i,a,o)),function(t,e,n,r,i){const s=xt(t);i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r)}(r,0,Nt(fe(),n),i,s))}(s,s.data[fe()],i,i[11],t,i[o+1]=function(t,e){return null==t||"object"==typeof t&&(t=d(Rn(t))),t}(e),true,o)}(t,e),$s}function Gs(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ws(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ws(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ln(t,o,!!n||e[++s]))}return void 0===t?null:t}function Qs(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===ni&&(l=c?z:void 0);let h=c?hn(l,r):u===r?l:void 0;if(s&&!Ys(h)&&(h=hn(e,r)),Ys(h)&&(a=h,o))return a;const d=t[i+1];i=o?oi(d):ui(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=hn(t,r))}return a}function Ys(t){return void 0!==t}function Zs(t,e=""){const n=zt(),r=Kt(),i=t+ht,s=r.firstCreatePass?fi(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Mr(r,n,o,s),Qt(s,!1)}function Xs(t){return Js("",t,""),Xs}function Js(t,e,n){const r=zt(),i=function(t,e,n,r){return Ts(t,te(),n)?e+v(n)+r:ni}(r,t,e,n);return i!==ni&&function(t,e,n){const r=Nt(e,t);!function(t,e,n){xt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,fe(),i),Js}function to(t,e,n){const r=zt();return Ts(r,te(),e)&&Ci(Kt(),ge(),r,t,e,r[11],n,!0),to}const eo=void 0;var no=["en",[["a","p"],["AM","PM"],eo],[["AM","PM"],eo,eo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],eo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],eo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",eo,"{1} 'at' {0}",eo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ro={};function io(t,e,n){"string"!=typeof e&&(n=e,e=t[co.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ro[e]=t,n&&(ro[e][co.ExtraData]=n)}function so(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=uo(e);if(n)return n;const r=e.split("-")[0];if(n=uo(r),n)return n;if("en"===r)return no;throw new Error(`Missing locale data for the locale "${t}".`)}function oo(t){return so(t)[co.CurrencyCode]||null}function ao(t){return so(t)[co.PluralCase]}function uo(t){return t in ro||(ro[t]=B.ng&&B.ng.common&&B.ng.common.locales&&B.ng.common.locales[t]),ro[t]}var co=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const lo="en-US";let ho=lo;function fo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ho=t.toLowerCase().replace(/_/g,"-"))}function po(t,e,n,r,i){if(t=m(t),Array.isArray(t))for(let s=0;s<t.length;s++)po(t[s],e,n,r,i);else{const s=Kt(),o=zt();let a=hs(t)?t:m(t.provide),u=us(t);const c=Gt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(hs(t)||!t.multi){const r=new Se(u,i,ks),f=yo(a,e,i?l:l+d,h);-1===f?(Ve(Pe(c,o),s,a),go(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=yo(a,e,l+d,h),p=yo(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Ve(Pe(c,o),s,a);const l=function(t,e,n,r,i){const s=new Se(t,n,ks);return s.multi=[],s.index=e,s.componentProviders=0,mo(s,i,r&&!n),s}(i?vo:bo,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),go(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else go(s,t,f>-1?f:p,mo(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function go(t,e,n,r){const i=hs(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function mo(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function yo(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function bo(t,e,n,r){return _o(this.multi,[])}function vo(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ge(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),_o(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],_o(i,s);return s}function _o(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function wo(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Kt();if(r.firstCreatePass){const i=bt(t);po(n,r.data,r.blueprint,i,!0),po(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Eo{}class So{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${d(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Oo=(()=>{class t{}return t.NULL=new So,t})();function Co(...t){}function To(t,e){return new xo(jt(t,e))}const Io=function(){return To(Gt(),zt())};let xo=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Io,t})();function Ao(t){return t instanceof xo?t.nativeElement:t}class ko{}let No=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>jo(),t})();const jo=function(){const t=zt(),e=Pt(Gt().index,t);return function(t){return t[11]}(ft(e)?e:t)};let Do=(()=>{class t{}return t.\u0275prov=E({token:t,providedIn:"root",factory:()=>null}),t})();class Ro{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Po=new Ro("11.2.11");class Mo{constructor(){}supports(t){return Ss(t)}create(t){return new Fo(t)}}const Lo=(t,e)=>e;class Fo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Lo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<Bo(n,r,i)?e:n,o=Bo(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ss(t))throw new Error(`Error trying to diff '${d(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[ws()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Vo(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new qo),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Vo{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Uo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class qo{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Uo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Bo(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ho{constructor(){}supports(t){return t instanceof Map||Os(t)}create(){return new zo}}class zo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Os(t)))throw new Error(`Error trying to diff '${d(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ko(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ko{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $o(){return new Go([new Mo])}let Go=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||$o()),deps:[[t,new Cn,new On]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=E({token:t,providedIn:"root",factory:$o}),t})();function Wo(){return new Qo([new Ho])}let Qo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Wo()),deps:[[t,new Cn,new On]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=E({token:t,providedIn:"root",factory:Wo}),t})();function Yo(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(kt(s)),pt(s))for(let t=dt;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&Yo(e[1],e,n,r)}const o=n.type;if(8&o)Yo(t,e,n.child,r);else if(32&o){const t=wr(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=Fr(e,n);if(Array.isArray(t))r.push(...t);else{const n=Er(e[16]);Yo(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Zo{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Yo(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Ar(t,n),cn(e,n))}this._attachedToViewContainer=!1}kr(this._lView[1],this._lView)}onDestroy(t){Si(this._lView[1],this._lView,null,t)}markForCheck(){qi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Bi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Xt(!0);try{Bi(t,e,n)}finally{Xt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,qr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Xo extends Zo{constructor(t){super(t),this._view=t}detectChanges(){Hi(this._view)}checkNoChanges(){!function(t){Xt(!0);try{Hi(t)}finally{Xt(!1)}}(this._view)}get context(){return null}}const Jo=ea;let ta=(()=>{class t{}return t.__NG_ELEMENT_ID__=Jo,t.__ChangeDetectorRef__=!0,t})();function ea(t=!1){return function(t,e,n){if(!n&&mt(t)){const n=Pt(t.index,e);return new Zo(n,n)}return 47&t.type?new Zo(e[16],e):null}(Gt(),zt(),t)}const na=[new Ho],ra=new Go([new Mo]),ia=new Qo(na),sa=function(){return ca(Gt(),zt())};let oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=sa,t})();const aa=oa,ua=class extends aa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=di(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),gi(e,n,t),new Zo(n)}};function ca(t,e){return 4&t.type?new ua(e,t,To(t,e)):null}class la{}class ha{}const da=function(){return ba(Gt(),zt())};let fa=(()=>{class t{}return t.__NG_ELEMENT_ID__=da,t})();const pa=fa,ga=class extends pa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return To(this._hostTNode,this._hostLView)}get injector(){return new Ye(this._hostTNode,this._hostLView)}get parentInjector(){const t=Fe(this._hostTNode,this._hostLView);if(Ae(t)){const e=Ne(t,this._hostLView),n=ke(t);return new Ye(e[1].data[n+8],e)}return new Ye(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ma(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-dt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(la,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ga(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=dt+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-dt?(e[4]=n[i],un(n,dt+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=Vr(i,s),a=n[11],u=Pr(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,qr(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(),un(ya(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ma(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Ar(this._lContainer,e);n&&(cn(ya(this._lContainer),e),kr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Ar(this._lContainer,e);return n&&null!=cn(ya(this._lContainer),e)?new Zo(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ma(t){return t[8]}function ya(t){return t[8]||(t[8]=[])}function ba(t,e){let n;const r=e[t.index];if(pt(r))n=r;else{let i;if(8&t.type)i=kt(r);else{const n=e[11];i=n.createComment("");const r=jt(t,e);jr(n,Pr(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Mi(r,e,i,t),Ui(e,n)}return new ga(n,t,e)}const va={};class _a extends Oo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ct(t);return new Sa(e,this.ngModule)}}function wa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ea=new nn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>br});class Sa extends Eo{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ei).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return wa(this.componentDef.inputs)}get outputs(){return wa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,va,i);return s!==va||r===va?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(ko,At),o=i.get(Do,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ir(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:br,clean:Ki,playerHandler:null,flags:0},d=Ei(0,null,null,1,0,null,null,null,null,null),f=di(null,d,h,l,null,null,s,a,o,i);let p,g;ae(f);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=fi(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Yi(a,u,!0),null!==t&&(Oe(i,t,u),null!==a.classes&&zr(i,t,a.classes),null!==a.styles&&Hr(i,t,a.styles)));const c=r.createRenderer(t,e),l=di(n,wi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Ve(Pe(a,n),o,e.type),Ai(o,a),Ni(a,n.length,1)),Ui(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)Oe(a,c,["ng-version",Po.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Zr(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Oe(a,c,t),e&&e.length>0&&zr(a,c,e.join(" "))}if(g=Dt(d,ht),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=Gt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ji(t,r,e,pi(t,e,1,null),n));const i=Ge(e,t,r.directiveStart,r);yr(i,e);const s=jt(r,e);return s&&yr(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=Gt();e.contentQueries(1,o,t.directiveStart)}const a=Gt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(pe(a.index),Ii(n[1],a,0,a.directiveStart,a.directiveEnd,e),xi(e,o)),o}(t,this.componentDef,f,h,[ps]),gi(d,f,null)}finally{de()}return new Oa(this.componentType,p,To(g,f),f,g)}}class Oa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Xo(r),this.componentType=t}get injector(){return new Ye(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ca=new Map;class Ta extends la{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new _a(this);const n=lt(t),r=t[Y]||null;r&&fo(r),this._bootstrapComponents=vr(n.bootstrap),this._r3Injector=ss(t,e,[{provide:la,useValue:this},{provide:Oo,useValue:this.componentFactoryResolver}],d(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=fs.THROW_IF_NOT_FOUND,n=N.Default){return t===fs||t===la||t===Zi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ia extends ha{constructor(t){super(),this.moduleType=t,null!==lt(t)&&function(t){const e=new Set;!function t(n){const r=lt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${d(e)} vs ${d(e.name)}`)}(i,Ca.get(i),n),Ca.set(i,n));const s=vr(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new Ta(this.moduleType,t)}}function xa(t,e,n){const r=Jt()+t,i=zt();return i[r]===ni?Cs(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Aa(t,e){const n=t[e];return n===ni?void 0:n}function ka(t,e){const n=Kt();let r;const i=t+ht;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new b("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=vt(r.type)),o=D(ks);try{const t=De(!1),e=s();return De(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,zt(),i,e),e}finally{D(o)}}function Na(t,e,n,r){const i=t+ht,s=zt(),o=Rt(s,i);return Ra(s,Da(s,i)?function(t,e,n,r,i,s,o){const a=e+n;return Is(t,a,i,s)?Cs(t,a+2,o?r.call(o,i,s):r(i,s)):Aa(t,a+2)}(s,Jt(),e,o.transform,n,r,o):o.transform(n,r))}function ja(t,e,n,r,i){const s=t+ht,o=zt(),a=Rt(o,s);return Ra(o,Da(o,s)?function(t,e,n,r,i,s,o,a){const u=e+n;return function(t,e,n,r,i){const s=Is(t,e,n,r);return Ts(t,e+2,i)||s}(t,u,i,s,o)?Cs(t,u+3,a?r.call(a,i,s,o):r(i,s,o)):Aa(t,u+3)}(o,Jt(),e,a.transform,n,r,i,a):a.transform(n,r,i))}function Da(t,e){return t[1].data[e].pure}function Ra(t,e){return Es.isWrapped(e)&&(e=Es.unwrap(e),t[Bt.lFrame.bindingIndex]=ni),e}function Pa(t){return e=>{setTimeout(t,void 0,e)}}const Ma=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,o;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(s=e.error)||void 0===s?void 0:s.bind(e),c=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(u=Pa(u),a&&(a=Pa(a)),c&&(c=Pa(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function La(){return this._results[ws()]()}class Fa{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=ws(),n=Fa.prototype;n[e]||(n[e]=La)}get changes(){return this._changes||(this._changes=new Ma)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=on(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Va{constructor(t){this.queryList=t,this.matches=null}clone(){return new Va(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ua{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ua(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==tu(t,e).matches&&this.queries[e].setDirty()}}class qa{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Ba{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ba(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ha{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ha(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,za(e,i)),this.matchTNodeWithReadOption(t,e,$e(e,t,i,!1,!1))}else n===oa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,$e(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===xo||r===fa||r===oa&&4&e.type)this.addMatch(e.index,-2);else{const n=$e(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function za(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ka(t,e,n,r){return-1===n?function(t,e){return 11&t.type?To(t,e):4&t.type?ca(t,e):null}(e,t):-2===n?function(t,e,n){return n===xo?To(e,t):n===oa?ca(e,t):n===fa?ba(e,t):void 0}(t,e,r):Ge(t,t[1],n,e)}function $a(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:Ka(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function Ga(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=$a(t,e,i,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)r.push(o[t/2]);else{const i=s[t+1],o=e[-n];for(let t=dt;t<o.length;t++){const e=o[t];e[17]===e[3]&&Ga(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];Ga(n[1],n,i,r)}}}}}return r}function Wa(t){const e=zt(),n=Kt(),r=re();ie(r+1);const i=tu(n,r);if(t.dirty&&Lt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?Ga(n,e,r,[]):$a(n,e,i,r);t.reset(s,Ao),t.notifyOnChanges()}return!0}return!1}function Qa(t,e,n){const r=Kt();r.firstCreatePass&&(Ja(r,new qa(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Xa(r,zt(),e)}function Ya(t,e,n,r){const i=Kt();if(i.firstCreatePass){const s=Gt();Ja(i,new qa(e,n,r),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Xa(i,zt(),n)}function Za(){return t=zt(),e=re(),t[19].queries[e].queryList;var t,e}function Xa(t,e,n){const r=new Fa(4==(4&n));Si(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ua),e[19].queries.push(new Va(r))}function Ja(t,e,n){null===t.queries&&(t.queries=new Ba),t.queries.track(new Ha(e,n))}function tu(t,e){return t.queries.getByIndex(e)}function eu(t=N.Default){const e=ea(!0);if(null!=e||t&N.Optional)return e;w("ChangeDetectorRef")}const nu=new nn("Application Initializer");let ru=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Co,this.reject=Co,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Ls(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(_n(nu,8))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();const iu=new nn("AppId"),su={provide:iu,useFactory:function(){return`${ou()}${ou()}${ou()}`},deps:[]};function ou(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const au=new nn("Platform Initializer"),uu=new nn("Platform ID"),cu=new nn("appBootstrapListener");let lu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();const hu=new nn("LocaleId"),du=new nn("DefaultCurrencyCode");class fu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const pu=function(t){return new Ia(t)},gu=pu,mu=function(t){return Promise.resolve(pu(t))},yu=function(t){const e=pu(t),n=vr(lt(t).declarations).reduce((t,e)=>{const n=ct(e);return n&&t.push(new Sa(n)),t},[]);return new fu(e,n)},bu=yu,vu=function(t){return Promise.resolve(yu(t))};let _u=(()=>{class t{constructor(){this.compileModuleSync=gu,this.compileModuleAsync=mu,this.compileModuleAndAllComponentsSync=bu,this.compileModuleAndAllComponentsAsync=vu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();const wu=(()=>Promise.resolve(0))();function Eu(t){"undefined"==typeof Zone?wu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Su{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ma(!1),this.onMicrotaskEmpty=new Ma(!1),this.onStable=new Ma(!1),this.onError=new Ma(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=B.requestAnimationFrame,e=B.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(B,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Tu(t),Cu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Tu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Iu(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),xu(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Iu(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),xu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Tu(t),Cu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Su.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Su.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,Ou,Co,Co);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Ou={};function Cu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Tu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Iu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function xu(t){t._nesting--,Cu(t)}class Au{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ma,this.onMicrotaskEmpty=new Ma,this.onStable=new Ma,this.onError=new Ma}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let ku=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Su.assertNotInAngularZone(),Eu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Eu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(_n(Su))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})(),Nu=(()=>{class t{constructor(){this._applications=new Map,Pu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Pu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();class ju{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Du(t){Pu=t}let Ru,Pu=new ju,Mu=!0,Lu=!1;function Fu(){return Lu=!0,Mu}function Vu(){if(Lu)throw new Error("Cannot enable prod mode after platform setup.");Mu=!1}const Uu=new nn("AllowMultipleToken");class qu{constructor(t,e){this.name=t,this.token=e}}function Bu(t,e,n=[]){const r=`Platform: ${e}`,i=new nn(r);return(e=[])=>{let s=Hu();if(!s||s.injector.get(Uu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Ji,useValue:"platform"});!function(t){if(Ru&&!Ru.destroyed&&!Ru.injector.get(Uu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ru=t.get(zu);const e=t.get(au,null);e&&e.forEach(t=>t())}(fs.create({providers:t,name:r}))}return function(t){const e=Hu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Hu(){return Ru&&!Ru.destroyed?Ru:null}let zu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Au:("zone.js"===t?void 0:t)||new Su({enableLongStackTrace:Fu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Su,useValue:n}];return n.run(()=>{const e=fs.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(mr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{Gu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Ls(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(ru);return t.runInitializers(),t.donePromise.then(()=>(fo(i.injector.get(hu,lo)||lo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Ku({},e);return function(t,e,n){const r=new Ia(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get($u);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${d(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(_n(fs))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();function Ku(t,e){return Array.isArray(e)?e.reduce(Ku,t):Object.assign(Object.assign({},t),e)}let $u=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new s.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Su.assertNotInAngularZone(),Eu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Su.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(o.a)(l,h.pipe(t=>Object(u.a)()(Object(a.a)(c)(t))))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Eo?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(la),i=n.create(fs.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(ku,null),a=o&&i.injector.get(Nu);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Gu(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Gu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(cu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(_n(Su),_n(fs),_n(mr),_n(Oo),_n(ru))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();function Gu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Wu{}class Qu{}const Yu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Zu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Yu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Xu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Xu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(_n(_u),_n(Qu,8))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();function Xu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Ju=function(t){return null},tc=Bu(null,"core",[{provide:uu,useValue:"unknown"},{provide:zu,deps:[fs]},{provide:Nu,deps:[]},{provide:lu,deps:[]}]),ec=[{provide:$u,useClass:$u,deps:[Su,fs,mr,Oo,ru]},{provide:Ea,deps:[Su],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ru,useClass:ru,deps:[[new On,nu]]},{provide:_u,useClass:_u,deps:[]},su,{provide:Go,useFactory:function(){return ra},deps:[]},{provide:Qo,useFactory:function(){return ia},deps:[]},{provide:hu,useFactory:function(t){return fo(t=t||"undefined"!=typeof $localize&&$localize.locale||lo),t},deps:[[new Sn(hu),new On,new Cn]]},{provide:du,useValue:"USD"}];let nc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(_n($u))},t.\u0275mod=it({type:t}),t.\u0275inj=S({providers:ec}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("2fFW"),i=n("NJ4a");const s={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("quSY");function s(t,e){return new r.a(n=>{const r=new i.a;let s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}class s{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return o}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},oB13:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("EQ5u");function i(t,e){return function(n){let i;if(i="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new s(i,e));const o=Object.create(n,r.b);return o.source=n,o.subjectFactory=i,o}}class s{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:n}=this,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i}}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function s(t,e=0){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(e,"a",function(){return o}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var s=[],o=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function d(t){s.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return y}),n.d(e,"c",function(){return _}),n.d(e,"d",function(){return w}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return s}),n.d(e,"g",function(){return O}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return l}),n.d(e,"j",function(){return h}),n.d(e,"k",function(){return f}),n.d(e,"l",function(){return p}),n.d(e,"m",function(){return u}),n.d(e,"n",function(){return c}),n.d(e,"o",function(){return d}),n.d(e,"p",function(){return g});var r=n("mrSG");function i(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var o=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function c(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function l(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function d(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function f(){return a().indexOf("Electron/")>=0}function p(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g(){return a().indexOf("MSAppHost/")>=0}var m=function(t){function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,y.prototype.create),s}return Object(r.c)(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?b(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new m(i,a,r);return u},t}();function b(t,e){return t.replace(v,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var v=/\{\$([^}]+)}/g;function _(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function w(t,e){var n=new E(t,e);return n.subscribe.bind(n)}var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function S(){}function O(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var s=n("IjjT");class o extends s.a{}const a=new o(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),s=n("n6bG");const o=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(s.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof o?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof o?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return b}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return O}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),s=n("vkgz"),o=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(s.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(o.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(t[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,t[s]),t[s];if(g.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(t=>{const e=t&&t[s];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>o[e],apply:(t,e,n)=>o.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(s,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},b=new u.r("angularfire2.app.options"),v=new u.r("angularfire2.app.nameOrConfig"),_=new u.P("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const s=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(s.options)&&S("error",`${s.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(o){}return s}const E=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function O(e,n,r,i,s){const[o,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(o){try{s.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return o}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...s]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const C={provide:class{},useFactory:w,deps:[b,u.A,[new u.B,v]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:b,useValue:e},{provide:v,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(u.C))},t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({providers:[C]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const s=(()=>Promise.resolve())(),o={};function a(t){return t in o&&(delete o[t],!0)}const u={setImmediate(t){const e=i++;return o[e]=!0,s.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7o/Q"),i=n("KqfI"),s=n("n6bG");function o(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(s.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new s(t))}}class s{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new o(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("ngJS"),s=n("jZKg");function o(t,e){return e?Object(s.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(s,0,{error:t,subscriber:n}):e=>e.error(t))}function s({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,s=n("mrSG"),o=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new o.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(o.e)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name=d);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(o.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}s(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:s,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(o.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function s(s){var a=s.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===s.type?r[a]:null;if(n.set(a,s),"PUBLIC"===s.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==s.serviceProps&&Object(o.f)(u,s.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,s.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(s);return"PUBLIC"===s.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(s.a)(Object(s.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(o.f)(e,t)},createSubscribe:o.d,ErrorFactory:o.b,deepExtend:o.f}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(o.i)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var b=self.firebase.SDK_VERSION;b&&b.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(o.n)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),v.apply(void 0,t)};var _=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.20",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function s(){return i}const o=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Rb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(o))},t.\u0275prov=Object(r.Gb)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Rb)(o))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Rb)(o).location;return new v(Object(r.Rb)(a),e&&e.origin||"")}const b=new r.r("appBaseHref");let v=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(b,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(b,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(S(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,S(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(m),r.Rb(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Gb)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new w(Object(r.Rb)(m),Object(r.Rb)(a))}function S(t){return t.replace(/\/index.html$/,"")}var O=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),C=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),T=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),I=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),x=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function A(t,e){return P(Object(r.jb)(t)[r.ab.DateFormat],e)}function k(t,e){return P(Object(r.jb)(t)[r.ab.TimeFormat],e)}function N(t,e){return P(Object(r.jb)(t)[r.ab.DateTimeFormat],e)}function j(t,e){const n=Object(r.jb)(t),i=n[r.ab.NumberSymbols][e];if(void 0===i){if(e===x.CurrencyDecimal)return n[r.ab.NumberSymbols][x.Decimal];if(e===x.CurrencyGroup)return n[r.ab.NumberSymbols][x.Group]}return i}const D=r.mb;function R(t){if(!t[r.ab.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.ab.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function P(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function M(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const L=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,F={},V=/((?:[^GyYMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var U=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),q=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),B=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function H(t,e,n,r){let i=function(t){if(nt(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[e,n=1,r=1]=t.split("-").map(t=>+t);return z(e,n-1,r)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let n;if(n=t.match(L))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,a,u,c),e}(n)}const e=new Date(t);if(!nt(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=K(n,e)||e;let s,o=[];for(;e;){if(s=V.exec(e),!s){o.push(e);break}{o=o.concat(s.slice(1));const t=o.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=et(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(et(e,r)-r))}(i,r));let u="";return o.forEach(t=>{const e=function(t){if(tt[t])return tt[t];let e;switch(t){case"G":case"GG":case"GGG":e=Q(B.Eras,T.Abbreviated);break;case"GGGG":e=Q(B.Eras,T.Wide);break;case"GGGGG":e=Q(B.Eras,T.Narrow);break;case"y":e=W(q.FullYear,1,0,!1,!0);break;case"yy":e=W(q.FullYear,2,0,!0,!0);break;case"yyy":e=W(q.FullYear,3,0,!1,!0);break;case"yyyy":e=W(q.FullYear,4,0,!1,!0);break;case"Y":e=J(1);break;case"YY":e=J(2,!0);break;case"YYY":e=J(3);break;case"YYYY":e=J(4);break;case"M":case"L":e=W(q.Month,1,1);break;case"MM":case"LL":e=W(q.Month,2,1);break;case"MMM":e=Q(B.Months,T.Abbreviated);break;case"MMMM":e=Q(B.Months,T.Wide);break;case"MMMMM":e=Q(B.Months,T.Narrow);break;case"LLL":e=Q(B.Months,T.Abbreviated,C.Standalone);break;case"LLLL":e=Q(B.Months,T.Wide,C.Standalone);break;case"LLLLL":e=Q(B.Months,T.Narrow,C.Standalone);break;case"w":e=X(1);break;case"ww":e=X(2);break;case"W":e=X(1,!0);break;case"d":e=W(q.Date,1);break;case"dd":e=W(q.Date,2);break;case"E":case"EE":case"EEE":e=Q(B.Days,T.Abbreviated);break;case"EEEE":e=Q(B.Days,T.Wide);break;case"EEEEE":e=Q(B.Days,T.Narrow);break;case"EEEEEE":e=Q(B.Days,T.Short);break;case"a":case"aa":case"aaa":e=Q(B.DayPeriods,T.Abbreviated);break;case"aaaa":e=Q(B.DayPeriods,T.Wide);break;case"aaaaa":e=Q(B.DayPeriods,T.Narrow);break;case"b":case"bb":case"bbb":e=Q(B.DayPeriods,T.Abbreviated,C.Standalone,!0);break;case"bbbb":e=Q(B.DayPeriods,T.Wide,C.Standalone,!0);break;case"bbbbb":e=Q(B.DayPeriods,T.Narrow,C.Standalone,!0);break;case"B":case"BB":case"BBB":e=Q(B.DayPeriods,T.Abbreviated,C.Format,!0);break;case"BBBB":e=Q(B.DayPeriods,T.Wide,C.Format,!0);break;case"BBBBB":e=Q(B.DayPeriods,T.Narrow,C.Format,!0);break;case"h":e=W(q.Hours,1,-12);break;case"hh":e=W(q.Hours,2,-12);break;case"H":e=W(q.Hours,1);break;case"HH":e=W(q.Hours,2);break;case"m":e=W(q.Minutes,1);break;case"mm":e=W(q.Minutes,2);break;case"s":e=W(q.Seconds,1);break;case"ss":e=W(q.Seconds,2);break;case"S":e=W(q.FractionalSeconds,1);break;case"SS":e=W(q.FractionalSeconds,2);break;case"SSS":e=W(q.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Y(U.Short);break;case"ZZZZZ":e=Y(U.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Y(U.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Y(U.Long);break;default:return null}return tt[t]=e,e}(t);u+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function z(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function K(t,e){const n=function(t){return Object(r.jb)(t)[r.ab.LocaleId]}(t);if(F[n]=F[n]||{},F[n][e])return F[n][e];let i="";switch(e){case"shortDate":i=A(t,I.Short);break;case"mediumDate":i=A(t,I.Medium);break;case"longDate":i=A(t,I.Long);break;case"fullDate":i=A(t,I.Full);break;case"shortTime":i=k(t,I.Short);break;case"mediumTime":i=k(t,I.Medium);break;case"longTime":i=k(t,I.Long);break;case"fullTime":i=k(t,I.Full);break;case"short":const e=K(t,"shortTime"),n=K(t,"shortDate");i=$(N(t,I.Short),[e,n]);break;case"medium":const r=K(t,"mediumTime"),s=K(t,"mediumDate");i=$(N(t,I.Medium),[r,s]);break;case"long":const o=K(t,"longTime"),a=K(t,"longDate");i=$(N(t,I.Long),[o,a]);break;case"full":const u=K(t,"fullTime"),c=K(t,"fullDate");i=$(N(t,I.Full),[u,c])}return i&&(F[n][e]=i),i}function $(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function G(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.substr(o.length-e)),s+o}function W(t,e,n=0,r=!1,i=!1){return function(s,o){let a=function(t,e){switch(t){case q.FullYear:return e.getFullYear();case q.Month:return e.getMonth();case q.Date:return e.getDate();case q.Hours:return e.getHours();case q.Minutes:return e.getMinutes();case q.Seconds:return e.getSeconds();case q.FractionalSeconds:return e.getMilliseconds();case q.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||a>-n)&&(a+=n),t===q.Hours)0===a&&-12===n&&(a=12);else if(t===q.FractionalSeconds)return u=e,G(a,3).substr(0,u);var u;const c=j(o,x.MinusSign);return G(a,e,c,r,i)}}function Q(t,e,n=C.Format,i=!1){return function(s,o){return function(t,e,n,i,s,o){switch(n){case B.Months:return function(t,e,n){const i=Object(r.jb)(t),s=P([i[r.ab.MonthsFormat],i[r.ab.MonthsStandalone]],e);return P(s,n)}(e,s,i)[t.getMonth()];case B.Days:return function(t,e,n){const i=Object(r.jb)(t),s=P([i[r.ab.DaysFormat],i[r.ab.DaysStandalone]],e);return P(s,n)}(e,s,i)[t.getDay()];case B.DayPeriods:const a=t.getHours(),u=t.getMinutes();if(o){const t=function(t){const e=Object(r.jb)(t);return R(e),(e[r.ab.ExtraData][2]||[]).map(t=>"string"==typeof t?M(t):[M(t[0]),M(t[1])])}(e),n=function(t,e,n){const i=Object(r.jb)(t);R(i);const s=P([i[r.ab.ExtraData][0],i[r.ab.ExtraData][1]],e)||[];return P(s,n)||[]}(e,s,i),o=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&u>=e.minutes,i=a<n.hours||a===n.hours&&u<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===a&&t.minutes===u)return!0;return!1});if(-1!==o)return n[o]}return function(t,e,n){const i=Object(r.jb)(t),s=P([i[r.ab.DayPeriodsFormat],i[r.ab.DayPeriodsStandalone]],e);return P(s,n)}(e,s,i)[a<12?0:1];case B.Eras:return function(t,e){return P(Object(r.jb)(t)[r.ab.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(s,o,t,e,n,i)}}function Y(t){return function(e,n,r){const i=-1*r,s=j(n,x.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case U.Short:return(i>=0?"+":"")+G(o,2,s)+G(Math.abs(i%60),2,s);case U.ShortGMT:return"GMT"+(i>=0?"+":"")+G(o,1,s);case U.Long:return"GMT"+(i>=0?"+":"")+G(o,2,s)+":"+G(Math.abs(i%60),2,s);case U.Extended:return 0===r?"Z":(i>=0?"+":"")+G(o,2,s)+":"+G(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}function Z(t){return z(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function X(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=Z(n),e=function(t){const e=z(t,0,1).getDay();return z(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}return G(i,t,j(r,x.MinusSign))}}function J(t,e=!1){return function(n,r){return G(Z(n).getFullYear(),t,j(r,x.MinusSign),e)}}const tt={};function et(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function nt(t){return t instanceof Date&&!isNaN(t.valueOf())}class rt{}let it=(()=>{class t extends rt{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(D(e||this.locale)(t)){case O.Zero:return"zero";case O.One:return"one";case O.Two:return"two";case O.Few:return"few";case O.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.v))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function st(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class ot{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let at=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ot(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new ut(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new ut(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L),r.Kb(r.t))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class ut{constructor(t,e){this.record=t,this.view=e}}let ct=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new lt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ht("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ht("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class lt{constructor(){this.$implicit=null,this.ngIf=null}}function ht(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}let dt=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",i,s){if(null==e||""===e||e!=e)return null;try{return H(e,n,s||this.locale,i)}catch(o){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.vb)(t)}'`)}(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.v))},t.\u0275pipe=r.Jb({name:"date",type:t,pure:!0}),t})(),ft=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[{provide:rt,useClass:it}]}),t})();function pt(t){return"browser"===t}function gt(t){return"server"===t}let mt=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new yt(Object(r.Rb)(o),window)}),t})();class yt{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=bt(this.window.history)||bt(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function bt(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class vt extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new vt,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=wt||(wt=document.querySelector("base"),wt)?wt.getAttribute("href"):null;return null==e?null:(n=e,_t||(_t=document.createElement("a")),_t.setAttribute("href",n),"/"===_t.pathname.charAt(0)?_t.pathname:"/"+_t.pathname);var n}resetBaseElement(){wt=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return st(document.cookie,t)}}let _t,wt=null;const Et=new r.r("TRANSITION_ID"),St=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Et,o,r.s],multi:!0}];class Ot{static init(){Object(r.X)(new Ot)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const s=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(s)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Ct=new r.r("EventManagerPlugins");let Tt=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ct),r.Rb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class It{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let xt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),At=(()=>{class t extends xt{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(o))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const kt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Nt=/%COMP%/g;function jt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?jt(t,i,n):(i=i.replace(Nt,t),n.push(i))}return n}function Dt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Rt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Pt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Mt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new Lt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=jt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Tt),r.Rb(At),r.Rb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class Pt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(kt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=kt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=kt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Dt(n)):this.eventManager.addEventListener(t,e,Dt(n))}}class Mt extends Pt{constructor(t,e,n,r){super(t),this.component=n;const i=jt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Nt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Nt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Lt extends Pt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=jt(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Ft=(()=>{class t extends It{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(o))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Vt=["alt","control","meta","shift"],Ut={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Bt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Ht=(()=>{class t extends It{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(Vt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&qt.hasOwnProperty(e)&&(e=qt[e]))}return Ut[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Vt.forEach(r=>{r!=n&&(0,Bt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(o))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const zt=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){vt.makeCurrent(),Ot.init()},multi:!0},{provide:o,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],Kt=Object(r.S)(r.W,"browser",zt),$t=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:Ct,useClass:Ft,multi:!0,deps:[o,r.A,r.C]},{provide:Ct,useClass:Ht,multi:!0,deps:[o]},[],{provide:Rt,useClass:Rt,deps:[Tt,At,r.c]},{provide:r.F,useExisting:Rt},{provide:xt,useExisting:At},{provide:At,useClass:At,deps:[o]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:Tt,useClass:Tt,deps:[Ct,r.A]},[]];let Gt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:Et,useExisting:r.c},St]}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(t,12))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:$t,imports:[ft,r.f]}),t})();"undefined"!=typeof window&&window;var Wt=n("Cfvw"),Qt=n("LRne"),Yt=n("XNiG"),Zt=n("9ppp");class Xt extends Yt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Zt.a;return this._value}next(t){super.next(this._value=t)}}var Jt=n("z+Ro"),te=n("DH7j"),ee=n("7o/Q");class ne extends ee.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class re extends ee.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ie=n("SeVD"),se=n("HDdC");function oe(t,e,n,r,i=new re(t,n,r)){if(!i.closed)return e instanceof se.a?e.subscribe(i):Object(ie.a)(e)(i)}var ae=n("yCtX");const ue={};class ce{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new le(t,this.resultSelector))}}class le extends ne{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(ue),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(oe(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===ue?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const he=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var de=n("bHdf");function fe(...t){return Object(de.a)(1)(Object(Qt.a)(...t))}var pe=n("EY2u");function ge(t){return new se.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Wt.a)(n):Object(pe.b)()).subscribe(e)})}var me=n("EQ5u"),ye=n("lJxs"),be=n("zx2A");function ve(t,e){return"function"==typeof e?n=>n.pipe(ve((n,r)=>Object(Wt.a)(t(n,r)).pipe(Object(ye.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new _e(t))}class _e{constructor(t){this.project=t}call(t,e){return e.subscribe(new we(t,this.project))}}class we extends be.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new be.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(be.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Ee=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Se(t){return e=>0===t?Object(pe.b)():e.lift(new Oe(t))}class Oe{constructor(t){if(this.total=t,this.total<0)throw new Ee}call(t,e){return e.subscribe(new Ce(t,this.total))}}class Ce extends ee.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Te(...t){const e=t[t.length-1];return Object(Jt.a)(e)?(t.pop(),n=>fe(t,n,e)):e=>fe(t,e)}function Ie(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new xe(t,e,n))}}class xe{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Ae(t,this.accumulator,this.seed,this.hasSeed))}}class Ae extends ee.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function ke(t,e){return function(n){return n.lift(new Ne(t,e))}}class Ne{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new je(t,this.predicate,this.thisArg))}}class je extends ee.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function De(t){return function(e){const n=new Re(t),r=e.lift(n);return n.caught=r}}class Re{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Pe(t,this.selector,this.caught))}}class Pe extends be.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new be.a(this);this.add(r);const i=Object(be.c)(n,r);i!==r&&this.add(i)}}}var Me=n("5+tZ");function Le(t,e){return Object(Me.a)(t,e,1)}function Fe(t){return function(e){return 0===t?Object(pe.b)():e.lift(new Ve(t))}}class Ve{constructor(t){if(this.total=t,this.total<0)throw new Ee}call(t,e){return e.subscribe(new Ue(t,this.total))}}class Ue extends ee.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function qe(t=ze){return e=>e.lift(new Be(t))}class Be{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new He(t,this.errorFactory))}}class He extends ee.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Qv){t=Qv}this.destination.error(t)}}}function ze(){return new he}function Ke(t=null){return e=>e.lift(new $e(t))}class $e{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ge(t,this.defaultValue))}}class Ge extends ee.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var We=n("SpAZ");function Qe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ke((e,n)=>t(e,n,r)):We.a,Se(1),n?Ke(e):qe(()=>new he))}var Ye=n("vkgz"),Ze=n("x+ZX"),Xe=n("quSY");class Je{constructor(t){this.callback=t}call(t,e){return e.subscribe(new tn(t,this.callback))}}class tn extends ee.a{constructor(t,e){super(t),this.add(new Xe.a(e))}}class en{constructor(t,e){this.id=t,this.url=e}}class nn extends en{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class rn extends en{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sn extends en{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class on extends en{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class an extends en{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class un extends en{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cn extends en{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ln extends en{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hn extends en{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dn{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fn{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class pn{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yn{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bn{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const vn="primary";class _n{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function wn(t){return new _n(t)}function En(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Sn(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function On(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Cn(t[i],e[i]))return!1;return!0}function Cn(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Tn(t){return Array.prototype.concat.apply([],t)}function In(t){return t.length>0?t[t.length-1]:null}function xn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function An(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(Wt.a)(Promise.resolve(t)):Object(Qt.a)(t)}function kn(t,e,n){return n?function(t,e){return On(t,e)}(t.queryParams,e.queryParams)&&Nn(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Cn(t[n],e[n]))}(t.queryParams,e.queryParams)&&jn(t.root,e.root)}function Nn(t,e){if(!Ln(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Nn(t.children[n],e.children[n]))return!1}return!0}function jn(t,e){return Dn(t,e,e.segments)}function Dn(t,e,n){if(t.segments.length>n.length)return!!Ln(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Ln(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!jn(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Ln(t.segments,r)&&!!t.children.primary&&Dn(t.children.primary,e,i)}}class Rn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wn(this.queryParams)),this._queryParamMap}toString(){return Un.serialize(this)}}class Pn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,xn(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qn(this)}}class Mn{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=wn(this.parameters)),this._parameterMap}toString(){return Wn(this)}}function Ln(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Fn{}class Vn{parse(t){const e=new Jn(t);return new Rn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Bn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${zn(e)}=${zn(t)}`).join("&"):`${zn(e)}=${zn(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Un=new Vn;function qn(t){return t.segments.map(t=>Wn(t)).join("/")}function Bn(t,e){if(!t.hasChildren())return qn(t);if(e){const e=t.children.primary?Bn(t.children.primary,!1):"",n=[];return xn(t.children,(t,e)=>{e!==vn&&n.push(`${e}:${Bn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return xn(t.children,(t,r)=>{r===vn&&(n=n.concat(e(t,r)))}),xn(t.children,(t,r)=>{r!==vn&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===vn?[Bn(t.children.primary,!1)]:[`${n}:${Bn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${qn(t)}/${e[0]}`:`${qn(t)}/(${e.join("//")})`}}function Hn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zn(t){return Hn(t).replace(/%3B/gi,";")}function Kn(t){return Hn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $n(t){return decodeURIComponent(t)}function Gn(t){return $n(t.replace(/\+/g,"%20"))}function Wn(t){return`${Kn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Kn(t)}=${Kn(e[t])}`).join("")}`;var e}const Qn=/^[^\/()?;=#]+/;function Yn(t){const e=t.match(Qn);return e?e[0]:""}const Zn=/^[^=?&#]+/,Xn=/^[^?&#]+/;class Jn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pn([],{}):new Pn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Pn(t,e)),n}parseSegment(){const t=Yn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Mn($n(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Yn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Yn(this.remaining);t&&(n=t,this.capture(n))}t[$n(e)]=$n(n)}parseQueryParam(t){const e=function(t){const e=t.match(Zn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Xn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Gn(e),i=Gn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Yn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=vn);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new Pn([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class tr{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=er(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=er(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=nr(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return nr(t,this._root).map(t=>t.value)}}function er(t,e){if(t===e.value)return e;for(const n of e.children){const e=er(t,n);if(e)return e}return null}function nr(t,e){if(t===e.value)return[e];for(const n of e.children){const r=nr(t,n);if(r.length)return r.unshift(e),r}return[]}class rr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ir(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class sr extends tr{constructor(t,e){super(t),this.snapshot=e,hr(this,t)}toString(){return this.snapshot.toString()}}function or(t,e){const n=function(t,e){const n=new cr([],{},{},"",{},vn,e,null,t.root,-1,{});return new lr("",new rr(n,[]))}(t,e),r=new Xt([new Mn("",{})]),i=new Xt({}),s=new Xt({}),o=new Xt({}),a=new Xt(""),u=new ar(r,i,o,a,s,vn,e,n.root);return u.snapshot=n.root,new sr(new rr(u,[]),n)}class ar{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(ye.a)(t=>wn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(ye.a)(t=>wn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ur(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class cr{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lr extends tr{constructor(t,e){super(e),this.url=t,hr(this,e)}toString(){return dr(this._root)}}function hr(t,e){e.value._routerState=t,e.children.forEach(e=>hr(t,e))}function dr(t){const e=t.children.length>0?` { ${t.children.map(dr).join(", ")} } `:"";return`${t.value}${e}`}function fr(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,On(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),On(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!On(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),On(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function pr(t,e){return On(t.params,e.params)&&function(t,e){return Ln(t,e)&&t.every((t,n)=>On(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||pr(t.parent,e.parent))}function gr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return gr(t,e,r);return gr(t,e)})}(t,e,n);return new rr(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return mr(e,t),t}}const n=new ar(new Xt((r=e.value).url),new Xt(r.params),new Xt(r.queryParams),new Xt(r.fragment),new Xt(r.data),r.outlet,r.component,r),i=e.children.map(e=>gr(t,e));return new rr(n,i)}var r}function mr(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)mr(t.children[n],e.children[n])}function yr(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function br(t){return"object"==typeof t&&null!=t&&t.outlets}function vr(t,e,n,r,i){let s={};return r&&xn(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Rn(n.root===t?e:_r(n.root,t,e),s,i)}function _r(t,e,n){const r={};return xn(t.children,(t,i)=>{r[i]=t===e?n:_r(t,e,n)}),new Pn(t.segments,r)}class wr{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&yr(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(br);if(r&&r!==In(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Er{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Sr(t,e,n){if(t||(t=new Pn([],{})),0===t.segments.length&&t.hasChildren())return Or(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(br(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!xr(a,u,e))return s;r+=2}else{if(!xr(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Pn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Pn(t.segments.slice(r.pathIndex),t.children),Or(e,0,i)}return r.match&&0===i.length?new Pn(t.segments,{}):r.match&&!t.hasChildren()?Cr(t,e,n):r.match?Or(t,0,i):Cr(t,e,n)}function Or(t,e,n){if(0===n.length)return new Pn(t.segments,{});{const r=function(t){return br(t[0])?t[0].outlets:{[vn]:t}}(n),i={};return xn(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Sr(t.children[r],e,n))}),xn(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Pn(t.segments,i)}}function Cr(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(br(s)){const t=Tr(s.outlets);return new Pn(r,t)}if(0===i&&yr(n[0])){r.push(new Mn(t.segments[e].path,Ir(n[0]))),i++;continue}const o=br(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&yr(a)?(r.push(new Mn(o,Ir(a))),i+=2):(r.push(new Mn(o,{})),i++)}return new Pn(r,{})}function Tr(t){const e={};return xn(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Cr(new Pn([],{}),0,t))}),e}function Ir(t){const e={};return xn(t,(t,n)=>e[n]=`${t}`),e}function xr(t,e,n){return t==n.path&&On(e,n.parameters)}class Ar{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),fr(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=ir(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),xn(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=ir(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=ir(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new yn(t.value.snapshot))}),t.children.length&&this.forwardEvent(new gn(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(fr(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),kr(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function kr(t){fr(t.value),t.children.forEach(kr)}class Nr{constructor(t,e){this.routes=t,this.module=e}}function jr(t){return"function"==typeof t}function Dr(t){return t instanceof Rn}const Rr=Symbol("INITIAL_VALUE");function Pr(){return ve(t=>function(...t){let e,n;return Object(Jt.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(te.a)(t[0])&&(t=t[0]),Object(ae.a)(t,n).lift(new ce(e))}(t.map(t=>t.pipe(Se(1),Te(Rr)))).pipe(Ie((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Rr)return t;if(r===Rr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Dr(r))return r}return t},t)},Rr),ke(t=>t!==Rr),Object(ye.a)(t=>Dr(t)?t:!0===t),Se(1)))}let Mr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[Ni]},encapsulation:2}),t})();function Lr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Fr(r,Vr(e,r))}}function Fr(t,e){t.children&&Lr(t.children,e)}function Vr(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Ur(t){const e=t.children&&t.children.map(Ur),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==vn&&(n.component=Mr),n}function qr(t){return t.outlet||vn}function Br(t,e){const n=t.filter(t=>qr(t)===e);return n.push(...t.filter(t=>qr(t)!==e)),n}const Hr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function zr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Hr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Sn)(n,t,e);if(!i)return Object.assign({},Hr);const s={};xn(i.posParams,(t,e)=>{s[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Kr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>$r(t,e,n)&&qr(n)!==vn)}(t,n,r)){const i=new Pn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&qr(s)!==vn){const n=new Pn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[qr(s)]=n}return i}(t,e,r,new Pn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>$r(t,e,n))}(t,n,r)){const s=new Pn(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if($r(t,n,a)&&!i[qr(a)]){const n=new Pn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[qr(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new Pn(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function $r(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Gr(t,e,n,r){return!!(qr(t)===r||r!==vn&&$r(e,n,t))&&("**"===t.path||zr(e,t,n).matched)}function Wr(t,e,n){return 0===e.length&&!t.children[n]}class Qr{constructor(t){this.segmentGroup=t||null}}class Yr{constructor(t){this.urlTree=t}}function Zr(t){return new se.a(e=>e.error(new Qr(t)))}function Xr(t){return new se.a(e=>e.error(new Yr(t)))}function Jr(t){return new se.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class ti{constructor(t,e,n,i,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Kr(this.urlTree.root,[],[],this.config).segmentGroup,e=new Pn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,vn).pipe(Object(ye.a)(t=>this.createUrlTree(ei(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(De(t=>{if(t instanceof Yr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Qr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,vn).pipe(Object(ye.a)(e=>this.createUrlTree(ei(e),t.queryParams,t.fragment))).pipe(De(t=>{if(t instanceof Qr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Pn([],{[vn]:t}):t;return new Rn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(ye.a)(t=>new Pn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(Wt.a)(r).pipe(Le(r=>{const i=n.children[r],s=Br(e,r);return this.expandSegmentGroup(t,s,i,r).pipe(Object(ye.a)(t=>({segment:t,outlet:r})))}),Ie((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ke((e,n)=>t(e,n,r)):We.a,Fe(1),n?Ke(e):qe(()=>new he))}())}expandSegment(t,e,n,r,i,s){return Object(Wt.a)(n).pipe(Le(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(De(t=>{if(t instanceof Qr)return Object(Qt.a)(null);throw t}))),Qe(t=>!!t),De((t,n)=>{if(t instanceof he||"EmptyError"===t.name){if(Wr(e,r,i))return Object(Qt.a)(new Pn([],{}));throw new Qr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return Gr(r,e,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):Zr(e):Zr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Xr(i):this.lineralizeSegments(n,i).pipe(Object(Me.a)(n=>{const i=new Pn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=zr(e,r,i);if(!o)return Zr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Xr(l):this.lineralizeSegments(r,l).pipe(Object(Me.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(Qt.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(ye.a)(t=>(n._loadedConfig=t,new Pn(r,{})))):Object(Qt.a)(new Pn(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=zr(e,n,r);if(!s)return Zr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Me.a)(t=>{const r=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=Kr(e,o,u,s),l=new Pn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe(Object(ye.a)(t=>new Pn(o,t)));if(0===s.length&&0===c.length)return Object(Qt.a)(new Pn(o,{}));const h=qr(n)===i;return this.expandSegment(r,l,s,c,h?vn:i,!0).pipe(Object(ye.a)(t=>new Pn(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Qt.a)(new Nr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Qt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Me.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(ye.a)(t=>(e._loadedConfig=t,t))):function(t){return new se.a(e=>e.error(En(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Qt.a)(new Nr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Qt.a)(!0);const i=r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&jr(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!jr(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return An(s)});return Object(Qt.a)(i).pipe(Pr(),Object(Ye.a)(t=>{if(!Dr(t))return;const e=En(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(ye.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Qt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Jr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Rn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return xn(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return xn(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new Pn(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function ei(t){const e={};for(const n of Object.keys(t.children)){const r=ei(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Pn(t.segments.concat(e.segments),e.children)}return t}(new Pn(t.segments,e))}class ni{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ri{constructor(t,e){this.component=t,this.route=e}}function ii(t,e,n){const r=t._root;return oi(r,e?e._root:null,n,[r.value])}function si(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function oi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=ir(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ln(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ln(t.url,e.url)||!On(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pr(t,e)||!On(t.queryParams,e.queryParams);case"paramsChange":default:return!pr(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ni(r)):(s.data=o.data,s._resolvedData=o._resolvedData),oi(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ri(a.outlet.component,o))}else o&&ai(e,a,i),i.canActivateChecks.push(new ni(r)),oi(t,null,s.component?a?a.children:null:n,r,i)}(t,s[t.value.outlet],n,r.concat([t.value]),i),delete s[t.value.outlet]}),xn(s,(t,e)=>ai(t,n.getContext(e),i)),i}function ai(t,e,n){const r=ir(t),i=t.value;xn(r,(t,r)=>{ai(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new ri(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class ui{}function ci(t){return new se.a(e=>e.error(t))}class li{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=Kr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,vn);if(null===e)return null;const n=new cr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},vn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new rr(n,e),i=new lr(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=ur(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],s=Br(t,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=di(n);return r.sort((t,e)=>t.value.outlet===vn?-1:e.value.outlet===vn?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Wr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Gr(t,e,n,r))return null;let i,s=[],o=[];if("**"===t.path){const r=n.length>0?In(n).parameters:{};i=new cr(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gi(t),qr(t),t.component,t,fi(e),pi(e)+n.length,mi(t))}else{const r=zr(e,t,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new cr(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gi(t),qr(t),t.component,t,fi(e),pi(e)+s.length,mi(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Kr(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new rr(i,t)]}if(0===a.length&&0===c.length)return[new rr(i,[])];const l=qr(t)===r,h=this.processSegment(a,u,c,l?vn:r);return null===h?null:[new rr(i,h)]}}function hi(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function di(t){const e=[],n=new Set;for(const r of t){if(!hi(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=di(r.children);e.push(new rr(r.value,t))}return e.filter(t=>!n.has(t))}function fi(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function pi(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function gi(t){return t.data||{}}function mi(t){return t.resolve||{}}function yi(t){return ve(e=>{const n=t(e);return n?Object(Wt.a)(n).pipe(Object(ye.a)(()=>e)):Object(Qt.a)(e)})}class bi extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const vi=new r.r("ROUTES");class _i{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(ye.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Nr(Tn(i.injector.get(vi,void 0,r.q.Self|r.q.Optional)).map(Ur),i)}),De(t=>{throw e._loader$=void 0,t}));return e._loader$=new me.a(n,()=>new Yt.a).pipe(Object(Ze.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(Wt.a)(this.loader.load(t)):An(t()).pipe(Object(Me.a)(t=>t instanceof r.w?Object(Qt.a)(t):Object(Wt.a)(this.compiler.compileModuleAsync(t))))}}class wi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ei,this.attachRef=null}}class Ei{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new wi,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Si{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Oi(t){throw t}function Ci(t,e,n){return e.parse("/")}function Ti(t,e){return Object(Qt.a)(null)}let Ii=(()=>{class t{constructor(t,e,n,i,s,o,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Yt.a,this.errorHandler=Oi,this.malformedUriErrorHandler=Ci,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ti,afterPreactivation:Ti},this.urlHandlingStrategy=new Si,this.routeReuseStrategy=new bi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=s.get(r.y),this.console=s.get(r.Y);const c=s.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Rn(new Pn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new _i(o,a,t=>this.triggerEvent(new dn(t)),t=>this.triggerEvent(new fn(t))),this.routerState=or(this.currentUrlTree,this.rootComponentType),this.transitions=new Xt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(ke(t=>0!==t.id),Object(ye.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),ve(t=>{let n=!1,r=!1;return Object(Qt.a)(t).pipe(Object(Ye.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ve(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Qt.a)(t).pipe(ve(t=>{const n=this.transitions.getValue();return e.next(new nn(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?pe.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,ve(t=>function(t,e,n,r,i){return new ti(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe(Object(ye.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(Ye.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Me.a)(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new li(t,e,n,r,i,s).recognize();return null===o?ci(new ui):Object(Qt.a)(o)}catch(Qv){return ci(Qv)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(Object(ye.a)(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Ye.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new an(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new nn(n,this.serializeUrl(r),i,s);e.next(a);const u=or(r,this.rootComponentType).snapshot;return Object(Qt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),pe.a}),yi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),Object(Ye.a)(t=>{const e=new un(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(ye.a)(t=>Object.assign(Object.assign({},t),{guards:ii(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Me.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?Object(Qt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Wt.a)(t).pipe(Object(Me.a)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return Object(Qt.a)(!0);const o=s.map(s=>{const o=si(s,e,i);let a;if(function(t){return t&&jr(t.canDeactivate)}(o))a=An(o.canDeactivate(t,e,n,r));else{if(!jr(o))throw new Error("Invalid CanDeactivate guard");a=An(o(t,e,n,r))}return a.pipe(Qe())});return Object(Qt.a)(o).pipe(Pr())}(t.component,t.route,n,e,r)),Qe(t=>!0!==t,!0))}(o,r,i,t).pipe(Object(Me.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Wt.a)(e).pipe(Le(e=>fe(function(t,e){return null!==t&&e&&e(new pn(t)),Object(Qt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new mn(t)),Object(Qt.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>ge(()=>{const i=e.guards.map(i=>{const s=si(i,e.node,n);let o;if(function(t){return t&&jr(t.canActivateChild)}(s))o=An(s.canActivateChild(r,t));else{if(!jr(s))throw new Error("Invalid CanActivateChild guard");o=An(s(r,t))}return o.pipe(Qe())});return Object(Qt.a)(i).pipe(Pr())}));return Object(Qt.a)(i).pipe(Pr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Qt.a)(!0);const i=r.map(r=>ge(()=>{const i=si(r,e,n);let s;if(function(t){return t&&jr(t.canActivate)}(i))s=An(i.canActivate(e,t));else{if(!jr(i))throw new Error("Invalid CanActivate guard");s=An(i(e,t))}return s.pipe(Qe())}));return Object(Qt.a)(i).pipe(Pr())}(t,e.route,n))),Qe(t=>!0!==t,!0))}(r,s,t,e):Object(Qt.a)(n)),Object(ye.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Ye.a)(t=>{if(Dr(t.guardsResult)){const e=En(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new cn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),ke(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new sn(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),yi(t=>{if(t.guards.canActivateChecks.length)return Object(Qt.a)(t).pipe(Object(Ye.a)(t=>{const e=new ln(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),ve(t=>{let n=!1;return Object(Qt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Me.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Qt.a)(t);let s=0;return Object(Wt.a)(n).pipe(Le(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Qt.a)({});const s={};return Object(Wt.a)(i).pipe(Object(Me.a)(i=>function(t,e,n,r){const i=si(t,e,r);return An(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Ye.a)(t=>{s[i]=t}))),Fe(1),Object(Me.a)(()=>Object.keys(s).length===i.length?Object(Qt.a)(s):pe.a))}(t._resolve,t,e,r).pipe(Object(ye.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),ur(t,n).resolve),null)))}(t.route,e,r,i)),Object(Ye.a)(()=>s++),Fe(1),Object(Me.a)(e=>s===n.length?Object(Qt.a)(t):pe.a))})),Object(Ye.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new sn(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Ye.a)(t=>{const e=new hn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),yi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),Object(ye.a)(t=>{const e=function(t,e,n){const r=gr(t,e._root,n?n._root:void 0);return new sr(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Ye.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(ye.a)(t=>(new Ar(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),Object(Ye.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new sn(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Je(i))),De(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Dr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new sn(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new on(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Sh){t.reject(Sh)}}var i;return pe.a}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Lr(t),this.config=t.map(Ur),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return vr(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new wr(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return xn(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new wr(n,e,r)}(n);if(s.toRoot())return vr(e.root,new Pn([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new Er(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Er(t,t===e.root,0)}const r=yr(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Er(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?Or(o.segmentGroup,o.index,s.commands):Sr(o.segmentGroup,o.index,s.commands);return vr(o.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Dr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Qv){e=this.malformedUriErrorHandler(Qv,this.urlSerializer,t)}return e}isActive(t,e){if(Dr(t))return kn(this.currentUrlTree,t,e);const n=this.parseUrl(t);return kn(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new rn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),o="imperative"!==e&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.N),r.Rb(Fn),r.Rb(Ei),r.Rb(w),r.Rb(r.s),r.Rb(r.x),r.Rb(r.i),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),xi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new Yt.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:ki(this.skipLocationChange),replaceUrl:ki(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ki(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ii),r.Kb(ar),r.Sb("tabindex"),r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Ub("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})(),Ai=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new Yt.a,this.subscription=t.events.subscribe(t=>{t instanceof rn&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:ki(this.skipLocationChange),replaceUrl:ki(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ki(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ii),r.Kb(ar),r.Kb(m))},t.\u0275dir=r.Fb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Ub("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Qb("href",e.href,r.ec),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function ki(t){return""===t||!!t}let Ni=(()=>{class t{constructor(t,e,n,i,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||vn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ji(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ei),r.Kb(r.Q),r.Kb(r.j),r.Sb("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ji{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===ar?this.route:t===Ei?this.childContexts:this.parent.get(t,e)}}class Di{}class Ri{preload(t,e){return Object(Qt.a)(null)}}let Pi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new _i(e,n,e=>t.triggerEvent(new dn(e)),e=>t.triggerEvent(new fn(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(ke(t=>t instanceof rn),Le(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Wt.a)(n).pipe(Object(de.a)(),Object(ye.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(Qt.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(Me.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ii),r.Rb(r.x),r.Rb(r.i),r.Rb(r.s),r.Rb(Di))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Mi=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof nn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof rn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof bn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new bn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ii),r.Rb(mt),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Li=new r.r("ROUTER_CONFIGURATION"),Fi=new r.r("ROUTER_FORROOT_GUARD"),Vi=[w,{provide:Fn,useClass:Vn},{provide:Ii,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new Ii(null,t,e,n,r,i,o,Tn(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Fn,Ei,w,r.s,r.x,r.i,vi,Li,[class{},new r.B],[class{},new r.B]]},Ei,{provide:ar,useFactory:function(t){return t.routerState.root},deps:[Ii]},{provide:r.x,useClass:r.K},Pi,Ri,class{preload(t,e){return e().pipe(De(()=>Object(Qt.a)(null)))}},{provide:Li,useValue:{enableTracing:!1}}];function Ui(){return new r.z("Router",Ii)}let qi=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Vi,Ki(e),{provide:Fi,useFactory:zi,deps:[[Ii,new r.B,new r.J]]},{provide:Li,useValue:n||{}},{provide:m,useFactory:Hi,deps:[a,[new r.p(b),new r.B],Li]},{provide:Mi,useFactory:Bi,deps:[Ii,mt,Li]},{provide:Di,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Ri},{provide:r.z,multi:!0,useFactory:Ui},[$i,{provide:r.d,multi:!0,useFactory:Gi,deps:[$i]},{provide:Qi,useFactory:Wi,deps:[$i]},{provide:r.b,multi:!0,useExisting:Qi}]]}}static forChild(e){return{ngModule:t,providers:[Ki(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Fi,8),r.Rb(Ii,8))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})();function Bi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Mi(t,e,n)}function Hi(t,e,n={}){return n.useHash?new _(t,e):new v(t,e)}function zi(t){return"guarded"}function Ki(t){return[{provide:r.a,multi:!0,useValue:t},{provide:vi,multi:!0,useValue:t}]}let $i=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Yt.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Ii),r=this.injector.get(Li);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(Qt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Li),n=this.injector.get(Pi),i=this.injector.get(Mi),s=this.injector.get(Ii),o=this.injector.get(r.g);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function Gi(t){return t.appInitializer.bind(t)}function Wi(t){return t.bootstrapListener.bind(t)}const Qi=new r.r("Router Initializer");var Yi=n("mrSG");class Zi{}class Xi{}class Ji{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ji?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Ji;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ji?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class ts{encodeKey(t){return es(t)}encodeValue(t){return es(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function es(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class ns{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new ts,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,s]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new ns({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function rs(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function is(t){return"undefined"!=typeof Blob&&t instanceof Blob}function ss(t){return"undefined"!=typeof FormData&&t instanceof FormData}class os{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Ji),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new ns,this.urlWithParams=e}serializeBody(){return null===this.body?null:rs(this.body)||is(this.body)||ss(this.body)||"string"==typeof this.body?this.body:this.body instanceof ns?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ss(this.body)?null:is(this.body)?this.body.type||null:rs(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ns?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,o=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new os(e,n,i,{params:u,headers:a,reportProgress:o,responseType:r,withCredentials:s})}}var as=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class us{constructor(t,e=200,n="OK"){this.headers=t.headers||new Ji,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class cs extends us{constructor(t={}){super(t),this.type=as.ResponseHeader}clone(t={}){return new cs({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ls extends us{constructor(t={}){super(t),this.type=as.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new ls({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class hs extends us{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function ds(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let fs=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof os)r=t;else{let i,s;i=n.headers instanceof Ji?n.headers:new Ji(n.headers),n.params&&(s=n.params instanceof ns?n.params:new ns({fromObject:n.params})),r=new os(t,e,void 0!==n.body?n.body:null,{headers:i,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Qt.a)(r).pipe(Le(t=>this.handler.handle(t)));if(t instanceof os||"events"===n.observe)return i;const s=i.pipe(ke(t=>t instanceof ls));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe(Object(ye.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return s.pipe(Object(ye.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return s.pipe(Object(ye.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return s.pipe(Object(ye.a)(t=>t.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new ns).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,ds(n,e))}post(t,e,n={}){return this.request("POST",t,ds(n,e))}put(t,e,n={}){return this.request("PUT",t,ds(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Zi))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class ps{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const gs=new r.r("HTTP_INTERCEPTORS");let ms=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const ys=/^\)\]\}',?\n/;class bs{}let vs=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_s=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new se.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",s=new Ji(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new cs({headers:s,status:e,statusText:r,url:o}),i},o=()=>{let{headers:r,status:i,statusText:o,url:a}=s(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(ys,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new ls({body:u,headers:r,status:i,statusText:o,url:a||void 0})),e.complete()):e.error(new hs({error:u,headers:r,status:i,statusText:o,url:a||void 0}))},a=t=>{const{url:r}=s(),i=new hs({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(s()),u=!0);let i={type:as.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:as.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:as.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(bs))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const ws=new r.r("XSRF_COOKIE_NAME"),Es=new r.r("XSRF_HEADER_NAME");class Ss{}let Os=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=st(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(o),r.Rb(r.C),r.Rb(ws))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Cs=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ss),r.Rb(Es))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Ts=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(gs,[]);this.chain=t.reduceRight((t,e)=>new ps(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Xi),r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Is=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Cs,useClass:ms}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:ws,useValue:e.cookieName}:[],e.headerName?{provide:Es,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[Cs,{provide:gs,useExisting:Cs,multi:!0},{provide:Ss,useClass:Os},{provide:ws,useValue:"XSRF-TOKEN"},{provide:Es,useValue:"X-XSRF-TOKEN"}]}),t})(),xs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[fs,{provide:Zi,useClass:Ts},_s,{provide:Xi,useExisting:_s},vs,{provide:bs,useExisting:vs}],imports:[[Is.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),As=(()=>{class t{constructor(t){this.http=t,this.API_URL="https://www.googleapis.com/youtube/v3",this.API_TOKEN="AIzaSyCjlJp-sLgC2vWtY5hqDPjaROEPLazn6cQ",this.resultsPerPage=8,this.fetchVideos=(t,e)=>{const n=`${this.API_URL}/playlistItems?key=${this.API_TOKEN}&part=snippet,contentDetails&maxResults=${this.resultsPerPage}${""!=e?`&pageToken=${e}`:""}`;return this.http.get(`${this.API_URL}/channels?key=${this.API_TOKEN}&part=contentDetails&id=${t}`).pipe(ve(t=>{const{items:e}=t;return e&&e.length>0?this.http.get(`${n}&playlistId=${e[0].contentDetails.relatedPlaylists.uploads}`).pipe(Object(ye.a)(t=>t)):Object(Qt.a)([])}))},this.searchVideos=(t,e,n)=>{const r=`${this.API_URL}/search?key=${this.API_TOKEN}&channelId=${t}&q=${encodeURI(e)}&part=snippet&maxResults=${this.resultsPerPage}${""!=n?`&pageToken=${n}`:""}`;return this.http.get(r).pipe(Object(ye.a)(t=>t))},this.getOneVideo=t=>this.http.get(`${this.API_URL}/videos?key=${this.API_TOKEN}&part=snippet,contentDetails,statistics&id=${t}`).pipe(Object(ye.a)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(fs))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ks=n("D0XW");function Ns(){return t=>t.lift(new js)}class js{call(t,e){return e.subscribe(new Ds(t))}}class Ds extends ee.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class Rs{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ps(t,this.compare,this.keySelector))}}class Ps extends ee.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Ms=n("pxpQ"),Ls=n("spgP"),Fs=n("Jgta"),Vs=n("zIRd"),Us=n("qOnz"),qs=n("q/0M"),Bs=function(t,e){return(Bs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Hs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var zs,Ks="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},$s=$s||{},Gs=Ks||self;function Ws(){}function Qs(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ys(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Zs="closure_uid_"+(1e9*Math.random()>>>0),Xs=0;function Js(t,e,n){return t.call.apply(t.bind,arguments)}function to(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function eo(t,e,n){return(eo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Js:to).apply(null,arguments)}function no(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ro(){return Date.now()}function io(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function so(){this.j=this.j,this.i=this.i}so.prototype.j=!1,so.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Zs)&&t[Zs]||(t[Zs]=++Xs)}(this)},so.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var oo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ao=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function uo(t){return Array.prototype.concat.apply([],arguments)}function co(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function lo(t){return/^[\s\xa0]*$/.test(t)}var ho,fo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function po(t,e){return-1!=t.indexOf(e)}function go(t,e){return t<e?-1:t>e?1:0}t:{var mo=Gs.navigator;if(mo){var yo=mo.userAgent;if(yo){ho=yo;break t}}ho=""}function bo(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function vo(t){var e={};for(var n in t)e[n]=t[n];return e}var _o="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wo(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<_o.length;s++)n=_o[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Eo(t){return Eo[" "](t),t}Eo[" "]=Ws;var So,Oo,Co=po(ho,"Opera"),To=po(ho,"Trident")||po(ho,"MSIE"),Io=po(ho,"Edge"),xo=Io||To,Ao=po(ho,"Gecko")&&!(po(ho.toLowerCase(),"webkit")&&!po(ho,"Edge"))&&!(po(ho,"Trident")||po(ho,"MSIE"))&&!po(ho,"Edge"),ko=po(ho.toLowerCase(),"webkit")&&!po(ho,"Edge");function No(){var t=Gs.document;return t?t.documentMode:void 0}t:{var jo="",Do=(Oo=ho,Ao?/rv:([^\);]+)(\)|;)/.exec(Oo):Io?/Edge\/([\d\.]+)/.exec(Oo):To?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Oo):ko?/WebKit\/(\S+)/.exec(Oo):Co?/(?:Version)[ \/]?(\S+)/.exec(Oo):void 0);if(Do&&(jo=Do?Do[1]:""),To){var Ro=No();if(null!=Ro&&Ro>parseFloat(jo)){So=String(Ro);break t}}So=jo}var Po={};function Mo(t){return function(t,e){var n=Po;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=fo(String(So)).split("."),r=fo(String(t)).split("."),i=Math.max(n.length,r.length),s=0;0==e&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=go(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||go(0==o[2].length,0==a[2].length)||go(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e})}var Lo=Gs.document&&To&&(No()||parseInt(So,10))||void 0,Fo=!To||9<=Number(Lo),Vo=To&&!Mo("9"),Uo=function(){if(!Gs.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Gs.addEventListener("test",Ws,e),Gs.removeEventListener("test",Ws,e)}catch(n){}return t}();function qo(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Bo(t,e){if(qo.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ao){t:{try{Eo(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ho[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}qo.prototype.b=function(){this.defaultPrevented=!0},io(Bo,qo);var Ho={2:"touch",3:"pen",4:"mouse"};Bo.prototype.b=function(){Bo.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Vo)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var zo="closure_listenable_"+(1e6*Math.random()|0),Ko=0;function $o(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Ko,this.Y=this.Z=!1}function Go(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Wo(t){this.src=t,this.a={},this.b=0}function Qo(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],s=oo(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Go(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Yo(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.Y&&s.listener==e&&s.capture==!!n&&s.ca==r)return i}return-1}Wo.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.a[s])||(t=this.a[s]=[],this.b++);var o=Yo(t,e,r,i);return-1<o?(e=t[o],n||(e.Z=!1)):((e=new $o(e,this.src,s,!!r,i)).Z=n,t.push(e)),e};var Zo="closure_lm_"+(1e6*Math.random()|0),Xo={};function Jo(t,e,n,r,i){if(r&&r.once)return ea(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Jo(t,e[s],n,r,i);return null}return n=ca(n),t&&t[zo]?t.va(e,n,Ys(r)?!!r.capture:!!r,i):ta(t,e,n,!1,r,i)}function ta(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Ys(i)?!!i.capture:!!i;if(o&&!Fo)return null;var a=aa(t);if(a||(t[Zo]=a=new Wo(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=oa,e=Fo?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Uo||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ia(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ea(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ea(t,e[s],n,r,i);return null}return n=ca(n),t&&t[zo]?t.wa(e,n,Ys(r)?!!r.capture:!!r,i):ta(t,e,n,!0,r,i)}function na(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)na(t,e[s],n,r,i);else r=Ys(r)?!!r.capture:!!r,n=ca(n),t&&t[zo]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Yo(s=t.a[e],n,r,i))&&(Go(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.a[e],t.b--))):t&&(t=aa(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Yo(e,n,r,i)),(n=-1<t?e[t]:null)&&ra(n))}function ra(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[zo])Qo(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ia(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=aa(e))?(Qo(n,t),0==n.b&&(n.src=null,e[Zo]=null)):Go(t)}}}function ia(t){return t in Xo?Xo[t]:Xo[t]="on"+t}function sa(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ra(t),n.call(r,e)}function oa(t,e){if(t.Y)return!0;if(!Fo){if(!e)t:{e=["window","event"];for(var n=Gs,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return sa(t,e=new Bo(e,this))}return sa(t,new Bo(e,this))}function aa(t){return(t=t[Zo])instanceof Wo?t:null}var ua="__closure_events_fn_"+(1e9*Math.random()>>>0);function ca(t){return"function"==typeof t?t:(t[ua]||(t[ua]=function(e){return t.handleEvent(e)}),t[ua])}function la(){so.call(this),this.c=new Wo(this),this.J=this,this.C=null}function ha(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new qo(e,t);else if(e instanceof qo)e.target=e.target||t;else{var i=e;wo(e=new qo(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.a=n[s];i=da(o,r,!0,e)&&i}if(i=da(o=e.a=t,r,!0,e)&&i,i=da(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=da(o=e.a=n[s],r,!1,e)&&i}function da(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.Y&&o.capture==n){var a=o.listener,u=o.ca||o.src;o.Z&&Qo(t.c,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}io(la,so),la.prototype[zo]=!0,(zs=la.prototype).addEventListener=function(t,e,n,r){Jo(this,t,e,n,r)},zs.removeEventListener=function(t,e,n,r){na(this,t,e,n,r)},zs.G=function(){if(la.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Go(n[r]);delete e.a[t],e.b--}}this.C=null},zs.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},zs.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var fa=Gs.JSON.stringify;function pa(){this.b=this.a=null}var ga,ma=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ba},function(t){t.reset()});function ya(){var t=Ea,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ba(){this.next=this.b=this.a=null}function va(t){Gs.setTimeout(function(){throw t},0)}function _a(t,e){ga||function(){var t=Gs.Promise.resolve(void 0);ga=function(){t.then(Sa)}}(),wa||(ga(),wa=!0),Ea.add(t,e)}pa.prototype.add=function(t,e){var n=ma.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ba.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ba.prototype.reset=function(){this.next=this.b=this.a=null};var wa=!1,Ea=new pa;function Sa(){for(var t;t=ya();){try{t.a.call(t.b)}catch(n){va(n)}var e=ma;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}wa=!1}function Oa(t,e){la.call(this),this.b=t||1,this.a=e||Gs,this.f=eo(this.Za,this),this.g=ro()}function Ca(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ta(t,e,n){if("function"==typeof t)n&&(t=eo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=eo(t.handleEvent,t)}return 2147483647<Number(e)?-1:Gs.setTimeout(t,e||0)}function Ia(t){t.a=Ta(function(){t.a=null,t.c&&(t.c=!1,Ia(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}io(Oa,la),(zs=Oa.prototype).aa=!1,zs.M=null,zs.Za=function(){if(this.aa){var t=ro()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ha(this,"tick"),this.aa&&(Ca(this),this.start()))}},zs.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=ro())},zs.G=function(){Oa.X.G.call(this),Ca(this),delete this.a};var xa=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Bs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ia(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Gs.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(so);function Aa(t){so.call(this),this.b=t,this.a={}}io(Aa,so);var ka=[];function Na(t,e,n,r){Array.isArray(n)||(n&&(ka[0]=n.toString()),n=ka);for(var i=0;i<n.length;i++){var s=Jo(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function ja(t){bo(t.a,function(t,e){this.a.hasOwnProperty(e)&&ra(t)},t),t.a={}}function Da(){this.a=!0}function Ra(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return fa(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Aa.prototype.G=function(){Aa.X.G.call(this),ja(this)},Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Da.prototype.info=function(){};var Pa={},Ma=null;function La(){return Ma=Ma||new la}function Fa(t){qo.call(this,Pa.Fa,t)}function Va(t){var e=La();ha(e,new Fa(e,t))}function Ua(t,e){qo.call(this,Pa.STAT_EVENT,t),this.stat=e}function qa(t){var e=La();ha(e,new Ua(e,t))}function Ba(t){qo.call(this,Pa.Ga,t)}function Ha(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Gs.setTimeout(function(){t()},e)}Pa.Fa="serverreachability",io(Fa,qo),Pa.STAT_EVENT="statevent",io(Ua,qo),Pa.Ga="timingevent",io(Ba,qo);var za={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ka={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function $a(){}function Ga(){}$a.prototype.a=null;var Wa,Qa={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ya(){qo.call(this,"d")}function Za(){qo.call(this,"c")}function Xa(){}function Ja(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Aa(this),this.P=tu,this.R=new Oa(t=xo?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}io(Ya,qo),io(Za,qo),io(Xa,$a),Wa=new Xa;var tu=45e3,eu={},nu={};function ru(t,e,n){t.H=1,t.i=Cu(vu(e)),t.j=n,t.I=!0,iu(t,null)}function iu(t,e){t.u=ro(),au(t),t.l=vu(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Fu(n.b,"t",r),t.D=0,t.a=jc(t.g,t.g.C?e:null),0<t.O&&(t.F=new xa(eo(t.Ca,t,t.a),t.O)),Na(t.J,t.a,"readystatechange",t.Xa),e=t.B?vo(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Va(1),function(t,e,n,r,i,s){t.info(function(){if(t.a)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.c,t.m,t.l,t.f,t.S,t.j)}function su(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ou(t,n);if(i==nu){4==e&&(t.h=4,qa(14),r=!1),Ra(t.c,t.f,null,"[Incomplete Response]");break}if(i==eu){t.h=4,qa(15),Ra(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Ra(t.c,t.f,i,null),du(t,i)}4==e&&0==n.length&&(t.h=1,qa(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Oc(e),e.F=!0,qa(11))):(Ra(t.c,t.f,n,"[Invalid Chunked Response]"),hu(t),lu(t))}function ou(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?nu:(n=Number(e.substring(n,r)),isNaN(n)?eu:(r+=1)+n>e.length?nu:(e=e.substr(r,n),t.D=r+n,e))}function au(t){t.T=ro()+t.P,uu(t,t.P)}function uu(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ha(eo(t.Va,t),e)}function cu(t){t.o&&(Gs.clearTimeout(t.o),t.o=null)}function lu(t){0==t.g.v||t.A||Ic(t.g,t)}function hu(t){cu(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ca(t.R),ja(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function du(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Ku(n.b,t)))if(n.I=t.N,!t.C&&Ku(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(pv){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Tc(n),gc(n)}Sc(n),qa(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ha(eo(n.Sa,n),6e3));if(1>=zu(n.b)&&n.ea){try{n.ea()}catch(pv){}n.ea=void 0}}else Ac(n,11)}else if((t.C||n.a==t)&&Tc(n),!lo(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var s=i[3];null!=s&&(n.ha=s,n.c.info("VER="+n.ha));var o=i[4];null!=o&&(n.pa=o,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(po(l,"spdy")||po(l,"quic")||po(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&($u(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,Ou(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=ro()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=Nc(u,u.C?u.ga:null,u.fa),f.C){Gu(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(cu(p),au(p)),u.a=f}else Ec(u);0<n.g.length&&bc(n)}else"stop"!=i[0]&&"close"!=i[0]||Ac(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Ac(n,7):pc(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Va(4)}catch(pv){}}function fu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Qs(t)||"string"==typeof t)ao(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Qs(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Qs(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function pu(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof pu)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function gu(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];mu(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)mu(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function mu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(zs=Ja.prototype).setTimeout=function(t){this.P=t},zs.Xa=function(t){t=t.target;var e=this.F;e&&3==lc(t)?e.f():this.Ca(t)},zs.Ca=function(t){try{if(t==this.a)t:{var e=lc(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!xo&&!this.a.$())){this.A||4!=e||7==n||Va(8==n||0>=r?3:2),cu(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=200==i,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lo(o)){var u=o;break e}}u=null}if(!u){this.b=!1,this.h=3,qa(12),hu(this),lu(this);break t}Ra(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,du(this,u)}this.I?(su(this,e,s),xo&&this.b&&3==e&&(Na(this.J,this.R,"tick",this.Wa),this.R.start())):(Ra(this.c,this.f,s,null),du(this,s)),4==e&&hu(this),this.b&&!this.A&&(4==e?Ic(this.g,this):(this.b=!1,au(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.h=3,qa(12)):(this.h=0,qa(13)),hu(this),lu(this)}}}catch(c){}},zs.Wa=function(){if(this.a){var t=lc(this.a),e=this.a.$();this.D<e.length&&(cu(this),su(this,t,e),this.b&&4!=t&&au(this))}},zs.cancel=function(){this.A=!0,hu(this)},zs.Va=function(){this.o=null;var t=ro();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Va(3),qa(17)),hu(this),this.h=2,lu(this)):uu(this,this.T-t)},(zs=pu.prototype).K=function(){gu(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},zs.L=function(){return gu(this),this.a.concat()},zs.get=function(t,e){return mu(this.b,t)?this.b[t]:e},zs.set=function(t,e){mu(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},zs.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var yu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bu(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof bu){this.a=void 0!==e?e:t.a,_u(this,t.f),this.j=t.j,wu(this,t.c),Eu(this,t.h),this.g=t.g,e=t.b;var n=new Ru;n.c=e.c,e.a&&(n.a=new pu(e.a),n.b=e.b),Su(this,n),this.i=t.i}else t&&(n=String(t).match(yu))?(this.a=!!e,_u(this,n[1]||"",!0),this.j=Tu(n[2]||""),wu(this,n[3]||"",!0),Eu(this,n[4]),this.g=Tu(n[5]||"",!0),Su(this,n[6]||"",!0),this.i=Tu(n[7]||"")):(this.a=!!e,this.b=new Ru(null,this.a))}function vu(t){return new bu(t)}function _u(t,e,n){t.f=n?Tu(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function wu(t,e,n){t.c=n?Tu(e,!0):e}function Eu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Su(t,e,n){e instanceof Ru?(t.b=e,function(t,e){e&&!t.f&&(Pu(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Mu(this,e),Fu(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Iu(e,ju)),t.b=new Ru(e,t.a))}function Ou(t,e,n){t.b.set(e,n)}function Cu(t){return Ou(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ro()).toString(36)),t}function Tu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Iu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,xu),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xu(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}bu.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Iu(e,Au,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Iu(e,Au,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Iu(n,"/"==n.charAt(0)?Nu:ku,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Iu(n,Du)),t.join("")};var Au=/[#\/\?@]/g,ku=/[#\?:]/g,Nu=/[#\?]/g,ju=/[#\?@]/g,Du=/#/g;function Ru(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Pu(t){t.a||(t.a=new pu,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Mu(t,e){Pu(t),e=Vu(t,e),mu(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,mu((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&gu(t)))}function Lu(t,e){return Pu(t),e=Vu(t,e),mu(t.a.b,e)}function Fu(t,e,n){Mu(t,e),0<n.length&&(t.c=null,t.a.set(Vu(t,e),co(n)),t.b+=n.length)}function Vu(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(zs=Ru.prototype).add=function(t,e){Pu(this),this.c=null,t=Vu(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},zs.forEach=function(t,e){Pu(this),this.a.forEach(function(n,r){ao(n,function(n){t.call(e,n,r,this)},this)},this)},zs.L=function(){Pu(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},zs.K=function(t){Pu(this);var e=[];if("string"==typeof t)Lu(this,t)&&(e=uo(e,this.a.get(Vu(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=uo(e,t[n])}return e},zs.set=function(t,e){return Pu(this),this.c=null,Lu(this,t=Vu(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},zs.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},zs.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")};var Uu=function(){return function(t,e){this.b=t,this.a=e}}();function qu(t){this.g=t||Bu,t=Gs.PerformanceNavigationTiming?0<(t=Gs.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Gs.ia&&Gs.ia.ya&&Gs.ia.ya()&&Gs.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Bu=10;function Hu(t){return!!t.b||!!t.a&&t.a.size>=t.f}function zu(t){return t.b?1:t.a?t.a.size:0}function Ku(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function $u(t,e){t.a?t.a.add(e):t.b=e}function Gu(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Wu(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Hs(t.a.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.s)}catch(o){e={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return co(t.c)}function Qu(){}function Yu(){this.a=new Qu}function Zu(t,e,n){var r=n||"";try{fu(t,function(t,n){var i=t;Ys(t)&&(i=fa(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Qv){throw e.push(r+"type="+encodeURIComponent("_badmap")),Qv}}function Xu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}qu.prototype.cancel=function(){var t,e;if(this.c=Wu(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Hs(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Qu.prototype.stringify=function(t){return Gs.JSON.stringify(t,void 0)},Qu.prototype.parse=function(t){return Gs.JSON.parse(t,void 0)};var Ju=Gs.JSON.parse;function tc(t){la.call(this),this.headers=new pu,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=ec,this.D=this.F=!1}io(tc,la);var ec="",nc=/^https?$/i,rc=["POST","PUT"];function ic(t){return"content-type"==t.toLowerCase()}function sc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,oc(t),uc(t)}function oc(t){t.u||(t.u=!0,ha(t,"complete"),ha(t,"error"))}function ac(t){if(t.b&&void 0!==$s&&(!t.s[1]||4!=lc(t)||2!=t.W()))if(t.l&&4==lc(t))Ta(t.za,0,t);else if(ha(t,"readystatechange"),4==lc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.B).match(yu)[1]||null;if(!s&&Gs.self&&Gs.self.location){var o=Gs.self.location.protocol;s=o.substr(0,o.length-1)}i=!nc.test(s?s.toLowerCase():"")}e=i}if(e)ha(t,"complete"),ha(t,"success");else{t.h=6;try{var a=2<lc(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",oc(t)}}finally{uc(t)}}}function uc(t,e){if(t.a){cc(t);var n=t.a,r=t.s[0]?Ws:null;t.a=null,t.s=null,e||ha(t,"ready");try{n.onreadystatechange=r}catch(Qv){}}}function cc(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Gs.clearTimeout(t.m),t.m=null)}function lc(t){return t.a?t.a.readyState:0}function hc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return bo(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ou(t,e,n))}function dc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function fc(t){this.pa=0,this.g=[],this.c=new Da,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=dc("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=dc("baseRetryDelayMs",5e3,t),this.Ra=dc("retryDelaySeedMs",1e4,t),this.Ma=dc("forwardChannelMaxRetries",2,t),this.ma=dc("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new qu(t&&t.concurrentRequestLimit),this.ka=new Yu,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function pc(t){if(mc(t),3==t.v){var e=t.R++,n=vu(t.B);Ou(n,"SID",t.J),Ou(n,"RID",e),Ou(n,"TYPE","terminate"),_c(t,n),(e=new Ja(t,t.c,e,void 0)).H=2,e.i=Cu(vu(n)),n=!1,Gs.navigator&&Gs.navigator.sendBeacon&&(n=Gs.navigator.sendBeacon(e.i.toString(),"")),!n&&Gs.Image&&((new Image).src=e.i,n=!0),n||(e.a=jc(e.g,null),e.a.ba(e.i)),e.u=ro(),au(e)}kc(t)}function gc(t){t.a&&(Oc(t),t.a.cancel(),t.a=null)}function mc(t){gc(t),t.j&&(Gs.clearTimeout(t.j),t.j=null),Tc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Gs.clearTimeout(t.h),t.h=null)}function yc(t,e){t.g.push(new Uu(t.Oa++,e)),3==t.v&&bc(t)}function bc(t){Hu(t.b)||t.h||(t.h=!0,_a(t.Ba,t),t.u=0)}function vc(t,e){var n;n=e?e.f:t.R++;var r=vu(t.B);Ou(r,"SID",t.J),Ou(r,"RID",n),Ou(r,"AID",t.P),_c(t,r),t.i&&t.l&&hc(r,t.i,t.l),n=new Ja(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=wc(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),$u(t.b,n),ru(n,r,e)}function _c(t,e){t.f&&fu({},function(t,n){Ou(e,n,t)})}function wc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?eo(t.f.Ja,t.f,t):null;t:for(var i=t.g,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].b)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=s))s=Math.max(0,i[u].b-100),a=!1;else try{Zu(l,o,"req"+c+"_")}catch(cl){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Ec(t){t.a||t.j||(t.T=1,_a(t.Aa,t),t.o=0)}function Sc(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ha(eo(t.Aa,t),xc(t,t.o)),t.o++,0))}function Oc(t){null!=t.s&&(Gs.clearTimeout(t.s),t.s=null)}function Cc(t){t.a=new Ja(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=vu(t.la);Ou(e,"RID","rpc"),Ou(e,"SID",t.J),Ou(e,"CI",t.H?"0":"1"),Ou(e,"AID",t.P),_c(t,e),Ou(e,"TYPE","xmlhttp"),t.i&&t.l&&hc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Cu(vu(e)),n.j=null,n.I=!0,iu(n,t)}function Tc(t){null!=t.m&&(Gs.clearTimeout(t.m),t.m=null)}function Ic(t,e){var n=null;if(t.a==e){Tc(t),Oc(t),t.a=null;var r=2}else{if(!Ku(t.b,e))return;n=e.s,Gu(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=ro()-e.u;var i=t.u;ha(r=La(),new Ba(r,n,e,i)),bc(t)}else Ec(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(zu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ha(eo(t.Ba,t,e),xc(t,t.u)),t.u++,0)))}(t,e)||2==r&&Sc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Ac(t,5);break;case 4:Ac(t,10);break;case 3:Ac(t,6);break;default:Ac(t,2)}}function xc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Ac(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=eo(t.Ya,t);n||(n=new bu("//www.google.com/images/cleardot.gif"),Gs.location&&"http"==Gs.location.protocol||_u(n,"https"),Cu(n)),function(t,e){var n=new Da;if(Gs.Image){var r=new Image;r.onload=no(Xu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=no(Xu,n,r,"TestLoadImage: error",!1,e),r.onabort=no(Xu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=no(Xu,n,r,"TestLoadImage: timeout",!1,e),Gs.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else qa(2);t.v=0,t.f&&t.f.ra(e),kc(t),mc(t)}function kc(t){t.v=0,t.I=-1,t.f&&(0==Wu(t.b).length&&0==t.g.length||(t.b.c.length=0,co(t.g),t.g.length=0),t.f.qa())}function Nc(t,e,n){var r=function(t){return t instanceof bu?vu(t):new bu(t,void 0)}(n);if(""!=r.c)e&&wu(r,e+"."+r.c),Eu(r,r.h);else{var i=Gs.location;r=function(t,e,n,r){var i=new bu(null,void 0);return t&&_u(i,t),e&&wu(i,e),n&&Eu(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&bo(t.V,function(t,e){Ou(r,e,t)}),n=t.na,(e=t.A)&&n&&Ou(r,e,n),Ou(r,"VER",t.ha),_c(t,r),r}function jc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new tc(t.Na)).F=t.C,e}function Dc(){}function Rc(){if(To&&!(10<=Number(Lo)))throw Error("Environmental error: no available transport.")}function Pc(t,e){la.call(this),this.a=new fc(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!lo(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!lo(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Fc(this)}function Mc(t){Ya.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Lc(){Za.call(this),this.status=1}function Fc(t){this.a=t}(zs=tc.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Wa),this.a.onreadystatechange=eo(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(s){return void sc(this,s)}t=n||"";var i=new pu(this.headers);r&&fu(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=ic,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Gs.FormData&&t instanceof Gs.FormData,!(0<=oo(rc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{cc(this),0<this.o&&((this.D=function(t){return To&&Mo(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=eo(this.xa,this)):this.m=Ta(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(s){sc(this,s)}},zs.xa=function(){void 0!==$s&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ha(this,"timeout"),this.abort(8))},zs.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ha(this,"complete"),ha(this,"abort"),uc(this))},zs.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),uc(this,!0)),tc.X.G.call(this)},zs.za=function(){this.j||(this.A||this.l||this.g?ac(this):this.Ua())},zs.Ua=function(){ac(this)},zs.W=function(){try{return 2<lc(this)?this.a.status:-1}catch(Oo){return-1}},zs.$=function(){try{return this.a?this.a.responseText:""}catch(Oo){return""}},zs.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ju(e)}},zs.ua=function(){return this.h},zs.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(zs=fc.prototype).ha=8,zs.v=1,zs.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ja(this,this.c,t,void 0),r=this.l;if(this.O&&(r?wo(r=vo(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var s=this.g[i];if(void 0===(s="__data__"in s.a&&"string"==typeof(s=s.a.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=wc(this,n,e),Ou(i=vu(this.B),"RID",t),Ou(i,"CVER",22),this.A&&Ou(i,"X-HTTP-Session-Id",this.A),_c(this,i),this.i&&r&&hc(i,this.i,r),$u(this.b,n),this.Ia&&Ou(i,"TYPE","init"),this.da?(Ou(i,"$req",e),Ou(i,"SID","null"),n.U=!0,ru(n,i,null)):ru(n,i,e),this.v=2}}else 3==this.v&&(t?vc(this,t):0==this.g.length||Hu(this.b)||vc(this))},zs.Aa=function(){if(this.j=null,Cc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ha(eo(this.Ta,this),t)}},zs.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,qa(10),gc(this),Cc(this))},zs.Sa=function(){null!=this.m&&(this.m=null,gc(this),Sc(this),qa(19))},zs.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),qa(2)):(this.c.info("Failed to ping google.com"),qa(1))},(zs=Dc.prototype).ta=function(){},zs.sa=function(){},zs.ra=function(){},zs.qa=function(){},zs.Ja=function(){},Rc.prototype.a=function(t,e){return new Pc(t,e)},io(Pc,la),Pc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;qa(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Nc(t,null,t.fa),bc(t)},Pc.prototype.close=function(){pc(this.a)},Pc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,yc(this.a,e)}else this.l?((e={}).__data__=fa(t),yc(this.a,e)):yc(this.a,t)},Pc.prototype.G=function(){this.a.f=null,delete this.f,pc(this.a),delete this.a,Pc.X.G.call(this)},io(Mc,Ya),io(Lc,Za),io(Fc,Dc),Fc.prototype.ta=function(){ha(this.a,"a")},Fc.prototype.sa=function(t){ha(this.a,new Mc(t))},Fc.prototype.ra=function(t){ha(this.a,new Lc(t))},Fc.prototype.qa=function(){ha(this.a,"b")},Rc.prototype.createWebChannel=Rc.prototype.a,Pc.prototype.send=Pc.prototype.h,Pc.prototype.open=Pc.prototype.g,Pc.prototype.close=Pc.prototype.close,za.NO_ERROR=0,za.TIMEOUT=8,za.HTTP_ERROR=6,Ka.COMPLETE="complete",Ga.EventType=Qa,Qa.OPEN="a",Qa.CLOSE="b",Qa.ERROR="c",Qa.MESSAGE="d",la.prototype.listen=la.prototype.va,tc.prototype.listenOnce=tc.prototype.wa,tc.prototype.getLastError=tc.prototype.Qa,tc.prototype.getLastErrorCode=tc.prototype.ua,tc.prototype.getStatus=tc.prototype.W,tc.prototype.getResponseJson=tc.prototype.Pa,tc.prototype.getResponseText=tc.prototype.$,tc.prototype.send=tc.prototype.ba;var Vc=za,Uc=Ka,qc=Pa,Bc=Ga,Hc=tc,zc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();zc.o=-1;var Kc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$c=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Yi.c)(e,t),e}(Error),Gc=new qs.b("@firebase/firestore");function Wc(){return Gc.logLevel}function Qc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gc.logLevel<=qs.a.DEBUG){var r=e.map(Xc);Gc.debug.apply(Gc,Object(Yi.f)(["Firestore (8.4.2): "+t],r))}}function Yc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gc.logLevel<=qs.a.ERROR){var r=e.map(Xc);Gc.error.apply(Gc,Object(Yi.f)(["Firestore (8.4.2): "+t],r))}}function Zc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gc.logLevel<=qs.a.WARN){var r=e.map(Xc);Gc.warn.apply(Gc,Object(Yi.f)(["Firestore (8.4.2): "+t],r))}}function Xc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Qv){return t}}function Jc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.4.2) INTERNAL ASSERTION FAILED: "+t;throw Yc(e),new Error(e)}function tl(t,e){t||Jc()}function el(t,e){return t}function nl(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var rl=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=nl(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function il(t,e){return t<e?-1:t>e?1:0}function sl(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function ol(t){return t+"\0"}var al=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new $c(Kc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new $c(Kc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new $c(Kc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new $c(Kc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?il(this.nanoseconds,t.nanoseconds):il(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ul=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new al(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function cl(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ll(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var dl=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Jc(),void 0===n?n=t.length-e:n>t.length-e&&Jc(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),fl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Yi.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,s=t;i<s.length;i++){var o=s[i];if(o.indexOf("//")>=0)throw new $c(Kc.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(dl),pl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Yi.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return pl.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new $c(Kc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new $c(Kc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new $c(Kc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new $c(Kc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(dl),ml=function(){function t(t){this.fields=t,t.sort(gl.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return sl(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),yl=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return il(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();yl.EMPTY_BYTE_STRING=new yl("");var bl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vl(t){if(tl(!!t),"string"==typeof t){var e=0,n=bl.exec(t);if(tl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_l(t.seconds),nanos:_l(t.nanos)}}function _l(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function wl(t){return"string"==typeof t?yl.fromBase64String(t):yl.fromUint8Array(t)}function El(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sl(t){var e=t.mapValue.fields.__previous_value__;return El(e)?Sl(e):e}function Ol(t){var e=vl(t.mapValue.fields.__local_write_time__.timestampValue);return new al(e.seconds,e.nanos)}function Cl(t){return null==t}function Tl(t){return 0===t&&1/t==-1/0}function Il(t){return"number"==typeof t&&Number.isInteger(t)&&!Tl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var xl=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(fl.fromString(e))},t.fromName=function(e){return new t(fl.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===fl.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return fl.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new fl(e.slice()))},t}();function Al(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?El(t)?4:10:Jc()}function kl(t,e){var n=Al(t);if(n!==Al(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ol(t).isEqual(Ol(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=vl(t.timestampValue),r=vl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return wl(t.bytesValue).isEqual(wl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return _l(t.geoPointValue.latitude)===_l(e.geoPointValue.latitude)&&_l(t.geoPointValue.longitude)===_l(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return _l(t.integerValue)===_l(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=_l(t.doubleValue),r=_l(e.doubleValue);return n===r?Tl(n)===Tl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return sl(t.arrayValue.values||[],e.arrayValue.values||[],kl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(cl(n)!==cl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!kl(n[i],r[i])))return!1;return!0}(t,e);default:return Jc()}}function Nl(t,e){return void 0!==(t.values||[]).find(function(t){return kl(t,e)})}function jl(t,e){var n=Al(t),r=Al(e);if(n!==r)return il(n,r);switch(n){case 0:return 0;case 1:return il(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=_l(t.integerValue||t.doubleValue),r=_l(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Dl(t.timestampValue,e.timestampValue);case 4:return Dl(Ol(t),Ol(e));case 5:return il(t.stringValue,e.stringValue);case 6:return function(t,e){var n=wl(t),r=wl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var s=il(n[i],r[i]);if(0!==s)return s}return il(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=il(_l(t.latitude),_l(e.latitude));return 0!==n?n:il(_l(t.longitude),_l(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var s=jl(n[i],r[i]);if(s)return s}return il(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(var o=0;o<r.length&&o<s.length;++o){var a=il(r[o],s[o]);if(0!==a)return a;var u=jl(n[r[o]],i[s[o]]);if(0!==u)return u}return il(r.length,s.length)}(t.mapValue,e.mapValue);default:throw Jc()}}function Dl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return il(t,e);var n=vl(t),r=vl(e),i=il(n.seconds,r.seconds);return 0!==i?i:il(n.nanos,r.nanos)}function Rl(t){return Pl(t)}function Pl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=vl(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?wl(t.bytesValue).toBase64():"referenceValue"in t?xl.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Pl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var s=i[r];n?n=!1:e+=",",e+=s+":"+Pl(t.fields[s])}return e+"}"}(t.mapValue):Jc();var e}function Ml(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Ll(t){return!!t&&"integerValue"in t}function Fl(t){return!!t&&"arrayValue"in t}function Vl(t){return!!t&&"nullValue"in t}function Ul(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ql(t){return!!t&&"mapValue"in t}var Bl=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(gl.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return kl(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),s=n.get(i);s instanceof Map?n=s:s&&10===Al(s)?(s=new Map(Object.entries(s.mapValue.fields||{})),n.set(i,s),n=s):(s=new Map,n.set(i,s),n=s)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,s=t.extractNestedValue(this.partialValue,e),o=ql(s)?Object.assign({},s.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var s=r.applyOverlay(e.child(n),t);null!=s&&(o[n]=s,i=!0)}else null!==t?(o[n]=t,i=!0):o.hasOwnProperty(n)&&(delete o[n],i=!0)}),i?{mapValue:{fields:o}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(gl.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!ql(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Hl(t){var e=[];return ll(t.fields||{},function(t,n){var r=new gl([t]);if(ql(n)){var i=Hl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var s=0,o=i;s<o.length;s++)e.push(r.child(o[s]))}else e.push(r)}),new ml(e)}var zl=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,ul.min(),Bl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Bl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Bl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Bl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Bl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Kl=function(t,e,n,r,i,s,o){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.h=null};function $l(t,e,n,r,i,s,o){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new Kl(t,e,n,r,i,s,o)}function Gl(t){var e=el(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Rl(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Cl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=oh(e.startAt)),e.endAt&&(n+="|ub:",n+=oh(e.endAt)),e.h=n}return e.h}function Wl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!uh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(s=e.filters[r]).op||!i.field.isEqual(s.field)||!kl(i.value,s.value))return!1;var i,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lh(t.startAt,e.startAt)&&lh(t.endAt,e.endAt)}function Ql(t){return xl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Yl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Yi.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Zl(t,n,r):"array-contains"===n?new eh(t,r):"in"===n?new nh(t,r):"not-in"===n?new rh(t,r):"array-contains-any"===n?new ih(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Xl(t,n):new Jl(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(jl(e,this.value)):null!==e&&Al(this.value)===Al(e)&&this.m(jl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Jc()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Zl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=xl.fromName(r.referenceValue),i}return Object(Yi.c)(e,t),e.prototype.matches=function(t){var e=xl.comparator(t.key,this.key);return this.m(e)},e}(Yl),Xl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=th(0,n),r}return Object(Yi.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Yl),Jl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=th(0,n),r}return Object(Yi.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Yl);function th(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return xl.fromName(t.referenceValue)})}var eh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Yi.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Fl(e)&&Nl(e.arrayValue,this.value)},e}(Yl),nh=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Yi.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Nl(this.value.arrayValue,e)},e}(Yl),rh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Yi.c)(e,t),e.prototype.matches=function(t){if(Nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Nl(this.value.arrayValue,e)},e}(Yl),ih=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Yi.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Fl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Nl(e.value.arrayValue,t)})},e}(Yl),sh=function(t,e){this.position=t,this.before=e};function oh(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Rl(t)}).join(",")}var ah=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function uh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ch(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var s=e[i],o=t.position[i];if(r=s.field.isKeyField()?xl.comparator(xl.fromName(o.referenceValue),n.key):jl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function lh(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!kl(t.position[n],e.position[n]))return!1;return!0}var hh=function(t,e,n,r,i,s,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.p=null,this.T=null};function dh(t,e,n,r,i,s,o,a){return new hh(t,e,n,r,i,s,o,a)}function fh(t){return new hh(t)}function ph(t){return!Cl(t.limit)&&"F"===t.limitType}function gh(t){return!Cl(t.limit)&&"L"===t.limitType}function mh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function yh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function bh(t){return null!==t.collectionGroup}function vh(t){var e=el(t);if(null===e.p){e.p=[];var n=yh(e),r=mh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ah(n)),e.p.push(new ah(gl.keyField(),"asc"));else{for(var i=!1,s=0,o=e.explicitOrderBy;s<o.length;s++){var a=o[s];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ah(gl.keyField(),u))}}}return e.p}function _h(t){var e=el(t);if(!e.T)if("F"===e.limitType)e.T=$l(e.path,e.collectionGroup,vh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=vh(e);r<i.length;r++){var s=i[r];n.push(new ah(s.field,"desc"===s.dir?"asc":"desc"))}var o=e.endAt?new sh(e.endAt.position,!e.endAt.before):null,a=e.startAt?new sh(e.startAt.position,!e.startAt.before):null;e.T=$l(e.path,e.collectionGroup,n,e.filters,e.limit,o,a)}return e.T}function wh(t,e,n){return new hh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eh(t,e){return Wl(_h(t),_h(e))&&t.limitType===e.limitType}function Sh(t){return Gl(_h(t))+"|lt:"+t.limitType}function Oh(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Rl(e.value);var e}).join(", ")+"]"),Cl(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+oh(t.startAt)),t.endAt&&(e+=", endAt: "+oh(t.endAt)),"Target("+e+")"}(_h(t))+"; limitType="+t.limitType+")"}function Ch(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):xl.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ch(t.startAt,vh(t),e)||t.endAt&&ch(t.endAt,vh(t),e))}(t,e)}function Th(t){return function(e,n){for(var r=!1,i=0,s=vh(t);i<s.length;i++){var o=s[i],a=Ih(o,e,n);if(0!==a)return a;r=r||o.field.isKeyField()}return 0}}function Ih(t,e,n){var r=t.field.isKeyField()?xl.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?jl(r,i):Jc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Jc()}}function xh(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tl(e)?"-0":e}}function Ah(t){return{integerValue:""+t}}function kh(t,e){return Il(e)?Ah(e):xh(t,e)}var Nh=function(){this._=void 0};function jh(t,e,n){return t instanceof Ph?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Mh?Lh(t,e):t instanceof Fh?Vh(t,e):function(t,e){var n=Rh(t,e),r=qh(n)+qh(t.A);return Ll(n)&&Ll(t.A)?Ah(r):xh(t.R,r)}(t,e)}function Dh(t,e,n){return t instanceof Mh?Lh(t,e):t instanceof Fh?Vh(t,e):n}function Rh(t,e){return t instanceof Uh?Ll(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ph=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Yi.c)(e,t),e}(Nh),Mh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Yi.c)(e,t),e}(Nh);function Lh(t,e){for(var n=Bh(e),r=function(t){n.some(function(e){return kl(e,t)})||n.push(t)},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Fh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Yi.c)(e,t),e}(Nh);function Vh(t,e){for(var n=Bh(e),r=function(t){n=n.filter(function(e){return!kl(e,t)})},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Uh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Yi.c)(e,t),e}(Nh);function qh(t){return _l(t.integerValue||t.doubleValue)}function Bh(t){return Fl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Hh=function(t,e){this.field=t,this.transform=e},zh=function(t,e){this.version=t,this.transformResults=e},Kh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function $h(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Gh=function(){};function Wh(t,e,n){t instanceof Jh?function(t,e,n){var r=t.value.clone(),i=nd(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof td?function(t,e,n){if($h(t.precondition,e)){var r=nd(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ed(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Qh(t,e,n){t instanceof Jh?function(t,e,n){if($h(t.precondition,e)){var r=t.value.clone(),i=rd(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Xh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof td?function(t,e,n){if($h(t.precondition,e)){var r=rd(t.fieldTransforms,n,e),i=e.data;i.setAll(ed(t)),i.setAll(r),e.convertToFoundDocument(Xh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){$h(t.precondition,e)&&e.convertToNoDocument(ul.min())}(t,e)}function Yh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var s=i[r],o=e.data.field(s.field),a=Rh(s.transform,o||null);null!=a&&(null==n&&(n=Bl.empty()),n.set(s.field,a))}return n||null}function Zh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&sl(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Mh&&e instanceof Mh||t instanceof Fh&&e instanceof Fh?sl(t.elements,e.elements,kl):t instanceof Uh&&e instanceof Uh?kl(t.A,e.A):t instanceof Ph&&e instanceof Ph}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Xh(t){return t.isFoundDocument()?t.version:ul.min()}var Jh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var s=this;return(s=t.call(this)||this).key=e,s.value=n,s.precondition=r,s.fieldTransforms=i,s.type=0,s}return Object(Yi.c)(e,t),e}(Gh),td=function(t){function e(e,n,r,i,s){void 0===s&&(s=[]);var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return Object(Yi.c)(e,t),e}(Gh);function ed(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function nd(t,e,n){var r=new Map;tl(t.length===n.length);for(var i=0;i<n.length;i++){var s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Dh(o,a,n[i]))}return r}function rd(t,e,n){for(var r=new Map,i=0,s=t;i<s.length;i++){var o=s[i],a=o.transform,u=n.data.field(o.field);r.set(o.field,jh(a,u,e))}return r}var id,sd,od=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Yi.c)(e,t),e}(Gh),ad=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Yi.c)(e,t),e}(Gh),ud=function(t){this.count=t};function cd(t){switch(t){case Kc.OK:return Jc();case Kc.CANCELLED:case Kc.UNKNOWN:case Kc.DEADLINE_EXCEEDED:case Kc.RESOURCE_EXHAUSTED:case Kc.INTERNAL:case Kc.UNAVAILABLE:case Kc.UNAUTHENTICATED:return!1;case Kc.INVALID_ARGUMENT:case Kc.NOT_FOUND:case Kc.ALREADY_EXISTS:case Kc.PERMISSION_DENIED:case Kc.FAILED_PRECONDITION:case Kc.ABORTED:case Kc.OUT_OF_RANGE:case Kc.UNIMPLEMENTED:case Kc.DATA_LOSS:return!0;default:return Jc()}}function ld(t){if(void 0===t)return Yc("GRPC error has no .code"),Kc.UNKNOWN;switch(t){case id.OK:return Kc.OK;case id.CANCELLED:return Kc.CANCELLED;case id.UNKNOWN:return Kc.UNKNOWN;case id.DEADLINE_EXCEEDED:return Kc.DEADLINE_EXCEEDED;case id.RESOURCE_EXHAUSTED:return Kc.RESOURCE_EXHAUSTED;case id.INTERNAL:return Kc.INTERNAL;case id.UNAVAILABLE:return Kc.UNAVAILABLE;case id.UNAUTHENTICATED:return Kc.UNAUTHENTICATED;case id.INVALID_ARGUMENT:return Kc.INVALID_ARGUMENT;case id.NOT_FOUND:return Kc.NOT_FOUND;case id.ALREADY_EXISTS:return Kc.ALREADY_EXISTS;case id.PERMISSION_DENIED:return Kc.PERMISSION_DENIED;case id.FAILED_PRECONDITION:return Kc.FAILED_PRECONDITION;case id.ABORTED:return Kc.ABORTED;case id.OUT_OF_RANGE:return Kc.OUT_OF_RANGE;case id.UNIMPLEMENTED:return Kc.UNIMPLEMENTED;case id.DATA_LOSS:return Kc.DATA_LOSS;default:return Jc()}}(sd=id||(id={}))[sd.OK=0]="OK",sd[sd.CANCELLED=1]="CANCELLED",sd[sd.UNKNOWN=2]="UNKNOWN",sd[sd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sd[sd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sd[sd.NOT_FOUND=5]="NOT_FOUND",sd[sd.ALREADY_EXISTS=6]="ALREADY_EXISTS",sd[sd.PERMISSION_DENIED=7]="PERMISSION_DENIED",sd[sd.UNAUTHENTICATED=16]="UNAUTHENTICATED",sd[sd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sd[sd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sd[sd.ABORTED=10]="ABORTED",sd[sd.OUT_OF_RANGE=11]="OUT_OF_RANGE",sd[sd.UNIMPLEMENTED=12]="UNIMPLEMENTED",sd[sd.INTERNAL=13]="INTERNAL",sd[sd.UNAVAILABLE=14]="UNAVAILABLE",sd[sd.DATA_LOSS=15]="DATA_LOSS";var hd=function(){function t(t,e){this.comparator=t,this.root=e||fd.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fd.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fd.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new dd(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new dd(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new dd(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new dd(this.root,t,this.comparator,!0)},t}(),dd=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),fd=function(){function t(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Jc();if(this.right.isRed())throw Jc();var t=this.left.check();if(t!==this.right.check())throw Jc();return t+(this.isRed()?0:1)},t}();fd.EMPTY=null,fd.RED=!0,fd.BLACK=!1,fd.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Jc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Jc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Jc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Jc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Jc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new fd(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var pd=function(){function t(t){this.comparator=t,this.data=new hd(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new gd(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new gd(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),gd=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),md=new hd(xl.comparator);function yd(){return md}var bd=new hd(xl.comparator);function vd(){return bd}var _d=new hd(xl.comparator);function wd(){return _d}var Ed=new pd(xl.comparator);function Sd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ed,r=0,i=t;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var Od=new pd(il);function Cd(){return Od}var Td=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Id.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ul.min(),r,Cd(),yd(),Sd())},t}(),Id=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(yl.EMPTY_BYTE_STRING,n,Sd(),Sd(),Sd())},t}(),xd=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Ad=function(t,e){this.targetId=t,this.V=e},kd=function(t,e,n,r){void 0===n&&(n=yl.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Nd=function(){function t(){this.S=0,this.D=Rd(),this.C=yl.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Sd(),e=Sd(),n=Sd();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Jc()}}),new Id(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Rd()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),jd=function(){function t(t){this.W=t,this.G=new Map,this.H=yd(),this.J=Dd(),this.Y=new pd(il)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,s=t.removedTargetIds;i<s.length;i++)this.tt(r=s[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Jc()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Ql(i))if(0===n){var s=new xl(i.path);this.tt(e,s,zl.newNoDocument(s,ul.min()))}else tl(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var s=e.ot(i);if(s){if(r.current&&Ql(s.target)){var o=new xl(s.target.path);null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,zl.newNoDocument(o,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=Sd();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Td(t,n,this.Y,this.H,r);return this.H=yd(),this.J=Dd(),this.Y=new pd(il),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Nd,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new pd(il),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Qc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Nd),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Dd(){return new hd(xl.comparator)}function Rd(){return new hd(xl.comparator)}var Pd={asc:"ASCENDING",desc:"DESCENDING"},Md={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ld=function(t,e){this.databaseId=t,this.I=e};function Fd(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vd(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ud(t,e){return Fd(t,e.toTimestamp())}function qd(t){return tl(!!t),ul.fromTimestamp(function(t){var e=vl(t);return new al(e.seconds,e.nanos)}(t))}function Bd(t,e){return function(t){return new fl(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Hd(t){var e=fl.fromString(t);return tl(pf(e)),e}function zd(t,e){return Bd(t.databaseId,e.path)}function Kd(t,e){var n=Hd(e);if(n.get(1)!==t.databaseId.projectId)throw new $c(Kc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $c(Kc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xl(Qd(n))}function $d(t,e){return Bd(t.databaseId,e)}function Gd(t){var e=Hd(t);return 4===e.length?fl.emptyPath():Qd(e)}function Wd(t){return new fl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Qd(t){return tl(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Yd(t,e,n){return{name:zd(t,e),fields:n.toProto().mapValue.fields}}function Zd(t,e,n){var r=Kd(t,e.name),i=qd(e.updateTime),s=new Bl({mapValue:{fields:e.fields}}),o=zl.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Xd(t,e){var n;if(e instanceof Jh)n={update:Yd(t,e.key,e.value)};else if(e instanceof od)n={delete:zd(t,e.key)};else if(e instanceof td)n={update:Yd(t,e.key,e.data),updateMask:ff(e.fieldMask)};else{if(!(e instanceof ad))return Jc();n={verify:zd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Ph)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Uh)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Jc()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ud(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Jc()}(t,e.precondition)),n}function Jd(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Kh.updateTime(qd(t.updateTime)):void 0!==t.exists?Kh.exists(t.exists):Kh.none()}(e.currentDocument):Kh.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(tl("REQUEST_TIME"===e.setToServerValue),n=new Ph):"appendMissingElements"in e?n=new Mh(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Fh(e.removeAllFromArray.values||[]):"increment"in e?n=new Uh(t,e.increment):Jc();var r=gl.fromServerFormat(e.fieldPath);return new Hh(r,n)}(t,e)}):[];if(e.update){var i=Kd(t,e.update.name),s=new Bl({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new ml((t.fieldPaths||[]).map(function(t){return gl.fromServerFormat(t)}))}(e.updateMask);return new td(i,s,o,n,r)}return new Jh(i,s,n,r)}if(e.delete){var a=Kd(t,e.delete);return new od(a,n)}if(e.verify){var u=Kd(t,e.verify);return new ad(u,n)}return Jc()}function tf(t,e){return{documents:[$d(t,e.path)]}}function ef(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=$d(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=$d(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Ul(t.value))return{unaryFilter:{field:cf(t.field),op:"IS_NAN"}};if(Vl(t.value))return{unaryFilter:{field:cf(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ul(t.value))return{unaryFilter:{field:cf(t.field),op:"IS_NOT_NAN"}};if(Vl(t.value))return{unaryFilter:{field:cf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cf(t.field),op:uf(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var s=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:cf(t.field),direction:af(t.dir)}}(t)})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var o=function(t,e){return t.I||Cl(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=sf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=sf(e.endAt)),n}function nf(t){var e=Gd(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){tl(1===r);var s=n.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=rf(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new ah(lf(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Cl(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=of(n.startAt));var l=null;return n.endAt&&(l=of(n.endAt)),dh(e,i,a,o,u,"F",c,l)}function rf(t){return t?void 0!==t.unaryFilter?[df(t)]:void 0!==t.fieldFilter?[hf(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return rf(t)}).reduce(function(t,e){return t.concat(e)}):Jc():[]}function sf(t){return{before:t.before,values:t.position}}function of(t){return new sh(t.values||[],!!t.before)}function af(t){return Pd[t]}function uf(t){return Md[t]}function cf(t){return{fieldPath:t.canonicalString()}}function lf(t){return gl.fromServerFormat(t.fieldPath)}function hf(t){return Yl.create(lf(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Jc()}}(t.fieldFilter.op),t.fieldFilter.value)}function df(t){switch(t.unaryFilter.op){case"IS_NAN":var e=lf(t.unaryFilter.field);return Yl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=lf(t.unaryFilter.field);return Yl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=lf(t.unaryFilter.field);return Yl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=lf(t.unaryFilter.field);return Yl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Jc()}}function ff(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function pf(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function gf(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=yf(e)),e=mf(t.get(n),e);return yf(e)}function mf(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function yf(t){return t+"\x01\x01"}function bf(t){var e=t.length;if(tl(e>=2),2===e)return tl("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),fl.emptyPath();for(var n=e-2,r=[],i="",s=0;s<e;){var o=t.indexOf("\x01",s);switch((o<0||o>n)&&Jc(),t.charAt(o+1)){case"\x01":var a=t.substring(s,o),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:Jc()}s=o+2}return new fl(r)}var vf=function(t,e){this.seconds=t,this.nanoseconds=e},_f=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};_f.store="owner",_f.key="owner";var wf=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};wf.store="mutationQueues",wf.keyPath="userId";var Ef=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ef.store="mutations",Ef.keyPath="batchId",Ef.userMutationsIndex="userMutationsIndex",Ef.userMutationsKeyPath=["userId","batchId"];var Sf=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,gf(e)]},t.key=function(t,e,n){return[t,gf(e),n]},t}();Sf.store="documentMutations",Sf.PLACEHOLDER=new Sf;var Of=function(t,e){this.path=t,this.readTime=e},Cf=function(t,e){this.path=t,this.version=e},Tf=function(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};Tf.store="remoteDocuments",Tf.readTimeIndex="readTimeIndex",Tf.readTimeIndexPath="readTime",Tf.collectionReadTimeIndex="collectionReadTimeIndex",Tf.collectionReadTimeIndexPath=["parentPath","readTime"];var If=function(t){this.byteSize=t};If.store="remoteDocumentGlobal",If.key="remoteDocumentGlobalKey";var xf=function(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o};xf.store="targets",xf.keyPath="targetId",xf.queryTargetsIndexName="queryTargetsIndex",xf.queryTargetsKeyPath=["canonicalId","targetId"];var Af=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Af.store="targetDocuments",Af.keyPath=["targetId","path"],Af.documentTargetsIndex="documentTargetsIndex",Af.documentTargetsKeyPath=["path","targetId"];var kf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};kf.key="targetGlobalKey",kf.store="targetGlobal";var Nf=function(t,e){this.collectionId=t,this.parent=e};Nf.store="collectionParents",Nf.keyPath=["collectionId","parent"];var jf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};jf.store="clientMetadata",jf.keyPath="clientId";var Df=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Df.store="bundles",Df.keyPath="bundleId";var Rf=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Rf.store="namedQueries",Rf.keyPath="name";var Pf=Object(Yi.f)(Object(Yi.f)([],Object(Yi.f)(Object(Yi.f)([],Object(Yi.f)(Object(Yi.f)([],Object(Yi.f)(Object(Yi.f)([],[wf.store,Ef.store,Sf.store,Tf.store,xf.store,_f.store,kf.store,Af.store]),[jf.store])),[If.store])),[Nf.store])),[Df.store,Rf.store]),Mf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lf=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Ff=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Vf=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Jc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,s=!1;e.forEach(function(e){++r,e.next(function(){++i,s&&i===r&&t()},function(t){return n(t)})}),s=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,s=e;i<s.length;i++)r(s[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Uf=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Ff,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Hf(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Wf(e.target.error);n.ft.reject(new Hf(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Hf(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Qc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Kf(e)},t}(),qf=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Us.h)())&&Yc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Qc("SimpleDb","Removing database:",t),$f(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Us.h)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Yi.b)(this,void 0,void 0,function(){var e,n=this;return Object(Yi.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Qc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Hf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new $c(Kc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Hf(t,n))},i.onupgradeneeded=function(t){Qc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Qc("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Yi.b)(this,void 0,void 0,function(){var i,s,o,a,u;return Object(Yi.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,s=0,o=function(){var e,o,u,c,l;return Object(Yi.d)(this,function(h){switch(h.label){case 0:++s,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Uf.open(a.db,t,i?"readonly":"readwrite",n),o=r(e).catch(function(t){return e.abort(t),Vf.reject(t)}).toPromise(),u={},o.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),o),u)];case 4:return Qc("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&s<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,o()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Bf=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return $f(this.Pt.delete())},t}(),Hf=function(t){function e(e,n){var r=this;return(r=t.call(this,Kc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Yi.c)(e,t),e}($c);function zf(t){return"IndexedDbTransactionError"===t.name}var Kf=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Qc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Qc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),$f(n)},t.prototype.add=function(t){return Qc("SimpleDb","ADD",this.store.name,t,t),$f(this.store.add(t))},t.prototype.get=function(t){var e=this;return $f(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Qc("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Qc("SimpleDb","DELETE",this.store.name,t),$f(this.store.delete(t))},t.prototype.count=function(){return Qc("SimpleDb","COUNT",this.store.name),$f(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Qc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Vf(function(n,r){e.onerror=function(t){var e=Wf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Vf(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new Bf(i),o=e(i.primaryKey,i.value,s);if(o instanceof Vf){var a=o.catch(function(t){return s.done(),Vf.reject(t)});n.push(a)}s.isDone?r():null===s.Dt?i.continue():i.continue(s.Dt)}else r()}}).next(function(){return Vf.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function $f(t){return new Vf(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Wf(t.target.error);n(e)}})}var Gf=!1;function Wf(t){var e=qf._t(Object(Us.h)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new $c("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Gf||(Gf=!0,setTimeout(function(){throw r},0)),r}}return t}var Qf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Yi.c)(e,t),e}(Lf);function Yf(t,e){var n=el(t);return qf.It(n.Mt,e)}var Zf=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Wh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(s=n[e]).key.isEqual(t.key)&&Qh(s,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var s;(s=i[r]).key.isEqual(t.key)&&Qh(s,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ul.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Sd())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&sl(this.mutations,t.mutations,function(t,e){return Zh(t,e)})&&sl(this.baseMutations,t.baseMutations,function(t,e){return Zh(t,e)})},t}(),Xf=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){tl(e.mutations.length===r.length);for(var i=wd(),s=e.mutations,o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)},t}(),Jf=function(){function t(t,e,n,r,i,s,o){void 0===i&&(i=ul.min()),void 0===s&&(s=ul.min()),void 0===o&&(o=yl.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),tp=function(t){this.Lt=t};function ep(t,e){if(e.document)return Zd(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=xl.fromSegments(e.noDocument.path),r=op(e.noDocument.readTime),i=zl.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var s=xl.fromSegments(e.unknownDocument.path);return r=op(e.unknownDocument.version),zl.newUnknownDocument(s,r)}return Jc()}function np(t,e,n){var r=rp(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var s=function(t,e){return{name:zd(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Fd(t,e.version.toTimestamp())}}(t.Lt,e),o=e.hasCommittedMutations;return new Tf(null,null,s,o,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=sp(e.version);return o=e.hasCommittedMutations,new Tf(null,new Of(a,u),null,o,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=sp(e.version);return new Tf(new Cf(c,l),null,null,!0,r,i)}return Jc()}function rp(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ip(t){var e=new al(t[0],t[1]);return ul.fromTimestamp(e)}function sp(t){var e=t.toTimestamp();return new vf(e.seconds,e.nanoseconds)}function op(t){var e=new al(t.seconds,t.nanoseconds);return ul.fromTimestamp(e)}function ap(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Jd(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Jd(t.Lt,e)}),s=al.fromMillis(e.localWriteTimeMs);return new Zf(e.batchId,s,n,i)}function up(t){var e,n,r=op(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?op(t.lastLimboFreeSnapshotVersion):ul.min();return void 0!==t.query.documents?(tl(1===(n=t.query).documents.length),e=_h(fh(Gd(n.documents[0])))):e=function(t){return _h(nf(t))}(t.query),new Jf(e,t.targetId,0,t.lastListenSequenceNumber,r,i,yl.fromBase64String(t.resumeToken))}function cp(t,e){var n,r=sp(e.snapshotVersion),i=sp(e.lastLimboFreeSnapshotVersion);n=Ql(e.target)?tf(t.Lt,e.target):ef(t.Lt,e.target);var s=e.resumeToken.toBase64();return new xf(e.targetId,Gl(e.target),r,s,e.sequenceNumber,i,n)}function lp(t){var e=nf({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?wh(e,e.limit,"L"):e}var hp=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return dp(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:op(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return dp(t).put({bundleId:(n=e).id,createTime:sp(qd(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return fp(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:lp(e.bundledQuery),readTime:op(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return fp(t).put(function(t){return{name:t.name,readTime:sp(qd(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function dp(t){return Yf(t,Df.store)}function fp(t){return Yf(t,Rf.store)}var pp=function(){function t(){this.Bt=new gp}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Vf.resolve()},t.prototype.getCollectionParents=function(t,e){return Vf.resolve(this.Bt.getEntries(e))},t}(),gp=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new pd(fl.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new pd(fl.comparator)).toArray()},t}(),mp=function(){function t(){this.qt=new gp}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var s={collectionId:r,parent:gf(i)};return yp(t).put(s)}return Vf.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ol(e),""],!1,!0);return yp(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.collectionId!==e)break;n.push(bf(s.parent))}return n})},t}();function yp(t){return Yf(t,Nf.store)}var bp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function _p(t,e,n){var r=t.store(Ef.store),i=t.store(Sf.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:o},function(t,e,n){return a++,n.delete()});s.push(u.next(function(){tl(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Sf.key(e,d.key.path,n.batchId);s.push(i.delete(f)),c.push(d.key)}return Vf.waitFor(s).next(function(){return c})}function wp(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Jc();e=t.noDocument}return JSON.stringify(e).length}vp.DEFAULT_COLLECTION_PERCENTILE=10,vp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vp.DEFAULT=new vp(41943040,vp.DEFAULT_COLLECTION_PERCENTILE,vp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vp.DISABLED=new vp(-1,0,0);var Ep=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return tl(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Op(t).Ot({index:Ef.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,s=Cp(t),o=Op(t);return o.add({}).next(function(a){tl("number"==typeof a);for(var u=new Zf(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Xd(t.Lt,e)}),i=n.mutations.map(function(e){return Xd(t.Lt,e)});return new Ef(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new pd(function(t,e){return il(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=Sf.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(o.put(c)),l.push(s.put(g,Sf.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Vf.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Op(t).get(e).next(function(t){return t?(tl(t.userId===n.userId),ap(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Vf.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Op(t).Ot({index:Ef.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(tl(e.batchId>=r),s=ap(n.R,e)),i.done()}).next(function(){return s})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Op(t).Ot({index:Ef.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Op(t).Nt(Ef.userMutationsIndex,n).next(function(t){return t.map(function(t){return ap(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Sf.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return Cp(t).Ot({range:i},function(r,i,o){var a=r[0],u=r[2],c=bf(r[1]);if(a===n.userId&&e.path.isEqual(c))return Op(t).get(u).next(function(t){if(!t)throw Jc();tl(t.userId===n.userId),s.push(ap(n.R,t))});o.done()}).next(function(){return s})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new pd(il),i=[];return e.forEach(function(e){var s=Sf.prefixForPath(n.userId,e.path),o=IDBKeyRange.lowerBound(s),a=Cp(t).Ot({range:o},function(t,i,s){var o=t[0],a=t[2],u=bf(t[1]);o===n.userId&&e.path.isEqual(u)?r=r.add(a):s.done()});i.push(a)}),Vf.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,s=Sf.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new pd(il);return Cp(t).Ot({range:o},function(t,e,s){var o=t[0],u=t[2],c=bf(t[1]);o===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):s.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Op(t).get(e).next(function(t){if(null===t)throw Jc();tl(t.userId===n.userId),r.push(ap(n.R,t))}))}),Vf.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return _p(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Vf.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Vf.resolve();var r=IDBKeyRange.lowerBound(Sf.prefixForUser(e.userId)),i=[];return Cp(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var s=bf(t[1]);i.push(s)}else r.done()}).next(function(){tl(0===i.length)})})},t.prototype.containsKey=function(t,e){return Sp(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Tp(t).get(this.userId).next(function(t){return t||new wf(e.userId,-1,"")})},t}();function Sp(t,e,n){var r=Sf.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Cp(t).Ot({range:s,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(o=!0),r.done()}).next(function(){return o})}function Op(t){return Yf(t,Ef.store)}function Cp(t){return Yf(t,Sf.store)}function Tp(t){return Yf(t,wf.store)}var Ip=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),xp=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Ip(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return ul.fromTimestamp(new al(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Ap(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return tl(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return Ap(t).Ot(function(o,a){var u=up(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,s.push(r.removeTargetData(t,u)))}).next(function(){return Vf.waitFor(s)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Ap(t).Ot(function(t,n){var r=up(n);e(r)})},t.prototype.Xt=function(t){return kp(t).get(kf.key).next(function(t){return tl(null!==t),t})},t.prototype.Zt=function(t,e){return kp(t).put(kf.key,e)},t.prototype.te=function(t,e){return Ap(t).put(cp(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Gl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ap(t).Ot({range:r,index:xf.queryTargetsIndexName},function(t,n,r){var s=up(n);Wl(e,s.target)&&(i=s,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],s=Np(t);return e.forEach(function(e){var o=gf(e.path);i.push(s.put(new Af(n,o))),i.push(r.referenceDelegate.addReference(t,n,e))}),Vf.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Np(t);return Vf.forEach(e,function(e){var s=gf(e.path);return Vf.waitFor([i.delete([n,s]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Np(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Np(t),i=Sd();return r.Ot({range:n,kt:!0},function(t,e,n){var r=bf(t[1]),s=new xl(r);i=i.add(s)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=gf(e.path),r=IDBKeyRange.bound([n],[ol(n)],!1,!0),i=0;return Np(t).Ot({index:Af.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Ap(t).get(e).next(function(t){return t?up(t):null})},t}();function Ap(t){return Yf(t,xf.store)}function kp(t){return Yf(t,kf.store)}function Np(t){return Yf(t,Af.store)}function jp(t){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(e){if(t.code!==Kc.FAILED_PRECONDITION||t.message!==Mf)throw t;return Qc("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Dp(t,e){var n=t[1],r=e[1],i=il(t[0],e[0]);return 0===i?il(n,r):i}var Rp=function(){function t(t){this.ne=t,this.buffer=new pd(Dp),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Dp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Pp=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Qc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Yi.b)(e,void 0,void 0,function(){var e;return Object(Yi.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return zf(e=n.sent())?(Qc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,jp(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Mp=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Vf.resolve(zc.o);var r=new Rp(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Qc("LruGarbageCollector","Garbage collection skipped; disabled"),Vf.resolve(bp)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Qc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),bp):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,o,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Qc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Wc()<=qs.a.DEBUG&&Qc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+r+" in "+(o-s)+"ms\n\tRemoved "+i+" targets in "+(a-o)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Vf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Lp=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Mp(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Fp(t,n)},t.prototype.removeReference=function(t,e,n){return Fp(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Fp(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Tp(t).$t(function(r){return Sp(t,r,e).next(function(t){return t&&(n=!0),Vf.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.we(t,function(o,a){if(a<=e){var u=n._e(t,o).next(function(e){if(!e)return s++,r.getEntry(t,o).next(function(){return r.removeEntry(o),Np(t).delete([0,gf(o.path)])})});i.push(u)}}).next(function(){return Vf.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return s})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Fp(t,e)},t.prototype.we=function(t,e){var n,r=Np(t),i=zc.o;return r.Ot({index:Af.documentTargetsIndex},function(t,r){var s=r.path,o=r.sequenceNumber;0===t[0]?(i!==zc.o&&e(new xl(bf(n)),i),i=o,n=s):i=zc.o}).next(function(){i!==zc.o&&e(new xl(bf(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Fp(t,e){return Np(t).put(function(t,e){return new Af(0,gf(t.path),e)}(e,t.currentSequenceNumber))}var Vp=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[1];if(this.equalsFn(s[0],t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ll(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];t(s[0],s[1])}})},t.prototype.isEmpty=function(){return hl(this.inner)},t}(),Up=function(){function t(){this.changes=new Vp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ul.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:zl.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Vf.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),qp=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return zp(t).put(Kp(e),n)},t.prototype.removeEntry=function(t,e){var n=zp(t),r=Kp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return zp(t).get(Kp(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return zp(t).get(Kp(e)).next(function(t){return{document:n.ye(e,t),size:wp(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=yd();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=yd(),i=new hd(xl.comparator);return this.pe(t,e,function(t,e){var s=n.ye(t,e);r=r.insert(t,s),i=i.insert(t,wp(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Vf.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),s=i.getNext();return zp(t).Ot({range:r},function(t,e,r){for(var o=xl.fromSegments(t);s&&xl.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,e),s=i.hasNext()?i.getNext():null),s?r.Ct(s.path.toArray()):r.done()}).next(function(){for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=yd(),s=e.path.length+1,o={};if(n.isEqual(ul.min())){var a=e.path.toArray();o.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=rp(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=Tf.collectionReadTimeIndex}return zp(t).Ot(o,function(t,n,o){if(t.length===s){var a=ep(r.R,n);e.path.isPrefixOf(a.key.path)?Ch(e,a)&&(i=i.insert(a.key,a)):o.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Bp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Hp(t).get(If.key).next(function(t){return tl(!!t),t})},t.prototype.me=function(t,e){return Hp(t).put(If.key,e)},t.prototype.ye=function(t,e){if(e){var n=ep(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(ul.min()))return n}return zl.newInvalidDocument(t)},t}(),Bp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Vp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Yi.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new pd(function(t,e){return il(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(s,o){var a=e.Ae.get(s);if(o.document.isValidDocument()){var u=np(e.Ie.R,o.document,e.getReadTime(s));i=i.add(s.path.popLast());var c=wp(u);r+=c-a,n.push(e.Ie.addEntry(t,s,u))}else if(r-=a,e.trackRemovals){var l=np(e.Ie.R,zl.newNoDocument(s,ul.min()),e.getReadTime(s));n.push(e.Ie.addEntry(t,s,l))}else n.push(e.Ie.removeEntry(t,s))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Vf.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Up);function Hp(t){return Yf(t,If.store)}function zp(t){return Yf(t,Tf.store)}function Kp(t){return t.path.toArray()}var $p=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;tl(n<r&&n>=0&&r<=11);var s=new Uf("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(_f.store)}(t),function(t){t.createObjectStore(wf.store,{keyPath:wf.keyPath}),t.createObjectStore(Ef.store,{keyPath:Ef.keyPath,autoIncrement:!0}).createIndex(Ef.userMutationsIndex,Ef.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Sf.store)}(t),Gp(t),function(t){t.createObjectStore(Tf.store)}(t));var o=Vf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Af.store),t.deleteObjectStore(xf.store),t.deleteObjectStore(kf.store)}(t),Gp(t)),o=o.next(function(){return function(t){var e=t.store(kf.store),n=new kf(0,0,ul.min().toTimestamp(),0);return e.put(kf.key,n)}(s)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(Ef.store).Nt().next(function(n){t.deleteObjectStore(Ef.store),t.createObjectStore(Ef.store,{keyPath:Ef.keyPath,autoIncrement:!0}).createIndex(Ef.userMutationsIndex,Ef.userMutationsKeyPath,{unique:!0});var r=e.store(Ef.store),i=n.map(function(t){return r.put(t)});return Vf.waitFor(i)})}(t,s)})),o=o.next(function(){!function(t){t.createObjectStore(jf.store,{keyPath:jf.keyPath})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.Re(s)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(If.store)}(t),i.be(s)})),n<7&&r>=7&&(o=o.next(function(){return i.ve(s)})),n<8&&r>=8&&(o=o.next(function(){return i.Pe(t,s)})),n<9&&r>=9&&(o=o.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Tf.store);e.createIndex(Tf.readTimeIndex,Tf.readTimeIndexPath,{unique:!1}),e.createIndex(Tf.collectionReadTimeIndex,Tf.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.Ve(s)})),n<11&&r>=11&&(o=o.next(function(){!function(t){t.createObjectStore(Df.store,{keyPath:Df.keyPath})}(t),function(t){t.createObjectStore(Rf.store,{keyPath:Rf.keyPath})}(t)})),o},t.prototype.be=function(t){var e=0;return t.store(Tf.store).Ot(function(t,n){e+=wp(n)}).next(function(){var n=new If(e);return t.store(If.store).put(If.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(wf.store),r=t.store(Ef.store);return n.Nt().next(function(n){return Vf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Ef.userMutationsIndex,i).next(function(r){return Vf.forEach(r,function(r){tl(r.userId===n.userId);var i=ap(e.R,r);return _p(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Af.store),n=t.store(Tf.store);return t.store(kf.store).get(kf.key).next(function(t){var r=[];return n.Ot(function(n,i){var s=new fl(n),o=function(t){return[0,gf(t)]}(s);r.push(e.get(o).next(function(n){return n?Vf.resolve():function(n){return e.put(new Af(0,gf(n),t.highestListenSequenceNumber))}(s)}))}).next(function(){return Vf.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Nf.store,{keyPath:Nf.keyPath});var n=e.store(Nf.store),r=new gp,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:gf(i)})}};return e.store(Tf.store).Ot({kt:!0},function(t,e){var n=new fl(t);return i(n.popLast())}).next(function(){return e.store(Sf.store).Ot({kt:!0},function(t,e){var n=bf(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(xf.store);return n.Ot(function(t,r){var i=up(r),s=cp(e.R,i);return n.put(s)})},t}();function Gp(t){t.createObjectStore(Af.store,{keyPath:Af.keyPath}).createIndex(Af.documentTargetsIndex,Af.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(xf.store,{keyPath:xf.keyPath}).createIndex(xf.queryTargetsIndexName,xf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(kf.store)}var Wp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Qp=function(){function t(e,n,r,i,s,o,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=o,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new $c(Kc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Lp(this,i),this.Le=n+"main",this.R=new tp(u),this.Be=new qf(this.Le,11,new $p(this.R)),this.qe=new xp(this.referenceDelegate,this.R),this.Ut=new mp,this.Ue=function(t,e){return new qp(t,e)}(this.R,this.Ut),this.Qe=new hp,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Yc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new $c(Kc.FAILED_PRECONDITION,Wp);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new zc(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Yi.b)(e,void 0,void 0,function(){return Object(Yi.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Yi.b)(e,void 0,void 0,function(){return Object(Yi.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Yi.b)(e,void 0,void 0,function(){return Object(Yi.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Zp(e).put(new jf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(zf(e))return Qc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Qc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Yp(t).get(_f.key).next(function(t){return Vf.resolve(e.tn(t))})},t.prototype.en=function(t){return Zp(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Yi.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Yi.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Yf(t,jf.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Vf.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Vf.resolve(!0):Yp(t).get(_f.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new $c(Kc.FAILED_PRECONDITION,Wp);return!1}}return!(!e.networkEnabled||!e.inForeground)||Zp(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Qc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Yi.b)(this,void 0,void 0,function(){var t=this;return Object(Yi.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[_f.store,jf.store],function(e){var n=new Qf(e,zc.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Zp(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Ep.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Qc("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Pf,function(s){return r=new Qf(s,i.Ne?i.Ne.next():zc.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Yc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new $c(Kc.FAILED_PRECONDITION,Mf);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Yp(t).get(_f.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new $c(Kc.FAILED_PRECONDITION,Wp)})},t.prototype.Ze=function(t){var e=new _f(this.clientId,this.allowTabSynchronization,Date.now());return Yp(t).put(_f.key,e)},t.yt=function(){return qf.yt()},t.prototype.Xe=function(t){var e=this,n=Yp(t);return n.get(_f.key).next(function(t){return e.tn(t)?(Qc("IndexedDbPersistence","Releasing primary lease."),n.delete(_f.key)):Vf.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Yc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Qc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Yc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Yc("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Yp(t){return Yf(t,_f.store)}function Zp(t){return Yf(t,jf.store)}function Xp(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Jp=function(t,e){this.progress=t,this.wn=e},tg=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return xl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):bh(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new xl(e)).next(function(t){var e=vd();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,s=vd();return this.Ut.getCollectionParents(t,i).next(function(o){return Vf.forEach(o,function(o){var a=function(t,e){return new hh(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){s=s.insert(t,e)})})}).next(function(){return s})})},t.prototype.An=function(t,e,n){var r,i,s=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,s._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return s.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var s=n[e],o=0,a=s.mutations;o<a.length;o++){var u=a[o],c=u.key,l=r.get(c);null==l&&(l=zl.newInvalidDocument(c),r=r.insert(c,l)),Qh(u,l,s.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Ch(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Sd(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var u=a[o];u instanceof td&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),eg=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Sd(),i=Sd(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ng=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ul.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(s){var o=i.Cn(e,s);return(ph(e)||gh(e))&&i.Nn(e.limitType,o,r,n)?i.Dn(t,e):(Wc()<=qs.a.DEBUG&&Qc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Oh(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return o.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new pd(Th(t));return e.forEach(function(e,r){Ch(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Wc()<=qs.a.DEBUG&&Qc("QueryEngine","Using full collection scan to execute query:",Oh(e)),this.Sn.getDocumentsMatchingQuery(t,e,ul.min())},t}(),rg=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new hd(il),this.kn=new Vp(function(t){return Gl(t)},Wl),this.On=ul.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new tg(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function ig(t,e,n,r){return new rg(t,e,n,r)}function sg(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i,s;return Object(Yi.d)(this,function(o){switch(o.label){case 0:return n=el(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var s;return n._n.getAllMutationBatches(t).next(function(o){return s=o,r=n.persistence.getMutationQueue(e),i=new tg(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],o=Sd(),a=0,u=s;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)o=o.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)o=o.add(m[g].key)}return i.pn(t,o).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return s=o.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function og(t,e){var n=el(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,s=i.keys(),o=Vf.resolve();return s.forEach(function(t){o=o.next(function(){return r.getEntry(e,t)}).next(function(e){var s=n.docVersions.get(t);tl(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),o.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function ag(t){var e=el(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function ug(t,e){var n=el(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var s=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var o=[];e.targetChanges.forEach(function(e,s){var a=i.get(s);if(a){o.push(n.qe.removeMatchingKeys(t,e.removedDocuments,s).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,s)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,c),function(t,e,n){return tl(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.qe.updateTargetData(t,c))}}});var a=yd();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(cg(t,s,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(ul.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});o.push(u)}return Vf.waitFor(o).next(function(){return s.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function cg(t,e,n,r,i){var s=Sd();return n.forEach(function(t){return s=s.add(t)}),e.getEntries(t,s).next(function(t){var s=yd();return n.forEach(function(n,o){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(ul.min())?(e.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),s=s.insert(n,o)):Qc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function lg(t,e){var n=el(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function hg(t,e){var n=el(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Vf.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Jf(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function dg(t,e,n){return Object(Yi.b)(this,void 0,void 0,function(){var r,i,s,o;return Object(Yi.d)(this,function(a){switch(a.label){case 0:r=el(t),i=r.Fn.get(e),s=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!zf(o=a.sent()))throw o;return Qc("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function fg(t,e,n){var r=el(t),i=ul.min(),s=Sd();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=el(t),i=r.kn.get(n);return void 0!==i?Vf.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,_h(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){s=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:ul.min(),n?s:Sd())}).next(function(t){return{documents:t,Bn:s}})})}function pg(t,e){var n=el(t),r=el(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function gg(t){var e=el(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=el(t),i=yd(),s=rp(n),o=zp(e),a=IDBKeyRange.lowerBound(s,!0);return o.Ot({index:Tf.readTimeIndex,range:a},function(t,e){var n=ep(r.R,e);i=i.insert(n.key,n),s=e.readTime}).next(function(){return{wn:i,readTime:ip(s)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function mg(t){return Object(Yi.b)(this,void 0,void 0,function(){var e;return Object(Yi.d)(this,function(n){return[2,(e=el(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=zp(t),n=ul.min();return e.Ot({index:Tf.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=ip(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function yg(t,e,n,r){return Object(Yi.b)(this,void 0,void 0,function(){var i,s,o,a,u,c,l,h,d,f;return Object(Yi.d)(this,function(p){switch(p.label){case 0:for(i=el(t),s=Sd(),o=yd(),a=wd(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(s=s.add(h)),o=o.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,hg(i,function(t){return _h(fh(fl.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return cg(t,d,o,ul.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,s,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function bg(t,e,n){return void 0===n&&(n=Sd()),Object(Yi.b)(this,void 0,void 0,function(){var r,i;return Object(Yi.d)(this,function(s){switch(s.label){case 0:return[4,hg(t,_h(lp(e.bundledQuery)))];case 1:return r=s.sent(),[2,(i=el(t)).persistence.runTransaction("Save named query","readwrite",function(t){var s=qd(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Qe.saveNamedQuery(t,e);var o=r.withResumeToken(yl.EMPTY_BYTE_STRING,s);return i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var vg=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Vf.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:qd(n.createTime)}),Vf.resolve()},t.prototype.getNamedQuery=function(t,e){return Vf.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:lp(t.bundledQuery),readTime:qd(t.readTime)}}(e)),Vf.resolve()},t}(),_g=function(){function t(){this.Wn=new pd(wg.Gn),this.zn=new pd(wg.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new wg(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new wg(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new xl(new fl([])),r=new wg(n,t),i=new wg(n,t+1),s=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),s.push(t.key)}),s},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new xl(new fl([])),n=new wg(e,t),r=new wg(e,t+1),i=Sd();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new wg(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),wg=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return xl.comparator(t.key,e.key)||il(t.ns,e.ns)},t.Hn=function(t,e){return il(t.ns,e.ns)||xl.comparator(t.key,e.key)},t}(),Eg=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new pd(wg.Gn)}return t.prototype.checkEmpty=function(t){return Vf.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var s=new Zf(i,e,n,r);this._n.push(s);for(var o=0,a=r;o<a.length;o++){var u=a[o];this.rs=this.rs.add(new wg(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Vf.resolve(s)},t.prototype.lookupMutationBatch=function(t,e){return Vf.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Vf.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Vf.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Vf.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new wg(e,0),i=new wg(e,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);s.push(e)}),Vf.resolve(s)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new pd(il);return e.forEach(function(t){var e=new wg(t,0),i=new wg(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Vf.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;xl.isDocumentKey(i)||(i=i.child(""));var s=new wg(new xl(i),0),o=new pd(il);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ns)),!0)},s),Vf.resolve(this.us(o))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;tl(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Vf.forEach(e.mutations,function(i){var s=new wg(i.key,e.batchId);return r=r.delete(s),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new wg(e,0),r=this.rs.firstAfterOrEqual(n);return Vf.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Vf.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Sg=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new hd(xl.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Vf.resolve(n?n.document.clone():zl.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=yd();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():zl.newInvalidDocument(t))}),Vf.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=yd(),i=new xl(e.path.child("")),s=this.docs.getIteratorFrom(i);s.hasNext();){var o=s.getNext(),a=o.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(o.key.path))break;c.compareTo(n)<=0||Ch(e,u)&&(r=r.insert(u.key,u.clone()))}return Vf.resolve(r)},t.prototype.fs=function(t,e){return Vf.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Og(this)},t.prototype.getSize=function(t){return Vf.resolve(this.size)},t}(),Og=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Yi.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Vf.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Up),Cg=function(){function t(t){this.persistence=t,this.ds=new Vp(function(t){return Gl(t)},Wl),this.lastRemoteSnapshotVersion=ul.min(),this.highestTargetId=0,this.ws=0,this._s=new _g,this.targetCount=0,this.ys=Ip.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Vf.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Vf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Vf.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Vf.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Vf.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Ip(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Vf.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Vf.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Vf.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return this.ds.forEach(function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(o),s.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Vf.waitFor(s).next(function(){return i})},t.prototype.getTargetCount=function(t){return Vf.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Vf.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Vf.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Vf.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Vf.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Vf.resolve(n)},t.prototype.containsKey=function(t,e){return Vf.resolve(this._s.containsKey(e))},t}(),Tg=function(){function t(t,e){var n=this;this.gs={},this.Ne=new zc(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Cg(this),this.Ut=new pp,this.Ue=function(t,e){return new Sg(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new tp(e),this.Qe=new vg(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Eg(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Qc("MemoryPersistence","Starting transaction:",t);var i=new Ig(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Vf.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Ig=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Yi.c)(e,t),e}(Lf),xg=function(){function t(t){this.persistence=t,this.As=new _g,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Jc()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Vf.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Vf.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Vf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Vf.forEach(this.vs,function(r){var i=xl.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Vf.or([function(){return Vf.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Ag=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function kg(t,e){return"firestore_clients_"+t+"_"+e}function Ng(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function jg(t,e){return"firestore_targets_"+t+"_"+e}Ag.UNAUTHENTICATED=new Ag(null),Ag.GOOGLE_CREDENTIALS=new Ag("google-credentials-uid"),Ag.FIRST_PARTY=new Ag("first-party-uid");var Dg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,s=JSON.parse(r),o="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return o&&s.error&&(o="string"==typeof s.error.message&&"string"==typeof s.error.code)&&(i=new $c(s.error.code,s.error.message)),o?new t(e,n,s.state,i):(Yc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Rg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new $c(i.error.code,i.error.message)),s?new t(e,i.state,r):(Yc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Pg=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Cd(),o=0;i&&o<r.activeTargetIds.length;++o)i=Il(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(Yc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Mg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Yc("SharedClientState","Failed to parse online state: "+e),null)},t}(),Lg=function(){function t(){this.activeTargetIds=Cd()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Fg=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new hd(il),this.started=!1,this.Os=[];var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=kg(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Lg),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Yi.b)(this,void 0,void 0,function(){var t,e,n,r,i,s,o,a,u,c,l=this;return Object(Yi.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(kg(this.persistenceKey,r)))&&(s=Pg.Vs(r,i))&&(this.ks=this.ks.insert(s.clientId,s));for(this.Ks(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(jg(this.persistenceKey,t));if(n){var r=Rg.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(jg(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Qc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Qc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Qc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Qc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Yc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Yi.b)(e,void 0,void 0,function(){var t,e,r,i,s,o;return Object(Yi.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(o=function(t){var e=zc.o;if(null!=t)try{var n=JSON.parse(t);tl("number"==typeof n),e=n}catch(t){Yc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==zc.o&&this.sequenceNumberHandler(o);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Dg(this.currentUser,t,e,n),i=Ng(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Ng(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=jg(this.persistenceKey,t),i=new Rg(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Pg.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Dg.Vs(new Ag(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Rg.Vs(r,e)},t.prototype.js=function(t){return Mg.Vs(t)},t.prototype.ii=function(t){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Qc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),s=this.Gs(r),o=[],a=[];return s.forEach(function(t){i.has(t)||o.push(t)}),i.forEach(function(t){s.has(t)||a.push(t)}),this.syncEngine.hi(o,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Cd();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Vg=function(){function t(){this.li=new Lg,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Lg,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Ug=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),qg=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Qc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Qc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Bg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Hg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),zg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Yi.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,s){var o=new Hc;o.listenOnce(Uc.COMPLETE,function(){try{switch(o.getLastErrorCode()){case Vc.NO_ERROR:var e=o.getResponseJson();Qc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Vc.TIMEOUT:Qc("Connection",'RPC "'+t+'" timed out'),s(new $c(Kc.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:var n=o.getStatus();if(Qc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Kc).indexOf(e)>=0?e:Kc.UNKNOWN}(r.status);s(new $c(a,r.message))}else s(new $c(Kc.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new $c(Kc.UNAVAILABLE,"Connection failed."));break;default:Jc()}}finally{Qc("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);o.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Rc,i=La(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(s.initMessageHeaders,e),Object(Us.m)()||Object(Us.o)()||Object(Us.k)()||Object(Us.l)()||Object(Us.p)()||Object(Us.j)()||(s.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");Qc("Connection","Creating WebChannel: "+o,s);var a=r.createWebChannel(o,s),u=!1,c=!1,l=new Hg({Ei:function(t){c?Qc("Connection","Not sending because WebChannel is closed:",t):(u||(Qc("Connection","Opening WebChannel transport."),a.open(),u=!0),Qc("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Bc.EventType.OPEN,function(){c||Qc("Connection","WebChannel transport opened.")}),h(a,Bc.EventType.CLOSE,function(){c||(c=!0,Qc("Connection","WebChannel transport closed"),l.Vi())}),h(a,Bc.EventType.ERROR,function(t){c||(c=!0,Zc("Connection","WebChannel transport errored:",t),l.Vi(new $c(Kc.UNAVAILABLE,"The operation could not be completed")))}),h(a,Bc.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];tl(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Qc("Connection","WebChannel received error:",r);var i=r.status,s=function(t){var e=id[t];if(void 0!==e)return ld(e)}(i),o=r.message;void 0===s&&(s=Kc.INTERNAL,o="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new $c(s,o)),a.close()}else Qc("Connection","WebChannel received:",n),l.Si(n)}}),h(i,qc.STAT_EVENT,function(t){10===t.stat?Qc("Connection","Detected buffering proxy"):11===t.stat&&Qc("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Qc("RestConnection","Sending: ",i,n);var s={};return this.Fi(s,r),this.ki(t,i,s,n).then(function(t){return Qc("RestConnection","Received: ",t),t},function(e){throw Zc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.2",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Bg[t]},t}());function Kg(){return"undefined"!=typeof window?window:null}function $g(){return"undefined"!=typeof document?document:null}function Gg(t){return new Ld(t,!0)}var Wg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Qc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Qg=function(){function t(t,e,n,r,i,s){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Wg(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Kc.RESOURCE_EXHAUSTED?(Yc(e.toString()),Yc("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Kc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new $c(Kc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Yi.b)(t,void 0,void 0,function(){return Object(Yi.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Qc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Qc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Yg=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s)||this).R=i,o}return Object(Yi.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Jc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.I?(tl(void 0===e||"string"==typeof e),yl.fromBase64String(e||"")):(tl(void 0===e||e instanceof Uint8Array),yl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Kc.UNKNOWN:ld(t.code);return new $c(e,t.message||"")}(a);n=new kd(r,i,s,o||null)}else if("documentChange"in e){i=Kd(t,(r=e.documentChange).document.name),s=qd(r.document.updateTime);var a=new Bl({mapValue:{fields:r.document.fields}}),u=(o=zl.newFoundDocument(i,s,a),r.targetIds||[]);n=new xd(u,r.removedTargetIds||[],o.key,o)}else if("documentDelete"in e)i=Kd(t,(r=e.documentDelete).document),s=r.readTime?qd(r.readTime):ul.min(),a=zl.newNoDocument(i,s),n=new xd([],o=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Kd(t,(r=e.documentRemove).document),n=new xd([],s=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Jc();var c=e.filter;i=new ud(r=c.count||0),n=new Ad(s=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return ul.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ul.min():e.readTime?qd(e.readTime):ul.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Wd(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Ql(r)?{documents:tf(t,r)}:{query:ef(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Vd(t,e.resumeToken):e.snapshotVersion.compareTo(ul.min())>0&&(n.readTime=Fd(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Jc()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Wd(this.R),e.removeTarget=t,this.cr(e)},e}(Qg),Zg=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,s)||this).R=i,o.gr=!1,o}return Object(Yi.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(tl(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(tl(void 0!==e),t.map(function(t){return function(t,e){var n=qd(t.updateTime?t.updateTime:e);return n.isEqual(ul.min())&&(n=qd(e)),new zh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=qd(t.commitTime);return this.listener.Tr(n,e)}return tl(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Wd(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Xd(e.R,t)})};this.cr(n)},e}(Qg),Xg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Yi.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new $c(Kc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Kc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new $c(Kc.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Kc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new $c(Kc.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Jg=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Yc(e),this.Vr=!1):Qc("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),tm=function(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Yi.b)(s,void 0,void 0,function(){return Object(Yi.d)(this,function(t){switch(t.label){case 0:return cm(this)?(Qc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Yi.b)(this,void 0,void 0,function(){var e;return Object(Yi.d)(this,function(n){switch(n.label){case 0:return(e=el(t)).$r.add(4),[4,nm(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,em(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Jg(n,r)};function em(t){return Object(Yi.b)(this,void 0,void 0,function(){var e,n;return Object(Yi.d)(this,function(r){switch(r.label){case 0:if(!cm(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function nm(t){return Object(Yi.b)(this,void 0,void 0,function(){var e,n;return Object(Yi.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function rm(t,e){var n=el(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),um(n)?am(n):Om(n).er()&&sm(n,e))}function im(t,e){var n=el(t),r=Om(n);n.Or.delete(e),r.er()&&om(n,e),0===n.Or.size&&(r.er()?r.ir():cm(n)&&n.Br.set("Unknown"))}function sm(t,e){t.qr.U(e.targetId),Om(t).mr(e)}function om(t,e){t.qr.U(e),Om(t).yr(e)}function am(t){t.qr=new jd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Om(t).start(),t.Br.Sr()}function um(t){return cm(t)&&!Om(t).tr()&&t.Or.size>0}function cm(t){return 0===el(t).$r.size}function lm(t){t.qr=void 0}function hm(t){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(e){return t.Or.forEach(function(e,n){sm(t,e)}),[2]})})}function dm(t,e){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(n){return lm(t),um(t)?(t.Br.Nr(e),am(t)):t.Br.set("Unknown"),[2]})})}function fm(t,e,n){return Object(Yi.b)(this,void 0,void 0,function(){var r,i,s;return Object(Yi.d)(this,function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof kd&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i,s;return Object(Yi.d)(this,function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?t.Or.has(s=i[r])?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]:[3,5];case 2:o.sent(),t.Or.delete(s),t.qr.removeTarget(s),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),Qc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,pm(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof xd?t.qr.X(e):e instanceof Ad?t.qr.rt(e):t.qr.et(e),n.isEqual(ul.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,ag(t.localStore)];case 8:return i=o.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(yl.EMPTY_BYTE_STRING,n.snapshotVersion)),om(t,e);var r=new Jf(n.target,e,1,n.sequenceNumber);sm(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return Qc("RemoteStore","Failed to raise snapshot:",s=o.sent()),[4,pm(t,s)];case 12:return o.sent(),[3,13];case 13:return[2]}})})}function pm(t,e,n){return Object(Yi.b)(this,void 0,void 0,function(){var r=this;return Object(Yi.d)(this,function(i){switch(i.label){case 0:if(!zf(e))throw e;return t.$r.add(1),[4,nm(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return ag(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Yi.b)(r,void 0,void 0,function(){return Object(Yi.d)(this,function(e){switch(e.label){case 0:return Qc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,em(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function gm(t,e){return e().catch(function(n){return pm(t,n,e)})}function mm(t){return Object(Yi.b)(this,void 0,void 0,function(){var e,n,r,i,s;return Object(Yi.d)(this,function(o){switch(o.label){case 0:e=el(t),n=Cm(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return cm(t)&&t.kr.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,lg(e.localStore,r)];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Cm(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return s=o.sent(),[4,pm(e,s)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return ym(e)&&bm(e),[2]}})})}function ym(t){return cm(t)&&!Cm(t).tr()&&t.kr.length>0}function bm(t){Cm(t).start()}function vm(t){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(e){return Cm(t).Ar(),[2]})})}function _m(t){return Object(Yi.b)(this,void 0,void 0,function(){var e,n,r;return Object(Yi.d)(this,function(i){for(e=Cm(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function wm(t,e,n){return Object(Yi.b)(this,void 0,void 0,function(){var r,i;return Object(Yi.d)(this,function(s){switch(s.label){case 0:return r=t.kr.shift(),i=Xf.from(r,e,n),[4,gm(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,mm(t)];case 2:return s.sent(),[2]}})})}function Em(t,e){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(n){switch(n.label){case 0:return e&&Cm(t).pr?[4,function(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r;return Object(Yi.d)(this,function(i){switch(i.label){case 0:return cd(r=e.code)&&r!==Kc.ABORTED?(n=t.kr.shift(),Cm(t).sr(),[4,gm(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,mm(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return ym(t)&&bm(t),[2]}})})}function Sm(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n;return Object(Yi.d)(this,function(r){switch(r.label){case 0:return n=el(t),e?(n.$r.delete(2),[4,em(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,nm(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Om(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=el(t);return r.br(),new Yg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:hm.bind(null,t),Ri:dm.bind(null,t),_r:fm.bind(null,t)}),t.Mr.push(function(n){return Object(Yi.b)(e,void 0,void 0,function(){return Object(Yi.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),um(t)?am(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),lm(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Cm(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=el(t);return r.br(),new Zg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:vm.bind(null,t),Ri:Em.bind(null,t),Ir:_m.bind(null,t),Tr:wm.bind(null,t)}),t.Mr.push(function(n){return Object(Yi.b)(e,void 0,void 0,function(){return Object(Yi.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,mm(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Qc("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var Tm=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ff,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,s){var o=new t(e,n,Date.now()+r,i,s);return o.start(r),o},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $c(Kc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Im(t,e){if(Yc("AsyncQueue",e+": "+t),zf(t))return new $c(Kc.UNAVAILABLE,e+": "+t);throw t}var xm=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||xl.comparator(e.key,n.key)}:function(t,e){return xl.comparator(t.key,e.key)},this.keyedMap=vd(),this.sortedSet=new hd(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Am=function(){function t(){this.Kr=new hd(xl.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Jc():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),km=function(){function t(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var s=[];return n.forEach(function(t){s.push({type:0,doc:t})}),new t(e,n,xm.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Eh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Nm=function(){this.Wr=void 0,this.listeners=[]},jm=function(){this.queries=new Vp(function(t){return Sh(t)},Eh),this.onlineState="Unknown",this.Gr=new Set};function Dm(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return Object(Yi.d)(this,function(c){switch(c.label){case 0:if(n=el(t),i=!1,(s=n.queries.get(r=e.query))||(i=!0,s=new Nm),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),o=s,[4,n.onListen(r)];case 2:return o.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Im(a,"Initialization of query '"+Oh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&Lm(n),[2]}})})}function Rm(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i,s,o;return Object(Yi.d)(this,function(a){return n=el(t),i=!1,(s=n.queries.get(r=e.query))&&(o=s.listeners.indexOf(e))>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Pm(t,e){for(var n=el(t),r=!1,i=0,s=e;i<s.length;i++){var o=s[i],a=n.queries.get(o.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(o)&&(r=!0);a.Wr=o}}r&&Lm(n)}function Mm(t,e,n){var r=el(t),i=r.queries.get(e);if(i)for(var s=0,o=i.listeners;s<o.length;s++)o[s].onError(n);r.queries.delete(e)}function Lm(t){t.Gr.forEach(function(t){t.next()})}var Fm=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new km(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),s=!0):this.eo(t,this.onlineState)&&(this.no(t),s=!0),this.Xr=t,s},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=km.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Vm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Um=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Kd(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Zd(this.R,t.document,!1):zl.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return qd(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Um(this.R),r=0,i=t;r<i.length;r++){var s=i[r];if(s.metadata.queries)for(var o=n.qn(s.metadata.name),a=0,u=s.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Sd()).add(o);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Yi.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Yi.d)(this,function(s){switch(s.label){case 0:return[4,yg(this.localStore,new Um(this.R),this.documents,this.ro.id)];case 1:t=s.sent(),e=this.co(this.documents),n=0,r=this.queries,s.label=2;case 2:return n<r.length?[4,bg(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:s.sent(),s.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Jp(Object.assign({},this.progress),t))]}})})}}();var qm=function(t){this.key=t},Bm=function(t){this.key=t},Hm=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Sd(),this.mutatedKeys=Sd(),this.lo=Th(t),this.fo=new xm(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Am,i=e?e.fo:this.fo,s=e?e.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=ph(this.query)&&i.size===this.query.limit?i.last():null,c=gh(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Ch(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(o=o.add(h),s=f?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))}),ph(this.query)||gh(this.query))for(;o.size>this.query.limit;){var l=ph(this.query)?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var s=t.mo.jr();s.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jc()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var o=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==s.length||u?{snapshot:new km(this.query,t.fo,i,s,t.mutatedKeys,0===a,u,!1),To:o}:{To:o}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Am,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Sd(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Bm(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new qm(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Sd();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return km.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),zm=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Km=function(t){this.key=t,this.bo=!1},$m=function(){function t(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new Vp(function(t){return Sh(t)},Eh),this.Vo=new Map,this.So=new Set,this.Do=new hd(xl.comparator),this.Co=new Map,this.No=new _g,this.xo={},this.Fo=new Map,this.ko=Ip.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Gm(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i,s,o;return Object(Yi.d)(this,function(a){switch(a.label){case 0:return n=Ey(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,hg(n.localStore,_h(e))];case 2:return s=a.sent(),o=n.sharedClientState.addLocalQueryTarget(s.targetId),[4,Wm(n,e,s.targetId,"current"===o)];case 3:r=a.sent(),n.isPrimaryClient&&rm(n.remoteStore,s),a.label=4;case 4:return[2,r]}})})}function Wm(t,e,n,r){return Object(Yi.b)(this,void 0,void 0,function(){var i,s,o,a,u,c;return Object(Yi.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Yi.b)(this,void 0,void 0,function(){var i,s,o;return Object(Yi.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,fg(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s),[2,(ay(t,e.targetId,o.To),o.snapshot)]}})})}(t,e,n,r)},[4,fg(t.localStore,e,!0)];case 1:return i=l.sent(),s=new Hm(e,i.Bn),o=s._o(i.documents),a=Id.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a),ay(t,n,u.To),c=new zm(e,n,s),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Qm(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Yi.d)(this,function(s){switch(s.label){case 0:return n=el(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Eh(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,dg(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),im(n.remoteStore,r.targetId),sy(n,r.targetId)}).catch(jp)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return sy(n,r.targetId),[4,dg(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function Ym(t,e,n){return Object(Yi.b)(this,void 0,void 0,function(){var r,i,s,o;return Object(Yi.d)(this,function(a){switch(a.label){case 0:r=Sy(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=el(t),i=al.now(),s=e.reduce(function(t,e){return t.add(e.key)},Sd());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,s).next(function(s){n=s;for(var o=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Yh(c,n.get(c.key));null!=l&&o.push(new td(c.key,l,Hl(l.toProto().mapValue),Kh.exists(!0)))}return r._n.addMutationBatch(t,i,o,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new hd(il)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,ly(r,i.changes)];case 3:return a.sent(),[4,mm(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),o=Im(s,"Failed to persist write"),n.reject(o),[3,6];case 6:return[2]}})})}function Zm(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r;return Object(Yi.d)(this,function(i){switch(i.label){case 0:n=el(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ug(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(tl(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?tl(r.bo):t.removedDocuments.size>0&&(tl(r.bo),r.bo=!1))}),[4,ly(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,jp(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Xm(t,e,n){var r=el(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=el(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,s=n.listeners;i<s.length;i++)s[i].zr(e)&&(r=!0)}),r&&Lm(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Jm(t,e,n){return Object(Yi.b)(this,void 0,void 0,function(){var r,i,s,o,a,u;return Object(Yi.d)(this,function(c){switch(c.label){case 0:return(r=el(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(s=i&&i.key)?(o=(o=new hd(xl.comparator)).insert(s,zl.newNoDocument(s,ul.min())),a=Sd().add(s),u=new Td(ul.min(),new Map,new pd(il),o,a),[4,Zm(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(s),r.Co.delete(e),cy(r),[3,4];case 2:return[4,dg(r.localStore,e,!1).then(function(){return sy(r,e,n)}).catch(jp)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function ty(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Yi.d)(this,function(s){switch(s.label){case 0:n=el(t),r=e.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,og(n.localStore,e)];case 2:return i=s.sent(),iy(n,r,null),ry(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ly(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,jp(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function ey(t,e,n){return Object(Yi.b)(this,void 0,void 0,function(){var r,i;return Object(Yi.d)(this,function(s){switch(s.label){case 0:r=el(t),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(t,e){var n=el(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return tl(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=s.sent(),iy(r,e,n),ry(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,ly(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,jp(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function ny(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i,s,o;return Object(Yi.d)(this,function(a){switch(a.label){case 0:cm((n=el(t)).remoteStore)||Qc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=el(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return s=a.sent(),o=Im(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(o),[3,4];case 4:return[2]}})})}function ry(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function iy(t,e,n){var r=el(t),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function sy(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var s=i[r];t.Po.delete(s),n&&t.vo.Mo(s,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||oy(t,e)})}function oy(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(im(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),cy(t))}function ay(t,e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof qm?(t.No.addReference(s.key,e),uy(t,s)):s instanceof Bm?(Qc("SyncEngine","Document no longer in limbo: "+s.key),t.No.removeReference(s.key,e),t.No.containsKey(s.key)||oy(t,s.key)):Jc()}}function uy(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Qc("SyncEngine","New document in limbo: "+n),t.So.add(r),cy(t))}function cy(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new xl(fl.fromString(e)),r=t.ko.next();t.Co.set(r,new Km(n)),t.Do=t.Do.insert(n,r),rm(t.remoteStore,new Jf(_h(fh(n.path)),r,2,zc.o))}}function ly(t,e,n){return Object(Yi.b)(this,void 0,void 0,function(){var r,i,s,o;return Object(Yi.d)(this,function(a){switch(a.label){case 0:return r=el(t),i=[],s=[],o=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){o.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=eg.Pn(a.targetId,t);s.push(e)}}))}),[4,Promise.all(o)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c;return Object(Yi.d)(this,function(l){switch(l.label){case 0:n=el(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Vf.forEach(e,function(e){return Vf.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Vf.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!zf(r=l.sent()))throw r;return Qc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=(o=s[i]).targetId,o.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,s)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function hy(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r;return Object(Yi.d)(this,function(i){switch(i.label){case 0:return(n=el(t)).currentUser.isEqual(e)?[3,3]:(Qc("SyncEngine","User change. New user:",e.toKey()),[4,sg(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new $c(Kc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,ly(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function dy(t,e){var n=el(t),r=n.Co.get(e);if(r&&r.bo)return Sd().add(r.key);var i=Sd(),s=n.Vo.get(e);if(!s)return i;for(var o=0,a=s;o<a.length;o++){var u=n.Po.get(a[o]);i=i.unionWith(u.view.wo)}return i}function fy(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Yi.d)(this,function(s){switch(s.label){case 0:return[4,fg((n=el(t)).localStore,e.query,!0)];case 1:return r=s.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&ay(n,e.targetId,i.To),i)]}})})}function py(t){return Object(Yi.b)(this,void 0,void 0,function(){var e;return Object(Yi.d)(this,function(n){return[2,gg((e=el(t)).localStore).then(function(t){return ly(e,t)})]})})}function gy(t,e,n,r){return Object(Yi.b)(this,void 0,void 0,function(){var i,s;return Object(Yi.d)(this,function(o){switch(o.label){case 0:return[4,function(t,e){var n=el(t),r=el(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Vf.resolve(null)})})}((i=el(t)).localStore,e)];case 1:return null===(s=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,mm(i.remoteStore)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(iy(i,e,r||null),ry(i,e),function(t,e){el(el(t)._n).Gt(e)}(i.localStore,e)):Jc(),o.label=4;case 4:return[4,ly(i,s)];case 5:return o.sent(),[3,7];case 6:Qc("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}})})}function my(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return Object(Yi.d)(this,function(c){switch(c.label){case 0:return Ey(n=el(t)),Sy(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,yy(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,Sm(n.remoteStore,!0)];case 2:for(c.sent(),s=0,o=i;s<o.length;s++)rm(n.remoteStore,o[s]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return sy(n,e),dg(n.localStore,e,!0)}),im(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,yy(n,a)];case 5:return c.sent(),function(t){var e=el(t);e.Co.forEach(function(t,n){im(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new hd(xl.comparator)}(n),n.Oo=!1,[4,Sm(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function yy(t,e,n){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,d,f,p;return Object(Yi.d)(this,function(g){switch(g.label){case 0:n=el(t),r=[],i=[],s=0,o=e,g.label=1;case 1:return s<o.length?(u=void 0,(c=n.Vo.get(a=o[s]))&&0!==c.length?[4,hg(n.localStore,_h(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,fy(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,pg(n.localStore,a)];case 8:return p=g.sent(),[4,hg(n.localStore,p)];case 9:return u=g.sent(),[4,Wm(n,by(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function by(t){return dh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function vy(t){var e=el(t);return el(el(e.localStore).persistence).fn()}function _y(t,e,n,r){return Object(Yi.b)(this,void 0,void 0,function(){var i,s,o;return Object(Yi.d)(this,function(a){switch(a.label){case 0:return(i=el(t)).Oo?(Qc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,gg(i.localStore)];case 3:return s=a.sent(),o=Td.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,ly(i,s,o)];case 4:return a.sent(),[3,8];case 5:return[4,dg(i.localStore,e,!0)];case 6:return a.sent(),sy(i,e,r),[3,8];case 7:Jc(),a.label=8;case 8:return[2]}})})}function wy(t,e,n){return Object(Yi.b)(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h;return Object(Yi.d)(this,function(d){switch(d.label){case 0:if(!(r=Ey(t)).Oo)return[3,10];i=0,s=e,d.label=1;case 1:return i<s.length?r.Vo.has(o=s[i])?(Qc("SyncEngine","Adding an already active target "+o),[3,5]):[4,pg(r.localStore,o)]:[3,6];case 2:return a=d.sent(),[4,hg(r.localStore,a)];case 3:return u=d.sent(),[4,Wm(r,by(a),u.targetId,!1)];case 4:d.sent(),rm(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Yi.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,dg(r.localStore,t,!1).then(function(){im(r.remoteStore,t),sy(r,t)}).catch(jp)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Ey(t){var e=el(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jm.bind(null,e),e.vo._r=Pm.bind(null,e.eventManager),e.vo.Mo=Mm.bind(null,e.eventManager),e}function Sy(t){var e=el(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ty.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ey.bind(null,e),e}var Oy=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(e){switch(e.label){case 0:return this.R=Gg(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return ig(this.persistence,new ng,t.initialUser,this.R)},t.prototype.qo=function(t){return new Tg(xg.bs,this.R)},t.prototype.Bo=function(t){return new Vg},t.prototype.terminate=function(){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Cy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Yi.c)(e,t),e.prototype.initialize=function(e){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,mg(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Sy(this.Ko.syncEngine)];case 4:return n.sent(),[4,mm(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return ig(this.persistence,new ng,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Pp(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Xp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?vp.withCacheSize(this.cacheSizeBytes):vp.DEFAULT;return new Qp(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Kg(),$g(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Vg},e}(Oy),Ty=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Yi.c)(e,t),e.prototype.initialize=function(e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r=this;return Object(Yi.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Fg?(this.sharedClientState.syncEngine={ui:gy.bind(null,n),ai:_y.bind(null,n),hi:wy.bind(null,n),fn:vy.bind(null,n),ci:py.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Yi.b)(r,void 0,void 0,function(){return Object(Yi.d)(this,function(e){switch(e.label){case 0:return[4,my(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Kg();if(!Fg.yt(e))throw new $c(Kc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Xp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Fg(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Cy),Iy=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n=this;return Object(Yi.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Xm(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=hy.bind(null,this.syncEngine),[4,Sm(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new jm},t.prototype.createDatastore=function(t){var e=Gg(t.databaseInfo.databaseId),n=new zg(t.databaseInfo);return function(t,e,n){return new Xg(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,s,o=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Xm(o.syncEngine,t,0)},s=qg.yt()?new qg:new Ug,new tm(e,n,r,i,s)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,s,o){var a=new $m(t,e,n,r,i,s);return o&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Yi.b)(this,void 0,void 0,function(){var e;return Object(Yi.d)(this,function(n){switch(n.label){case 0:return e=el(t),Qc("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,nm(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),xy=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Ay=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Ff,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Yi.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Yi.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Vm(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Yi.b)(this,void 0,void 0,function(){var t,e;return Object(Yi.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Yi.b)(this,void 0,void 0,function(){var e;return Object(Yi.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Yi.b)(this,void 0,void 0,function(){var t,e;return Object(Yi.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Yi.b)(this,void 0,void 0,function(){var e,n=this;return Object(Yi.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new $c(Kc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i,s,o,a;return Object(Yi.d)(this,function(u){switch(u.label){case 0:return n=el(t),r=Wd(n.R)+"/documents",i={documents:e.map(function(t){return zd(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return s=u.sent(),o=new Map,s.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){tl(!!e.found);var n=Kd(t,e.found.name),r=qd(e.found.updateTime),i=new Bl({mapValue:{fields:e.found.fields}});return zl.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){tl(!!e.missing),tl(!!e.readTime);var n=Kd(t,e.missing),r=qd(e.readTime);return zl.newNoDocument(n,r)}(t,e):Jc()}(n.R,t);o.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=o.get(t.toString());tl(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new od(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Yi.b)(this,void 0,void 0,function(){var t,e=this;return Object(Yi.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=xl.fromPath(n);e.mutations.push(new ad(r,e.precondition(r)))}),[4,function(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Yi.d)(this,function(s){switch(s.label){case 0:return n=el(t),r=Wd(n.R)+"/documents",i={writes:e.map(function(t){return Xd(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return s.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Jc();e=ul.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new $c(Kc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Kh.updateTime(e):Kh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ul.min()))throw new $c(Kc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kh.updateTime(e)}return Kh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),ky=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Wg(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Yi.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Yi.d)(this,function(r){return t=new Ay(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Cl(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!cd(e)}return!1},t}(),Ny=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Ag.UNAUTHENTICATED,this.clientId=rl.u(),this.credentialListener=function(){},this.receivedInitialUser=new Ff,this.credentials.setChangeListener(function(t){Qc("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new $c(Kc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Ff;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Yi.b)(t,void 0,void 0,function(){var t,n;return Object(Yi.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Im(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function jy(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Yi.d)(this,function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Qc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Yi.b)(i,void 0,void 0,function(){return Object(Yi.d)(this,function(t){switch(t.label){case 0:return[4,sg(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Dy(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r;return Object(Yi.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Ry(t)];case 1:return n=i.sent(),Qc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Yi.b)(this,void 0,void 0,function(){var n,r;return Object(Yi.d)(this,function(i){switch(i.label){case 0:return(n=el(t)).asyncQueue.verifyOperationInProgress(),Qc("RemoteStore","RemoteStore received new credentials"),r=cm(n),n.$r.add(3),[4,nm(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,em(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Ry(t){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Qc("FirestoreClient","Using default OfflineComponentProvider"),[4,jy(t,new Oy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Py(t){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Qc("FirestoreClient","Using default OnlineComponentProvider"),[4,Dy(t,new Iy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function My(t){return Ry(t).then(function(t){return t.persistence})}function Ly(t){return Ry(t).then(function(t){return t.localStore})}function Fy(t){return Py(t).then(function(t){return t.remoteStore})}function Vy(t){return Py(t).then(function(t){return t.syncEngine})}function Uy(t){return Object(Yi.b)(this,void 0,void 0,function(){var e,n;return Object(Yi.d)(this,function(r){switch(r.label){case 0:return[4,Py(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Gm.bind(null,e.syncEngine),n.onUnlisten=Qm.bind(null,e.syncEngine),n)]}})})}function qy(t,e,n){var r=this;void 0===n&&(n={});var i=new Ff;return t.asyncQueue.enqueueAndForget(function(){return Object(Yi.b)(r,void 0,void 0,function(){var r;return Object(Yi.d)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new xy({next:function(s){e.enqueueAndForget(function(){return Rm(t,o)});var a=s.docs.has(n);!a&&s.fromCache?i.reject(new $c(Kc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new $c(Kc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:function(t){return i.reject(t)}}),o=new Fm(fh(n.path),s,{includeMetadataChanges:!0,so:!0});return Dm(t,o)},[4,Uy(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function By(t,e,n){var r=this;void 0===n&&(n={});var i=new Ff;return t.asyncQueue.enqueueAndForget(function(){return Object(Yi.b)(r,void 0,void 0,function(){var r;return Object(Yi.d)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new xy({next:function(n){e.enqueueAndForget(function(){return Rm(t,o)}),n.fromCache&&"server"===r.source?i.reject(new $c(Kc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),o=new Fm(n,s,{includeMetadataChanges:!0,so:!0});return Dm(t,o)},[4,Uy(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Hy=function(t,e,n,r,i,s,o){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o},zy=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Ky=new Map,$y=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Gy=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Ag.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Wy=function(){function t(t){var e=this;this.oc=null,this.currentUser=Ag.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Qc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(tl("string"==typeof n.accessToken),new $y(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return tl(null===t||"string"==typeof t),new Ag(t)},t}(),Qy=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=Ag.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Yy=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Qy(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(Ag.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Zy(t,e,n){if(!n)throw new $c(Kc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Xy(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new $c(Kc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Jy(t,e,n,r){if(!0===e&&!0===r)throw new $c(Kc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function tb(t){if(!xl.isDocumentKey(t))throw new $c(Kc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function eb(t){if(xl.isDocumentKey(t))throw new $c(Kc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function nb(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Jc()}function rb(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $c(Kc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=nb(t);throw new $c(Kc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function ib(t,e){if(e<=0)throw new $c(Kc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var sb=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new $c(Kc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new $c(Kc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Jy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),ob=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new sb({}),this._settingsFrozen=!1,t instanceof zy?(this._databaseId=t,this._credentials=new Gy):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new $c(Kc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zy(t.options.projectId)}(t),this._credentials=new Wy(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new $c(Kc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new $c(Kc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sb(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Gy;switch(t.type){case"gapi":var e=t.client;return tl(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Yy(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new $c(Kc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Ky.get(this))&&(Qc("ComponentProvider","Removing Datastore"),Ky.delete(this),t.terminate()),Promise.resolve();var t},t}(),ab=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new cb(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ub=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),cb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,fh(r))||this)._path=r,i.type="collection",i}return Object(Yi.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new ab(this.firestore,null,new xl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ub);function lb(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Us.g)(t),Zy("collection","path",e),t instanceof ob)return eb(n=fl.fromString.apply(fl,Object(Yi.f)([e],r))),new cb(t,null,n);if(!(t instanceof ab||t instanceof cb))throw new $c(Kc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return eb(n=fl.fromString.apply(fl,Object(Yi.f)([t.path],r)).child(fl.fromString(e))),new cb(t.firestore,null,n)}function hb(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Us.g)(t),1===arguments.length&&(e=rl.u()),Zy("doc","path",e),t instanceof ob)return tb(n=fl.fromString.apply(fl,Object(Yi.f)([e],r))),new ab(t,null,new xl(n));if(!(t instanceof ab||t instanceof cb))throw new $c(Kc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return tb(n=t._path.child(fl.fromString.apply(fl,Object(Yi.f)([e],r)))),new ab(t.firestore,t instanceof cb?t._converter:null,new xl(n))}function db(t,e){return t=Object(Us.g)(t),e=Object(Us.g)(e),(t instanceof ab||t instanceof cb)&&(e instanceof ab||e instanceof cb)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function fb(t,e){return t=Object(Us.g)(t),e=Object(Us.g)(e),t instanceof ub&&e instanceof ub&&t.firestore===e.firestore&&Eh(t._query,e._query)&&t._converter===e._converter}var pb=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Wg(this,"async_queue_retry"),this.Ec=function(){var e=$g();e&&Qc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=$g();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=$g();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Yi.b)(this,void 0,void 0,function(){var t,e=this;return Object(Yi.d)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!zf(t=n.sent()))throw t;return Qc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,Yc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=Tm.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Jc()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Yi.b)(this,void 0,void 0,function(){var t;return Object(Yi.d)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function gb(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Ff,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var mb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new pb,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Yi.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||bb(this),this._firestoreClient.terminate()},e}(ob);function yb(t){return t._firestoreClient||bb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function bb(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Hy(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Ny(t._credentials,t._queue,r)}function vb(t,e,n){var r=this,i=new Ff;return t.asyncQueue.enqueue(function(){return Object(Yi.b)(r,void 0,void 0,function(){var r;return Object(Yi.d)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,jy(t,n)];case 1:return s.sent(),[4,Dy(t,e)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Kc.FAILED_PRECONDITION||t.code===Kc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=s.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function _b(t){if(t._initialized||t._terminated)throw new $c(Kc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var wb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new $c(Kc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gl(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Eb=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(yl.fromBase64String(e))}catch(e){throw new $c(Kc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(yl.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Sb=function(t){this._methodName=t},Ob=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new $c(Kc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new $c(Kc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return il(this._lat,t._lat)||il(this._long,t._long)},t}(),Cb=/^__.*__$/,Tb=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new td(t,this.data,this.fieldMask,e,this.fieldTransforms):new Jh(t,this.data,e,this.fieldTransforms)},t}(),Ib=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new td(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function xb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jc()}}var Ab=function(){function t(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Qb(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(xb(this.Dc)&&Cb.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),kb=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Gg(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new Ab({Dc:t,methodName:e,Lc:n,path:gl.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Nb(t){var e=t._freezeSettings(),n=Gg(t._databaseId);return new kb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jb(t,e,n,r,i,s){void 0===s&&(s={});var o=t.Bc(s.merge||s.mergeFields?2:0,e,n,i);Kb("Data must be an object, but it was:",o,r);var a,u,c=Hb(r,o);if(s.merge)a=new ml(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){for(var l=[],h=0,d=s.mergeFields;h<d.length;h++){var f=$b(e,d[h],n);if(!o.contains(f))throw new $c(Kc.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Yb(l,f)||l.push(f)}a=new ml(l),u=o.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=o.fieldTransforms;return new Tb(new Bl(c),a,u)}var Db=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Yi.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Sb);function Rb(t,e,n){return new Ab({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Pb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Yi.c)(e,t),e.prototype._toFieldTransform=function(t){return new Hh(t.path,new Ph)},e.prototype.isEqual=function(t){return t instanceof e},e}(Sb),Mb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Yi.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Rb(this,t,!0),n=this.qc.map(function(t){return Bb(t,e)}),r=new Mh(n);return new Hh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Sb),Lb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Yi.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Rb(this,t,!0),n=this.qc.map(function(t){return Bb(t,e)}),r=new Fh(n);return new Hh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Sb),Fb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Yi.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Uh(t.R,kh(t.R,this.Uc));return new Hh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Sb);function Vb(t,e,n,r){var i=t.Bc(1,e,n);Kb("Data must be an object, but it was:",i,r);var s=[],o=Bl.empty();ll(r,function(t,r){var a=Wb(e,t,n);r=Object(Us.g)(r);var u=i.kc(a);if(r instanceof Db)s.push(a);else{var c=Bb(r,u);null!=c&&(s.push(a),o.set(a,c))}});var a=new ml(s);return new Ib(o,a,i.fieldTransforms)}function Ub(t,e,n,r,i,s){var o=t.Bc(1,e,n),a=[$b(e,r,n)],u=[i];if(s.length%2!=0)throw new $c(Kc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<s.length;c+=2)a.push($b(e,s[c])),u.push(s[c+1]);for(var l=[],h=Bl.empty(),d=a.length-1;d>=0;--d)if(!Yb(l,a[d])){var f=a[d],p=u[d];p=Object(Us.g)(p);var g=o.kc(f);if(p instanceof Db)l.push(f);else{var m=Bb(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new ml(l);return new Ib(h,y,o.fieldTransforms)}function qb(t,e,n,r){return void 0===r&&(r=!1),Bb(n,t.Bc(r?4:3,e))}function Bb(t,e){if(zb(t=Object(Us.g)(t)))return Kb("Unsupported field value:",e,t),Hb(t,e);if(t instanceof Sb)return function(t,e){if(!xb(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,s=t;i<s.length;i++){var o=Bb(s[i],e.Oc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Us.g)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return kh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=al.fromDate(t);return{timestampValue:Fd(e.R,n)}}if(t instanceof al)return n=new al(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Fd(e.R,n)};if(t instanceof Ob)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Eb)return{bytesValue:Vd(e.R,t._byteString)};if(t instanceof ab){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Bd(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+nb(t))}(t,e)}function Hb(t,e){var n={};return hl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ll(t,function(t,r){var i=Bb(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function zb(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof al||t instanceof Ob||t instanceof Eb||t instanceof ab||t instanceof Sb)}function Kb(t,e,n){if(!zb(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=nb(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function $b(t,e,n){if((e=Object(Us.g)(e))instanceof wb)return e._internalPath;if("string"==typeof e)return Wb(t,e);throw Qb("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Gb=new RegExp("[~\\*/\\[\\]]");function Wb(t,e,n){if(e.search(Gb)>=0)throw Qb("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(wb.bind.apply(wb,Object(Yi.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Qb("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Qb(t,e,n,r,i){var s=r&&!r.isEmpty(),o=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(s||o)&&(u+=" (found",s&&(u+=" in field "+r),o&&(u+=" in document "+i),u+=")"),new $c(Kc.INVALID_ARGUMENT,(a+=". ")+t+u)}function Yb(t,e){return t.some(function(t){return t.isEqual(e)})}var Zb=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ab(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Xb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Jb("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Xb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Yi.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Zb);function Jb(t,e){return"string"==typeof e?Wb(t,e):e instanceof wb?e._internalPath:e._delegate._internalPath}var tv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ev=function(t){function e(e,n,r,i,s,o){var a=this;return(a=t.call(this,e,n,r,i,o)||this)._firestore=e,a._firestoreImpl=e,a.metadata=s,a}return Object(Yi.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new nv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Jb("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Zb),nv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Yi.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(ev),rv=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new tv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new nv(n._firestore,n._userDataWriter,r.key,r,new tv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new $c(Kc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new nv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new tv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new nv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new tv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,s=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(s=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:iv(e.type),doc:n,oldIndex:i,newIndex:s}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function iv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jc()}}function sv(t,e){return t instanceof ev&&e instanceof ev?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof rv&&e instanceof rv&&t._firestore===e._firestore&&fb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function ov(t){if(gh(t)&&0===t.explicitOrderBy.length)throw new $c(Kc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var av=function(){};function uv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var s=i[r];t=s._apply(t)}return t}var cv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Yi.c)(e,t),e.prototype._apply=function(t){var e=Nb(t.firestore),n=function(t,e,n,r,i,s,o){var a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new $c(Kc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s+"' queries on FieldPath.documentId().");if("in"===s||"not-in"===s){mv(o,s);for(var u=[],c=0,l=o;c<l.length;c++)u.push(gv(r,t,l[c]));a={arrayValue:{values:u}}}else a=gv(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||mv(o,s),a=qb(n,"where",o,"in"===s||"not-in"===s);var h=Yl.create(i,s,a);return function(t,e){if(e.g()){var n=yh(t);if(null!==n&&!n.isEqual(e.field))throw new $c(Kc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=mh(t);null!==r&&yv(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new $c(Kc.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new ub(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new hh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(av),lv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Yi.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new $c(Kc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new $c(Kc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ah(e,n);return function(t,e){if(null===mh(t)){var n=yh(t);null!==n&&yv(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new ub(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new hh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(av),hv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Yi.c)(e,t),e.prototype._apply=function(t){return new ub(t.firestore,t._converter,wh(t._query,this.Gc,this.zc))},e}(av),dv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Yi.c)(e,t),e.prototype._apply=function(t){var e=pv(t,this.type,this.Hc,this.Jc);return new ub(t.firestore,t._converter,function(t,e){return new hh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(av),fv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Yi.c)(e,t),e.prototype._apply=function(t){var e=pv(t,this.type,this.Hc,this.Jc);return new ub(t.firestore,t._converter,function(t,e){return new hh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(av);function pv(t,e,n,r){if(n[0]=Object(Us.g)(n[0]),n[0]instanceof Zb)return function(t,e,n,r,i){if(!r)throw new $c(Kc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var s=[],o=0,a=vh(t);o<a.length;o++){var u=a[o];if(u.field.isKeyField())s.push(Ml(e,r.key));else{var c=r.data.field(u.field);if(El(c))throw new $c(Kc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new $c(Kc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}s.push(c)}}return new sh(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Nb(t.firestore);return function(t,e,n,r,i,s){var o=t.explicitOrderBy;if(i.length>o.length)throw new $c(Kc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new $c(Kc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!bh(t)&&-1!==c.indexOf("/"))throw new $c(Kc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(fl.fromString(c));if(!xl.isDocumentKey(l))throw new $c(Kc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new xl(l);a.push(Ml(e,h))}else{var d=qb(n,r,c);a.push(d)}}return new sh(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}function gv(t,e,n){if("string"==typeof(n=Object(Us.g)(n))){if(""===n)throw new $c(Kc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!bh(e)&&-1!==n.indexOf("/"))throw new $c(Kc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(fl.fromString(n));if(!xl.isDocumentKey(r))throw new $c(Kc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ml(t,new xl(r))}if(n instanceof ab)return Ml(t,n._key);throw new $c(Kc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+nb(n)+".")}function mv(t,e){if(!Array.isArray(t)||0===t.length)throw new $c(Kc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new $c(Kc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function yv(t,e,n){if(!n.isEqual(e))throw new $c(Kc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var bv=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Al(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _l(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(wl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Jc()}},t.prototype.convertObject=function(t,e){var n=this,r={};return ll(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Ob(_l(t.latitude),_l(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Sl(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ol(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=vl(t);return new al(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=fl.fromString(t);tl(pf(n));var r=new zy(n.get(1),n.get(3)),i=new xl(n.popFirst(5));return r.isEqual(e)||Yc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function vv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var _v=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Yi.c)(e,t),e.prototype.convertBytes=function(t){return new Eb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ab(this.firestore,null,e)},e}(bv),wv=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Nb(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Ev(t,this._firestore),i=vv(r._converter,e,n),s=jb(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(s.toMutation(r._key,Kh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var s,o=Ev(t,this._firestore);return s="string"==typeof(e=Object(Us.g)(e))||e instanceof wb?Ub(this._dataReader,"WriteBatch.update",o._key,e,n,r):Vb(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,Kh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Ev(t,this._firestore);return this._mutations=this._mutations.concat(new od(e._key,Kh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new $c(Kc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Ev(t,e){if((t=Object(Us.g)(t)).firestore!==e)throw new $c(Kc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Sv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Yi.c)(e,t),e.prototype.convertBytes=function(t){return new Eb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ab(this.firestore,null,e)},e}(bv);function Ov(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=rb(t,ab);var s=rb(t.firestore,mb),o=Nb(s);return Tv(s,[("string"==typeof(e=Object(Us.g)(e))||e instanceof wb?Ub(o,"updateDoc",t._key,e,n,r):Vb(o,"updateDoc",t._key,e)).toMutation(t._key,Kh.exists(!0))])}function Cv(t){for(var e,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];t=Object(Us.g)(t);var o={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||gb(i[a])||(o=i[a],a++);var u,c,l,h={includeMetadataChanges:o.includeMetadataChanges};if(gb(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof ab)c=rb(t.firestore,mb),l=fh(t._key.path),u={next:function(e){i[a]&&i[a](Iv(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=rb(t,ub);c=rb(f.firestore,mb),l=f._query;var p=new Sv(c);u={next:function(t){i[a]&&i[a](new rv(c,p,f,t))},error:i[a+1],complete:i[a+2]},ov(t._query)}return function(t,e,n,r){var i=this,s=new xy(r),o=new Fm(e,s,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Yi.b)(i,void 0,void 0,function(){var e;return Object(Yi.d)(this,function(n){switch(n.label){case 0:return e=Dm,[4,Uy(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})}),function(){s.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Yi.b)(i,void 0,void 0,function(){var e;return Object(Yi.d)(this,function(n){switch(n.label){case 0:return e=Rm,[4,Uy(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})})}}(yb(c),l,h,u)}function Tv(t,e){return function(t,e){var n=this,r=new Ff;return t.asyncQueue.enqueueAndForget(function(){return Object(Yi.b)(n,void 0,void 0,function(){var n;return Object(Yi.d)(this,function(i){switch(i.label){case 0:return n=Ym,[4,Vy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(yb(t),e)}function Iv(t,e,n){var r=n.docs.get(e._key),i=new Sv(t);return new ev(t,i,e._key,r,new tv(n.hasPendingWrites,n.fromCache),e._converter)}var xv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Yi.c)(e,t),e.prototype.get=function(e){var n=this,r=Ev(e,this._firestore),i=new Sv(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new ev(n._firestore,i,r._key,t._document,new tv(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Nb(t)}return t.prototype.get=function(t){var e=this,n=Ev(t,this._firestore),r=new _v(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Jc();var i=t[0];if(i.isFoundDocument())return new Zb(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new Zb(e._firestore,r,n._key,null,n._converter);throw Jc()})},t.prototype.set=function(t,e,n){var r=Ev(t,this._firestore),i=vv(r._converter,e,n),s=jb(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,s),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s,o=Ev(t,this._firestore);return s="string"==typeof(e=Object(Us.g)(e))||e instanceof wb?Ub(this._dataReader,"Transaction.update",o._key,e,n,r):Vb(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,s),this},t.prototype.delete=function(t){var e=Ev(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Av(){if("undefined"==typeof Uint8Array)throw new $c(Kc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function kv(){if("undefined"==typeof atob)throw new $c(Kc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Nv=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return kv(),new t(Eb.fromBase64String(e))},t.fromUint8Array=function(e){return Av(),new t(Eb.fromUint8Array(e))},t.prototype.toBase64=function(){return kv(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Av(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),jv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){_b(t=rb(t,mb));var n=yb(t),r=t._freezeSettings(),i=new Iy;return vb(n,i,new Cy(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){_b(t=rb(t,mb));var e=yb(t),n=t._freezeSettings(),r=new Iy;return vb(e,r,new Ty(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new $c(Kc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ff;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Yi.b)(e,void 0,void 0,function(){var e;return Object(Yi.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Yi.b)(this,void 0,void 0,function(){return Object(Yi.d)(this,function(e){switch(e.label){case 0:return qf.yt()?[4,qf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Xp(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Dv=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof zy||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=rb(t,ob))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Zc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Yi.b)(e,void 0,void 0,function(){var e,n;return Object(Yi.d)(this,function(r){switch(r.label){case 0:return[4,My(t)];case 1:return e=r.sent(),[4,Fy(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=el(t);return e.$r.delete(0),em(e)}(n))]}})})})}(yb(rb(this._delegate,mb)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Yi.b)(e,void 0,void 0,function(){var e,n;return Object(Yi.d)(this,function(r){switch(r.label){case 0:return[4,My(t)];case 1:return e=r.sent(),[4,Fy(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Yi.b)(this,void 0,void 0,function(){var e;return Object(Yi.d)(this,function(n){switch(n.label){case 0:return(e=el(t)).$r.add(0),[4,nm(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(yb(rb(this._delegate,mb)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Jy("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Ff;return t.asyncQueue.enqueueAndForget(function(){return Object(Yi.b)(e,void 0,void 0,function(){var e;return Object(Yi.d)(this,function(r){switch(r.label){case 0:return e=ny,[4,Vy(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(yb(rb(this._delegate,mb)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new xy(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Yi.b)(n,void 0,void 0,function(){var e;return Object(Yi.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){el(t).Gr.add(e),e.next()},[4,Uy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Yi.b)(n,void 0,void 0,function(){var e;return Object(Yi.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){el(t).Gr.delete(e)},[4,Uy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(yb(t=rb(t,mb)),gb(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new $c(Kc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Gv(this,lb(this._delegate,t))}catch(t){throw Vv(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Fv(this,hb(this._delegate,t))}catch(t){throw Vv(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new zv(this,function(t,e){if(t=rb(t,ob),Zy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $c(Kc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ub(t,null,function(t){return new hh(fl.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Vv(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Ff;return t.asyncQueue.enqueueAndForget(function(){return Object(Yi.b)(n,void 0,void 0,function(){var n;return Object(Yi.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Py(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new ky(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(yb(t),function(n){return e(new xv(t,n))})}(this._delegate,function(n){return t(new Pv(e,n))})},t.prototype.batch=function(){var t=this;return yb(this._delegate),new Mv(new wv(this._delegate,function(e){return Tv(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new $c(Kc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new $c(Kc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Rv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Yi.c)(e,t),e.prototype.convertBytes=function(t){return new Nv(new Eb(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Fv.Zc(e,this.firestore,null)},e}(bv),Pv=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Rv(t)}return t.prototype.get=function(t){var e=this,n=Wv(t);return this._delegate.get(n).then(function(t){return new Bv(e._firestore,new ev(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},t.prototype.set=function(t,e,n){var r=Wv(t);return n?(Xy("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=Wv(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,Object(Yi.f)([o,e,n],i)),this},t.prototype.delete=function(t){var e=Wv(t);return this._delegate.delete(e),this},t}(),Mv=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Wv(t);return n?(Xy("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=Wv(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,Object(Yi.f)([o,e,n],i)),this},t.prototype.delete=function(t){var e=Wv(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Lv=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new nv(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Hv(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var s=i.get(n);return s||(s=new t(e,new Rv(e),n),i.set(n,s)),s},t}();Lv.eu=new WeakMap;var Fv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Rv(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new $c(Kc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new ab(n._delegate,r,new xl(e)))},t.Zc=function(e,n,r){return new t(n,new ab(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Gv(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Gv(this.firestore,lb(this._delegate,t))}catch(t){throw Vv(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Us.g)(t))instanceof ab&&db(this._delegate,t)},t.prototype.set=function(t,e){e=Xy("DocumentReference.set",e);try{return function(t,e,n){t=rb(t,ab);var r=rb(t.firestore,mb),i=vv(t._converter,e,n);return Tv(r,[jb(Nb(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Kh.none())])}(this._delegate,t,e)}catch(t){throw Vv(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Ov(this._delegate,t):Ov.apply(void 0,Object(Yi.f)([this._delegate,t,e],n))}catch(t){throw Vv(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Tv(rb((t=this._delegate).firestore,mb),[new od(t._key,Kh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Uv(e),i=qv(e,function(e){return new Bv(t.firestore,new ev(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return Cv(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=rb(t,ab);var e=rb(t.firestore,mb),n=yb(e),r=new Sv(e);return function(t,e){var n=this,r=new Ff;return t.asyncQueue.enqueueAndForget(function(){return Object(Yi.b)(n,void 0,void 0,function(){var n;return Object(Yi.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Yi.b)(this,void 0,void 0,function(){var r,i;return Object(Yi.d)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=el(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=s.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new $c(Kc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=s.sent(),i=Im(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Ly(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new ev(e,r,t._key,n,new tv(null!==n&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=rb(t,ab);var e=rb(t.firestore,mb);return qy(yb(e),t._key,{source:"server"}).then(function(n){return Iv(e,t,n)})}(this._delegate):function(t){t=rb(t,ab);var e=rb(t.firestore,mb);return qy(yb(e),t._key).then(function(n){return Iv(e,t,n)})}(this._delegate)).then(function(t){return new Bv(e.firestore,new ev(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Lv.tu(this.firestore,e):null))},t}();function Vv(t,e,n){return t.message=t.message.replace(e,n),t}function Uv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!gb(r))return r}return{}}function qv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=gb(t[0])?t[0]:gb(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Bv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Fv(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return sv(this._delegate,t._delegate)},t}(),Hv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Yi.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Bv),zv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Rv(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,uv(this._delegate,function(t,e,n){var r=e,i=Jb("where",t);return new cv(i,r,n)}(e,n,r)))}catch(e){throw Vv(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,uv(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Jb("orderBy",t);return new lv(r,n)}(e,n)))}catch(e){throw Vv(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,uv(this._delegate,function(t){return ib("limit",t),new hv("limit",t,"F")}(e)))}catch(e){throw Vv(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,uv(this._delegate,function(t){return ib("limitToLast",t),new hv("limitToLast",t,"L")}(e)))}catch(e){throw Vv(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,uv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new dv("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Vv(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,uv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new dv("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Vv(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,uv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fv("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Vv(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,uv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fv("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Vv(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return fb(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=rb(t,ub);var e=rb(t.firestore,mb),n=yb(e),r=new Sv(e);return function(t,e){var n=this,r=new Ff;return t.asyncQueue.enqueueAndForget(function(){return Object(Yi.b)(n,void 0,void 0,function(){var n;return Object(Yi.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Yi.b)(this,void 0,void 0,function(){var r,i,s,o,a;return Object(Yi.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,fg(t,e,!0)];case 1:return a=u.sent(),r=new Hm(e,a.Bn),i=r._o(a.documents),s=r.applyChanges(i,!1),n.resolve(s.snapshot),[3,3];case 2:return o=u.sent(),a=Im(o,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Ly(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new rv(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=rb(t,ub);var e=rb(t.firestore,mb),n=yb(e),r=new Sv(e);return By(n,t._query,{source:"server"}).then(function(n){return new rv(e,r,t,n)})}(this._delegate):function(t){t=rb(t,ub);var e=rb(t.firestore,mb),n=yb(e),r=new Sv(e);return ov(t._query),By(n,t._query).then(function(n){return new rv(e,r,t,n)})}(this._delegate)).then(function(t){return new $v(e.firestore,new rv(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Uv(e),i=qv(e,function(e){return new $v(t.firestore,new rv(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Cv(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Lv.tu(this.firestore,e):null))},t}(),Kv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Hv(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),$v=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new zv(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Hv(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Kv(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Hv(n._firestore,r))})},t.prototype.isEqual=function(t){return sv(this._delegate,t._delegate)},t}(),Gv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Yi.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Fv(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Fv(this.firestore,void 0===t?hb(this._delegate):hb(this._delegate,t))}catch(t){throw Vv(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=rb(t.firestore,mb),r=hb(t),i=vv(t._converter,e);return Tv(n,[jb(Nb(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Kh.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Fv(e.firestore,t)})},e.prototype.isEqual=function(t){return db(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Lv.tu(this.firestore,t):null))},e}(zv);function Wv(t){return rb(t,ab)}var Qv,Yv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(wb.bind.apply(wb,Object(Yi.f)([void 0],t)))}return t.documentId=function(){return new t(gl.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Us.g)(t))instanceof wb&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Zv=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Pb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Db("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Mb("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lb("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Fb("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Xv=n("/6Yf"),Jv={Firestore:Dv,GeoPoint:Ob,Timestamp:al,Blob:Nv,Transaction:Pv,WriteBatch:Mv,DocumentReference:Fv,DocumentSnapshot:Bv,Query:zv,QueryDocumentSnapshot:Hv,QuerySnapshot:$v,CollectionReference:Gv,FieldPath:Yv,FieldValue:Zv,setLogLevel:function(t){Gc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Xv.a("firestore",function(t){return function(t,e){return new Dv(t,new mb(t,e),new jv)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Jv)))})(Qv=Vs.a),Qv.registerVersion("@firebase/firestore","2.2.5");var t_=n("VRyK"),e_=n("qgXg"),n_=n("Ylt2");class r_ extends Yt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new i_(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new Zt.a;if(this.isStopped||this.hasError?s=Xe.a.EMPTY:(this.observers.push(t),s=new n_.a(this,t)),r&&t.add(t=new Ms.a(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||e_.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r}}class i_{constructor(t,e){this.time=t,this.value=e}}function s_(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new r_(t,e,r),l=i.subscribe(this),s=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}function o_(t,e){return e?ve(()=>t,e):ve(()=>t)}var a_=n("tf+s");const u_=new r.r("angularfire2.auth.use-emulator"),c_=new r.r("angularfire2.auth.settings"),l_=new r.r("angularfire2.auth.tenant-id"),h_=new r.r("angularfire2.auth.langugage-code"),d_=new r.r("angularfire2.auth.use-device-language"),f_=new r.r("angularfire.auth.persistence");let p_=(()=>{class t{constructor(t,e,r,i,s,o,a,u,c,l){const h=new Ls.d(i),d=Object(Ls.h)(h),f=new Yt.a,p=Object(Qt.a)(void 0).pipe(Object(Ms.b)(h.outsideAngular),ve(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(ye.a)(()=>Object(Ls.g)(t,i,e)),Object(ye.a)(t=>i.runOutsideAngular(()=>{const e=s,n=o;return Object(Ls.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),s_({bufferSize:1,refCount:!1}));if(gt(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Qt.a)(null);else{p.pipe(Qe()).subscribe();const t=p.pipe(ve(t=>t.getRedirectResult().then(t=>t,()=>null)),d,s_({bufferSize:1,refCount:!1})),e=t=>new se.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(ve(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(ve(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(o_(n),Object(a_.a)(h.outsideAngular),Object(Ms.b)(h.insideAngular)),this.user=t.pipe(o_(r),Object(a_.a)(h.outsideAngular),Object(Ms.b)(h.insideAngular)),this.idToken=this.user.pipe(ve(t=>t?Object(Wt.a)(t.getIdToken()):Object(Qt.a)(null))),this.idTokenResult=this.user.pipe(ve(t=>t?Object(Wt.a)(t.getIdTokenResult()):Object(Qt.a)(null))),this.credential=Object(t_.a)(t,f,this.authState.pipe(ke(t=>!t))).pipe(Object(ye.a)(t=>(null==t?void 0:t.user)?t:null),Object(a_.a)(h.outsideAngular),Object(Ms.b)(h.insideAngular))}return Object(Ls.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ls.c),r.Rb(Ls.b,8),r.Rb(r.C),r.Rb(r.A),r.Rb(u_,8),r.Rb(c_,8),r.Rb(l_,8),r.Rb(h_,8),r.Rb(d_,8),r.Rb(f_,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(Ls.c),Object(r.Rb)(Ls.b,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(u_,8),Object(r.Rb)(c_,8),Object(r.Rb)(l_,8),Object(r.Rb)(h_,8),Object(r.Rb)(d_,8),Object(r.Rb)(f_,8))},token:t,providedIn:"any"}),t})();function g_(t,e){return function(t,e=ks.b){return new se.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function m_(t,e){return g_(t,e).pipe(Object(ye.a)(t=>({payload:t,type:"query"})))}function y_(t,e){return m_(t,e).pipe(Te(void 0),Ns(),Object(ye.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const s=n.find(t=>t.doc.ref.isEqual(e.ref)),o=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(e.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function b_(t,e,n){return y_(t,n).pipe(Ie((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return v_(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return v_(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return v_(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new Rs(void 0,void 0)),Object(ye.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function v_(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function __(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(Ls.e)(p_,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class w_{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=y_(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(ye.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Te(void 0),Ns(),ke(([t,e])=>e.length>0||!t),Object(ye.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ie((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=__(t);return b_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return m_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ye.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Wt.a)(this.query.get(t)).pipe(Object(Ms.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new E_(this.ref.doc(t),this.afs)}}class E_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=x_(n,e);return new w_(r,i,this.afs)}snapshotChanges(){return g_(this.ref,this.afs.schedulers.outsideAngular).pipe(Te(void 0),Ns(),Object(ye.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(ye.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Wt.a)(this.ref.get(t)).pipe(Object(Ms.b)(this.afs.schedulers.insideAngular))}}class S_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?y_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ye.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),ke(t=>t.length>0),this.afs.keepUnstableUntilFirst):y_(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ie((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=__(t);return b_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return m_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ye.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Wt.a)(this.query.get(t)).pipe(Object(Ms.b)(this.afs.schedulers.insideAngular))}}const O_=new r.r("angularfire2.enableFirestorePersistence"),C_=new r.r("angularfire2.firestore.persistenceSettings"),T_=new r.r("angularfire2.firestore.settings"),I_=new r.r("angularfire2.firestore.use-emulator");function x_(t,e=(t=>t)){return{query:e(t),ref:t}}let A_=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u){this.schedulers=new Ls.d(s),this.keepUnstableUntilFirst=Object(Ls.h)(this.schedulers);const c=Object(Ls.g)(t,s,e);!Fs.a.auth&&u&&Object(Ls.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Ls.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=s.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!gt(i)){const e=()=>{try{return Object(Wt.a)(t.enablePersistence(o||void 0).then(()=>!0,()=>!1))}catch(Qv){return"undefined"!=typeof console&&console.warn(Qv),Object(Qt.a)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,Object(Qt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=x_(n,e),s=this.schedulers.ngZone.run(()=>r);return new w_(s,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new S_(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new E_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ls.c),r.Rb(Ls.b,8),r.Rb(O_,8),r.Rb(T_,8),r.Rb(r.C),r.Rb(r.A),r.Rb(C_,8),r.Rb(I_,8),r.Rb(u_,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(Ls.c),Object(r.Rb)(Ls.b,8),Object(r.Rb)(O_,8),Object(r.Rb)(T_,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(C_,8),Object(r.Rb)(I_,8),Object(r.Rb)(u_,8))},token:t,providedIn:"any"}),t})(),k_=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:O_,useValue:!0},{provide:C_,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[A_]}),t})(),N_=(()=>{class t{constructor(t){this.firestore=t,this.getSettings=()=>Object(Yi.b)(this,void 0,void 0,function*(){return(yield this.firestore.collection("settings").doc("settings").get().toPromise()).data()}),this.updateChannel=t=>this.firestore.collection("settings").doc("settings").update({channelId:t}),this.getFavorites=()=>Object(Yi.b)(this,void 0,void 0,function*(){return(yield this.firestore.collection("favorites").get().toPromise()).docs.map(t=>t.data())}),this.addFavorite=(t,e)=>this.firestore.collection("favorites").doc(t).set({videoId:t,snippet:e.snippet}),this.deleteFavorite=t=>this.firestore.collection("favorites").doc(t).delete(),this.clearFavorites=t=>t.forEach(t=>this.firestore.collection("favorites").doc(t.videoId).delete()),this.checkFavorite=t=>Object(Yi.b)(this,void 0,void 0,function*(){return(yield this.firestore.collection("favorites").doc(t).get().toPromise()).exists}),this.setRating=(t,e)=>this.firestore.collection("ratings").doc(t).set({rating:e}),this.getRating=t=>Object(Yi.b)(this,void 0,void 0,function*(){const e=yield this.firestore.collection("ratings").doc(t).get().toPromise();return e.exists?e.data().rating:0})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(A_))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),j_=(()=>{class t{constructor(){this.isOnline=!0,this.connectionChanged=new r.n,this.isOnline=navigator.onLine,window.addEventListener("online",()=>{this.connectionChanged.emit(!0),this.isOnline=!0}),window.addEventListener("offline",()=>{this.connectionChanged.emit(!1),this.isOnline=!1})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var D_=n("XoHu");function R_(t,e){return new se.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=Object(Wt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==r&&c||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const P_=new r.r("NgValueAccessor"),M_={provide:P_,useExisting:Object(r.U)(()=>F_),multi:!0},L_=new r.r("CompositionEventMode");let F_=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(L_,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([M_])]}),t})();const V_=new r.r("NgValidators"),U_=new r.r("NgAsyncValidators");function q_(t){return null!=t}function B_(t){const e=Object(r.rb)(t)?Object(Wt.a)(t):t;return Object(r.qb)(e),e}function H_(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function z_(t,e){return e.map(e=>e(t))}function K_(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function $_(t){return null!=t?function(t){if(!t)return null;const e=t.filter(q_);return 0==e.length?null:function(t){return H_(z_(t,e))}}(K_(t)):null}function G_(t){return null!=t?function(t){if(!t)return null;const e=t.filter(q_);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(te.a)(e))return R_(e,null);if(Object(D_.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return R_(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return R_(t=1===t.length&&Object(te.a)(t[0])?t[0]:t,null).pipe(Object(ye.a)(t=>e(...t)))}return R_(t,null)}(z_(t,e).map(B_)).pipe(Object(ye.a)(H_))}}(K_(t)):null}function W_(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let Q_=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=$_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=G_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),Y_=(()=>{class t extends Q_{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Z_(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const Z_=r.Pb(Y_);class X_ extends Q_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let J_=(()=>{class t extends class{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(X_,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();function tw(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ew(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function nw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const rw="VALID",iw="INVALID",sw="PENDING",ow="DISABLED";function aw(t){return(hw(t)?t.validators:t)||null}function uw(t){return Array.isArray(t)?$_(t):t||null}function cw(t,e){return(hw(e)?e.asyncValidators:t)||null}function lw(t){return Array.isArray(t)?G_(t):t||null}function hw(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class dw{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=uw(this._rawValidators),this._composedAsyncValidatorFn=lw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===rw}get invalid(){return this.status===iw}get pending(){return this.status==sw}get disabled(){return this.status===ow}get enabled(){return this.status!==ow}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=uw(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=lw(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=sw,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ow,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=rw,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==rw&&this.status!==sw||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ow:rw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=sw,this._hasOwnPendingAsyncValidator=!0;const e=B_(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof pw?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof gw&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?ow:this.errors?iw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sw)?sw:this._anyControlsHaveStatus(iw)?iw:rw}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){hw(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class fw extends dw{constructor(t=null,e,n){super(aw(e),cw(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){nw(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){nw(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class pw extends dw{constructor(t,e,n){super(aw(e),cw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof fw?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class gw extends dw{constructor(t,e,n){super(aw(e),cw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof fw?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const mw={provide:X_,useExisting:Object(r.U)(()=>bw)},yw=(()=>Promise.resolve(null))();let bw=(()=>{class t extends X_{constructor(t,e,n,i){super(),this.control=new fw,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===F_?n=t:Object.getPrototypeOf(t.constructor)===class{}?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var t,e;(function(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(W_(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(W_(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);{const n=()=>t.updateValueAndValidity();tw(e._rawValidators,n),tw(e._rawAsyncValidators,n)}})(t=this.control,e=this),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ew(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ew(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){yw.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;yw.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Y_,9),r.Kb(V_,10),r.Kb(U_,10),r.Kb(P_,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([mw]),r.xb,r.yb]}),t})(),vw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})(),_w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[vw]]}),t})(),ww=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[_w]}),t})();const Ew=["starMain"];var Sw;let Ow=(()=>{let t=Sw=class{constructor(){this.stars=[],this._readOnly=!1,this._totalStars=5,this.rate=new r.n,this.onStarsCountChange=new Yt.a,this.onStarsCountChange.subscribe(()=>{this.setStars(),this.generateRating(!0),this.applySizeAllStars(),this.applyColorStyleAllStars(!1),this.addEvents()}),this.onValueChange=new Yt.a,this.onValueChange.subscribe(()=>{this.generateRating(),this.applySizeAllStars()}),this.onCheckedColorChange=new Yt.a,this.onCheckedColorChange.subscribe(()=>{this.applyColorStyleAllStars(!0)}),this.onUnCheckedColorChange=new Yt.a,this.onUnCheckedColorChange.subscribe(()=>{this.applyColorStyleAllStars(!1)}),this.onSizeChange=new Yt.a,this.onSizeChange.subscribe(()=>{this.applySizeAllStars()}),this.onReadOnlyChange=new Yt.a,this.onReadOnlyChange.subscribe(()=>{this.readonly?this.makeReadOnly():this.makeEditable()})}get checkedcolor(){return this._checkedColor}get uncheckedcolor(){return this._unCheckedColor}get value(){return this._value}get size(){return this._size.concat(this._size.includes("px")?"":"px")}get readonly(){return"true"===String(this._readOnly)}get totalstars(){return this._totalStars}set checkedcolor(t){this._checkedColor=t,this._checkedColor&&this.onCheckedColorChange.next(this._checkedColor)}set uncheckedcolor(t){this._unCheckedColor=t,this._unCheckedColor&&this.onUnCheckedColorChange.next(this._unCheckedColor)}set value(t){this._value=t=t&&null!=t?t:0,this._value>=0&&this.onValueChange.next(this._value)}set size(t){this._size=t=t&&null!=t&&"0px"!=t?t:"24px",this.onSizeChange.next(this._size)}set readonly(t){this._readOnly=t,this.onReadOnlyChange.next(t)}set totalstars(t){this._totalStars=t<=0?5:Math.round(t),this.onStarsCountChange.next(this._totalStars)}makeEditable(){this.mainElement&&(this.mainElement.nativeElement.style.cursor="pointer",this.mainElement.nativeElement.title=this.value,this.stars.forEach(t=>{t.style.cursor="pointer",t.title=t.dataset.index}))}makeReadOnly(){this.mainElement&&(this.mainElement.nativeElement.style.cursor="default",this.mainElement.nativeElement.title=this.value,this.stars.forEach(t=>{t.style.cursor="default",t.title=""}))}addEvents(){this.mainElement&&(this.mainElement.nativeElement.addEventListener("mouseleave",this.offStar.bind(this)),this.mainElement.nativeElement.style.cursor="pointer",this.mainElement.nativeElement.title=this.value,this.stars.forEach(t=>{t.addEventListener("click",this.onRate.bind(this)),t.addEventListener("mouseenter",this.onStar.bind(this)),t.style.cursor="pointer",t.title=t.dataset.index}))}ngAfterViewInit(){}onRate(t){if(this.readonly)return;let e=this.value;this.value=parseInt(t.srcElement.dataset.index),this.rate.emit({oldValue:e,newValue:this.value,starRating:this})}onStar(t){if(this.readonly)return;let e=parseInt(t.srcElement.dataset.index);for(let n=0;n<e;n++)this.stars[n].className="",this.addDefaultClass(this.stars[n]),this.addCheckedStarClass(this.stars[n]);for(let n=e;n<this.stars.length;n++)this.stars[n].className="",this.addDefaultClass(this.stars[n])}offStar(t){this.generateRating()}addDefaultClass(t){t.classList.add(Sw.CLS_DEFAULT_STAR)}addCheckedStarClass(t){t.classList.add(Sw.CLS_CHECKED_STAR)}addHalfStarClass(t){t.classList.add(Sw.CLS_HALF_STAR)}setStars(){if(!this.mainElement)return;let t=this.mainElement.nativeElement,e=[...Array(Number(this.totalstars)).keys()];this.stars.length=0,t.innerHTML="",e.forEach(e=>{let n=document.createElement("span");n.dataset.index=(e+1).toString(),n.title=n.dataset.index,t.appendChild(n),this.stars.push(n)})}applySizeAllStars(){this._size&&(0==this.stars.length&&this.setStars(),this.stars.forEach(t=>{let e=this.size.match(/\d+/)[0],n=10*parseInt(e)/24,r=0-20*parseInt(e)/24;t.style.setProperty(Sw.VAR_SIZE,this.size),t.classList.contains(Sw.CLS_HALF_STAR)&&(t.style.setProperty(Sw.VAR_HALF_WIDTH,`${n}px`),t.style.setProperty(Sw.VAR_HALF_MARGIN,`${r}px`))}))}applyColorStyleAllStars(t){0==this.stars.length&&this.setStars(),this.stars.forEach(e=>{t?this.applyCheckedColorStyle(e):this.applyUnCheckedColorStyle(e)})}applyColorStyle(t){this.applyCheckedColorStyle(t),this.applyUnCheckedColorStyle(t)}applyCheckedColorStyle(t){t.style.setProperty(Sw.VAR_CHECKED_COLOR,this.checkedcolor)}applyUnCheckedColorStyle(t){t.style.setProperty(Sw.VAR_UNCHECKED_COLOR,this.uncheckedcolor)}generateRating(t=!1){if(!this.mainElement)return;if(this.readonly&&!t)return;0==this.stars.length&&this.setStars(),this.mainElement.nativeElement.title=this.value;let e=!!(Number.parseFloat(this.value.toString())%1).toString().substring(3,2),n=1;this.stars.forEach(t=>{t.className="",this.applyColorStyle(t),this.addDefaultClass(t),this.value>=n?this.addCheckedStarClass(t):e&&(this.addHalfStarClass(t),e=!1),n++})}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["star-rating"]],viewQuery:function(t,e){if(1&t&&r.kc(Ew,3),2&t){let t;r.cc(t=r.Vb())&&(e.mainElement=t.first)}},inputs:{checkedcolor:"checkedcolor",uncheckedcolor:"uncheckedcolor",value:"value",size:"size",readonly:"readonly",totalstars:"totalstars"},outputs:{rate:"rate"},decls:2,vars:0,consts:[["starMain",""]],template:function(t,e){1&t&&r.Lb(0,"div",null,0)},styles:[":root{--checkedColor:gold;--unCheckedColor:gray;--size:24px;--halfWidth:10px;--halfMargin:-20px}.star{cursor:pointer;color:var(--unCheckedColor);font-size:var(--size);width:var(--size);display:inline-block}.star:last-child{margin-right:0}.star:before{content:'\\2605'}.star.on{color:var(--checkedColor)}.star.half:after{content:'\\2605';color:var(--checkedColor);position:absolute;margin-left:var(--halfMargin);width:var(--halfWidth);overflow:hidden}"],encapsulation:3}),t.VAR_CHECKED_COLOR="--checkedColor",t.VAR_UNCHECKED_COLOR="--unCheckedColor",t.VAR_SIZE="--size",t.VAR_HALF_WIDTH="--halfWidth",t.VAR_HALF_MARGIN="--halfMargin",t.CLS_CHECKED_STAR="on",t.CLS_DEFAULT_STAR="star",t.CLS_HALF_STAR="half",t.INP_CHECKED_COLOR="checkedcolor",t.INP_UNCHECKED_COLOR="uncheckedcolor",t.INP_VALUE="value",t.INP_SIZE="size",t.INP_READONLY="readonly",t.INP_TOTALSTARS="totalstars",t})(),Cw=(()=>{let t=class{ngDoBootstrap(){}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[ww,ft]]}),t})(),Tw=(()=>{class t{transform(t,e,n){let r,i,s,o;return"ms"===e&&"hhmmss"===n?(i=Math.floor(t/1e3%60),s=Math.floor(t/6e4%60),o=Math.floor(t/36e5),this.format(n,i,s,o,r)):"s"===e&&"hhmmss"===n?(i=Math.floor(t%60),s=Math.floor(t/60%60),o=Math.floor(t/60/60),this.format(n,i,s,o,r)):"ms"!==e||"ddhhmmss"!==n&&"ddhhmmssLong"!==n?"s"!==e||"ddhhmmss"!==n&&"ddhhmmssLong"!==n?t:(i=Math.floor(t%60),s=Math.floor(t/60%60),o=Math.floor(t/60/60%24),r=Math.floor(t/60/60/24),this.format(n,i,s,o,r)):(i=Math.floor(t/1e3%60),s=Math.floor(t/6e4%60),o=Math.floor(t/36e5%24),r=Math.floor(t/864e5),this.format(n,i,s,o,r))}format(t,e,n,r,i){switch(i=i<10?"0"+i:i,r=r<10?"0"+r:r,n=n<10?"0"+n:n,e=e<10?"0"+e:e,t){case"hhmmss":return`${r}:${n}:${e}`;case"ddhhmmss":return`${i}d, ${r}h, ${n}m, ${e}s`;case"ddhhmmssLong":return`${i} days, ${r} hours, ${n} minutes, ${e} seconds`;default:return""}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Jb({name:"durationFormat",type:t,pure:!1}),t})();function Iw(t,e){1&t&&(r.Nb(0,"div",11),r.Nb(1,"div",12),r.hc(2,"loading"),r.Mb(),r.Mb())}function xw(t,e){1&t&&(r.Nb(0,"div",13),r.Lb(1,"i",14),r.Nb(2,"h3"),r.hc(3,"Invalid video"),r.Mb(),r.Nb(4,"button",15),r.hc(5,"Go back"),r.Mb(),r.Mb())}function Aw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div"),r.Nb(1,"div",16),r.Lb(2,"img",17),r.Mb(),r.Nb(3,"div",18),r.Nb(4,"div",19),r.Nb(5,"div",20),r.Nb(6,"div",21),r.Nb(7,"h5",22),r.Nb(8,"strong"),r.hc(9),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(10,"div",23),r.Nb(11,"div",24),r.Nb(12,"button",25),r.Ub("click",function(){return r.dc(t),r.Wb().toggleFavorite()}),r.hc(13),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Lb(14,"hr"),r.Nb(15,"div",19),r.Nb(16,"div",26),r.Nb(17,"div",21),r.Nb(18,"h5",27),r.Nb(19,"strong"),r.hc(20,"Rate now"),r.Mb(),r.Mb(),r.Nb(21,"star-rating",28),r.Ub("rate",function(e){return r.dc(t),r.Wb().setRating(e)}),r.Mb(),r.Mb(),r.Mb(),r.Nb(22,"div",29),r.Nb(23,"div",30),r.Nb(24,"strong"),r.hc(25,"Duration"),r.Mb(),r.hc(26),r.Xb(27,"durationFormat"),r.Mb(),r.Mb(),r.Nb(28,"div",29),r.Nb(29,"div",31),r.Lb(30,"i",32),r.Nb(31,"strong",33),r.hc(32),r.Mb(),r.Lb(33,"i",34),r.Nb(34,"strong"),r.hc(35),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Lb(36,"hr"),r.Nb(37,"div",19),r.Nb(38,"div",35),r.Nb(39,"div",21),r.Nb(40,"p",36),r.Nb(41,"strong"),r.hc(42),r.Xb(43,"date"),r.Mb(),r.Mb(),r.Nb(44,"p",37),r.hc(45),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=r.Wb();r.Ab(2),r.ac("src",t.video.snippet.thumbnails.maxres.url||t.video.snippet.thumbnails.medium.url,r.ec),r.Ab(7),r.ic(t.video.snippet.title),r.Ab(3),r.Cb("btn-danger",!t.isFavorited)("btn-outline-secondary",t.isFavorited),r.Ab(1),r.jc(" ",t.isFavorited?"Remove favorite":"Add to favorite"," "),r.Ab(8),r.ac("value",t.rating)("totalstars",5),r.Ab(5),r.jc(" ",r.Zb(27,14,t.durationToSeconds(t.video.contentDetails.duration),"s","hhmmss")," "),r.Ab(6),r.ic(t.formatNumber(t.video.statistics.viewCount)),r.Ab(3),r.ic(t.formatNumber(t.video.statistics.likeCount)),r.Ab(7),r.jc("Published on ",r.Yb(43,18,t.video.snippet.publishedAt,"MMMM d, yyyy"),""),r.Ab(3),r.ic(t.video.snippet.description)}}const kw=function(){return[""]},Nw=function(){return["/favorites"]};let jw=(()=>{class t{constructor(t,e,n,r){this.route=t,this.api=e,this.db=n,this.connection=r,this.isLoading=!0,this.isFavorited=!1,this.rating=0,this.getVideo=()=>{this.api.getOneVideo(this.videoId).subscribe(t=>Object(Yi.b)(this,void 0,void 0,function*(){this.isFavorited=yield this.db.checkFavorite(this.videoId),this.rating=yield this.db.getRating(this.videoId),this.isLoading=!1,t.items.length>0&&(this.video=t.items[0])}))},this.toggleFavorite=()=>{this.isFavorited?this.db.deleteFavorite(this.videoId):this.db.addFavorite(this.videoId,this.video),this.isFavorited=!this.isFavorited},this.setRating=t=>{this.db.setRating(this.videoId,t.newValue)},this.durationToSeconds=t=>{var e=t.match(/PT(\d+H)?(\d+M)?(\d+S)?/);const n=null==e?void 0:e.slice(1).map(t=>null!=t?t.replace(/\D/,""):null);return 3600*parseInt(n&&n[0]?n[0]:"0")+60*parseInt(n&&n[1]?n[1]:"0")+parseInt(n&&n[2]?n[2]:"0")},this.formatNumber=t=>(new Intl.NumberFormat).format(parseInt(t))}ngOnInit(){this.videoId=this.route.snapshot.params.id,this.getVideo(),this.connection.connectionChanged.subscribe(t=>{t&&this.isLoading&&this.getVideo()})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ar),r.Kb(As),r.Kb(N_),r.Kb(j_))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-details"]],decls:11,vars:8,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","fixed-top"],[1,"container"],[1,"navbar-brand",3,"routerLink"],["src","assets/logo.png","alt","logo","height","30",1,"d-flex","align-self-center"],[1,"d-flex"],["type","button",1,"btn","btn-light","btn-circle","w-50","h-50","d-flex","align-items-center","justify-content-center",3,"routerLink","disabled"],[1,"fas","fa-heart"],[1,"container","navbar-top-fix","no-breakpoints","pr-0","pl-0","mb-5"],["class","loader-container",4,"ngIf"],["class","no-data",4,"ngIf"],[4,"ngIf"],[1,"loader-container"],[1,"loader"],[1,"no-data"],[1,"fas","fa-video-slash"],["type","button","routerLink","..",1,"btn","btn-danger","mt-2"],[1,"feature-container"],["alt","video feature",1,"img-feature",3,"src"],[1,"pl-3","pr-3"],[1,"row"],[1,"col-md-9"],[1,"p-3"],[1,"mb-0","mt-2"],[1,"col","align-self-end"],[1,"p-3","d-flex","justify-content-end"],["type","button",1,"btn","btn-danger",3,"click"],[1,"col-md-4"],[1,"mb-0","mt-2","d-inline-block","mr-2"],["checkedcolor","red","uncheckedcolor","#FDDBD9","size","24px",1,"d-inline-block",3,"value","totalstars","rate"],[1,"col"],[1,"p-3","mt-2","duration-container"],[1,"p-3","mt-2","d-flex","justify-content-end"],[1,"fas","fa-eye","mr-2",2,"line-height","24px"],[1,"mr-4"],[1,"fas","fa-thumbs-up","mr-2",2,"line-height","22px"],[1,"col-12"],[1,"text-danger"],[1,"mb-0"]],template:function(t,e){1&t&&(r.Nb(0,"nav",0),r.Nb(1,"div",1),r.Nb(2,"a",2),r.Lb(3,"img",3),r.Mb(),r.Nb(4,"div",4),r.Nb(5,"button",5),r.Lb(6,"i",6),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(7,"div",7),r.gc(8,Iw,3,0,"div",8),r.gc(9,xw,6,0,"div",9),r.gc(10,Aw,46,21,"div",10),r.Mb()),2&t&&(r.Ab(2),r.ac("routerLink",r.bc(6,kw)),r.Ab(3),r.ac("routerLink",r.bc(7,Nw))("disabled",!e.connection.isOnline),r.Ab(3),r.ac("ngIf",e.isLoading),r.Ab(1),r.ac("ngIf",!e.isLoading&&!e.video),r.Ab(1),r.ac("ngIf",!e.isLoading&&e.video))},directives:[Ai,xi,ct,Ow],pipes:[Tw,dt],styles:[".feature-container[_ngcontent-%COMP%]{display:flex;align-items:flex-end;max-height:400px;overflow:hidden}.feature-container[_ngcontent-%COMP%]   .img-feature[_ngcontent-%COMP%]{width:100%}hr[_ngcontent-%COMP%]{margin:0 -1rem}.duration-container[_ngcontent-%COMP%]{text-align:center}@media screen and (max-width:767px){.duration-container[_ngcontent-%COMP%]{text-align:start}}"]}),t})();function Dw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"button",10),r.Ub("click",function(){return r.dc(t),r.Wb().clearFavorites()}),r.Lb(1,"i",11),r.Nb(2,"strong"),r.hc(3,"Delete all"),r.Mb(),r.Mb()}if(2&t){const t=r.Wb();r.ac("disabled",!t.connection.isOnline)}}function Rw(t,e){1&t&&(r.Nb(0,"div",12),r.Nb(1,"div",13),r.hc(2,"loading"),r.Mb(),r.Mb())}function Pw(t,e){1&t&&(r.Nb(0,"div",14),r.Lb(1,"i",15),r.Nb(2,"h3"),r.hc(3,"No favorites found"),r.Mb(),r.Nb(4,"button",16),r.hc(5,"Go back"),r.Mb(),r.Mb())}function Mw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"tr"),r.Nb(1,"td"),r.Lb(2,"img",20),r.Mb(),r.Nb(3,"td"),r.Nb(4,"span",21),r.hc(5),r.Mb(),r.Mb(),r.Nb(6,"td"),r.Nb(7,"span",22),r.hc(8),r.Xb(9,"date"),r.Mb(),r.Mb(),r.Nb(10,"td"),r.Nb(11,"button",23),r.Ub("click",function(){r.dc(t);const n=e.$implicit;return r.Wb(2).showDetails(n)}),r.hc(12,"Details"),r.Mb(),r.Nb(13,"button",24),r.Ub("click",function(){r.dc(t);const n=e.$implicit,i=e.index;return r.Wb(2).deleteFavorite(n,i)}),r.Lb(14,"i",25),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit,n=r.Wb(2);r.Ab(2),r.ac("src",t.snippet.thumbnails.medium.url,r.ec),r.Ab(3),r.ic(t.snippet.title),r.Ab(3),r.ic(r.Yb(9,5,t.snippet.publishedAt,"d-m-yyyy")),r.Ab(3),r.ac("disabled",!n.connection.isOnline),r.Ab(2),r.ac("disabled",!n.connection.isOnline)}}function Lw(t,e){if(1&t&&(r.Nb(0,"div",17),r.Nb(1,"table",18),r.Nb(2,"thead"),r.Lb(3,"th"),r.Nb(4,"th"),r.hc(5,"Title"),r.Mb(),r.Nb(6,"th"),r.hc(7,"Publish date"),r.Mb(),r.Lb(8,"th"),r.Mb(),r.Nb(9,"tbody"),r.gc(10,Mw,15,8,"tr",19),r.Mb(),r.Mb(),r.Mb()),2&t){const t=r.Wb();r.Ab(10),r.ac("ngForOf",t.videos)}}const Fw=function(){return[""]};let Vw=(()=>{class t{constructor(t,e,n){this.router=t,this.db=e,this.connection=n,this.videos=[],this.isLoading=!0,this.getFavorites=()=>{this.db.getFavorites().then(t=>{this.videos=t,this.isLoading=!1,localStorage.setItem("favorites",JSON.stringify(this.videos))})},this.showDetails=t=>{this.router.navigate([`/watch/${t.videoId}`])},this.deleteFavorite=(t,e)=>{this.db.deleteFavorite(t.videoId),this.videos.splice(e,1)},this.clearFavorites=()=>{this.db.clearFavorites(this.videos),this.videos=[]}}ngOnInit(){if(this.connection.isOnline)this.getFavorites();else{const t=localStorage.getItem("favorites");this.videos=t?JSON.parse(t):[],this.isLoading=!1}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ii),r.Kb(N_),r.Kb(j_))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-favorites"]],decls:10,vars:6,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","fixed-top"],[1,"container"],[1,"navbar-brand",3,"routerLink"],["src","assets/logo.png","alt","logo","height","30",1,"d-flex","align-self-center"],[1,"d-flex"],["type","button","class","btn btn-light d-flex align-items-center justify-content-center",3,"disabled","click",4,"ngIf"],[1,"container","navbar-top-fix","no-breakpoints","pr-0","pl-0","mb-5"],["class","loader-container",4,"ngIf"],["class","no-data",4,"ngIf"],["class","table-responsive-lg",4,"ngIf"],["type","button",1,"btn","btn-light","d-flex","align-items-center","justify-content-center",3,"disabled","click"],[1,"fas","fa-trash-alt","mr-2"],[1,"loader-container"],[1,"loader"],[1,"no-data"],[1,"fas","fa-heart-broken"],["type","button","routerLink","..",1,"btn","btn-danger","mt-2"],[1,"table-responsive-lg"],[1,"table"],[4,"ngFor","ngForOf"],["alt","video thumbnail",1,"thumbnail",3,"src"],[1,"title-header"],[1,"publishedat-header"],["type","button",1,"btn","btn-outline-secondary","mr-1","mb-1",3,"disabled","click"],["type","button",1,"btn","btn-danger","mb-1",3,"disabled","click"],[1,"fas","fa-trash-alt","clr-white"]],template:function(t,e){1&t&&(r.Nb(0,"nav",0),r.Nb(1,"div",1),r.Nb(2,"a",2),r.Lb(3,"img",3),r.Mb(),r.Nb(4,"div",4),r.gc(5,Dw,4,1,"button",5),r.Mb(),r.Mb(),r.Mb(),r.Nb(6,"div",6),r.gc(7,Rw,3,0,"div",7),r.gc(8,Pw,6,0,"div",8),r.gc(9,Lw,11,1,"div",9),r.Mb()),2&t&&(r.Ab(2),r.ac("routerLink",r.bc(5,Fw)),r.Ab(3),r.ac("ngIf",e.videos.length>0),r.Ab(2),r.ac("ngIf",e.isLoading),r.Ab(1),r.ac("ngIf",!e.isLoading&&0==e.videos.length),r.Ab(1),r.ac("ngIf",!e.isLoading&&e.videos.length>0))},directives:[Ai,ct,xi,at],pipes:[dt],styles:[".thumbnail[_ngcontent-%COMP%]{height:100px;margin:10px 0;border-radius:5px}.title-header[_ngcontent-%COMP%]{display:block;min-width:200px}.publishedat-header[_ngcontent-%COMP%]{display:block;min-width:100px}.table[_ngcontent-%COMP%]{border-collapse:initial;border-spacing:0 5px;margin-bottom:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none;padding:20px 0}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#eee}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;border-bottom:1px solid #dee2e6}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 30px;font-weight:700;color:#000}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.btn-danger){border-color:#cbcbcb}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#e02c33;border-color:#e02c33;color:#fff}"]}),t})();const Uw=function(){return[""]},qw=function(){return["/favorites"]};function Bw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",7),r.Nb(1,"a",8),r.Lb(2,"img",9),r.Mb(),r.Nb(3,"button",10),r.Ub("click",function(){return r.dc(t),r.Wb().showChannelChanger()}),r.Lb(4,"i",11),r.Nb(5,"strong"),r.hc(6,"Change channel"),r.Mb(),r.Mb(),r.Nb(7,"div",12),r.Nb(8,"button",13),r.Lb(9,"i",14),r.Mb(),r.Nb(10,"input",15),r.Ub("ngModelChange",function(e){return r.dc(t),r.Wb().searchQuery=e})("keydown",function(e){return r.dc(t),r.Wb().searchVideos(e)}),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=r.Wb();r.Ab(1),r.ac("routerLink",r.bc(6,Uw)),r.Ab(2),r.ac("disabled",!t.connection.isOnline),r.Ab(5),r.ac("routerLink",r.bc(7,qw))("disabled",!t.connection.isOnline),r.Ab(2),r.ac("ngModel",t.searchQuery)("disabled",!t.connection.isOnline)}}function Hw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",7),r.Nb(1,"button",16),r.Ub("click",function(){r.dc(t);const e=r.Wb();return e.changeChannelMode=!e.changeChannelMode}),r.Lb(2,"i",17),r.Mb(),r.Nb(3,"input",18),r.Ub("ngModelChange",function(e){return r.dc(t),r.Wb().newChannel=e})("keydown",function(e){return r.dc(t),r.Wb().changeChannel(e)}),r.Mb(),r.Mb()}if(2&t){const t=r.Wb();r.Ab(3),r.ac("ngModel",t.newChannel)}}function zw(t,e){1&t&&(r.Nb(0,"div",19),r.Nb(1,"div",20),r.hc(2,"loading"),r.Mb(),r.Mb())}function Kw(t,e){1&t&&(r.Nb(0,"div",21),r.Lb(1,"i",22),r.Nb(2,"h3"),r.hc(3,"No videos found"),r.Mb(),r.Mb())}function $w(t,e){if(1&t){const t=r.Ob();r.Nb(0,"tr"),r.Nb(1,"td"),r.Lb(2,"img",28),r.Mb(),r.Nb(3,"td"),r.Nb(4,"span",29),r.hc(5),r.Mb(),r.Mb(),r.Nb(6,"td"),r.Nb(7,"span",30),r.hc(8),r.Xb(9,"date"),r.Mb(),r.Mb(),r.Nb(10,"td"),r.Nb(11,"button",31),r.Ub("click",function(){r.dc(t);const n=e.$implicit;return r.Wb(2).showDetails(n)}),r.hc(12,"Details"),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit,n=r.Wb(2);r.Ab(2),r.ac("src",t.snippet.thumbnails.medium.url,r.ec),r.Ab(3),r.ic(t.snippet.title),r.Ab(3),r.ic(r.Yb(9,4,t.snippet.publishedAt,"d-m-yyyy")),r.Ab(3),r.ac("disabled",!n.connection.isOnline)}}function Gw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",23),r.Nb(1,"table",24),r.Nb(2,"thead"),r.Lb(3,"th"),r.Nb(4,"th",25),r.Nb(5,"span",26),r.Ub("click",function(){return r.dc(t),r.Wb().sortBy("title")}),r.hc(6," Title "),r.Mb(),r.Mb(),r.Nb(7,"th",25),r.Nb(8,"span",26),r.Ub("click",function(){return r.dc(t),r.Wb().sortBy("publishedAt")}),r.hc(9," Publish date "),r.Mb(),r.Mb(),r.Lb(10,"th"),r.Mb(),r.Nb(11,"tbody"),r.gc(12,$w,13,7,"tr",27),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=r.Wb();r.Ab(4),r.Cb("active","title"==t.sortedBy)("not-active","publishedAt"==t.sortedBy)("desc","desc"==t.sortedByType),r.Ab(3),r.Cb("active","publishedAt"==t.sortedBy)("desc","desc"==t.sortedByType),r.Ab(5),r.ac("ngForOf",t.videos)}}function Ww(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",32),r.Nb(1,"button",33),r.Ub("click",function(){return r.dc(t),r.Wb().paginate("prev")}),r.Lb(2,"i",34),r.Mb(),r.Nb(3,"button",35),r.Ub("click",function(){return r.dc(t),r.Wb().paginate("next")}),r.Lb(4,"i",36),r.Mb(),r.Mb()}if(2&t){const t=r.Wb();r.Ab(1),r.ac("disabled",!t.prevPageToken||!t.connection.isOnline),r.Ab(2),r.ac("disabled",!t.nextPageToken||!t.connection.isOnline)}}const Qw=[{path:"",component:(()=>{class t{constructor(t,e,n,r){this.api=t,this.db=e,this.router=n,this.connection=r,this.videos=[],this.videosUnsorted=[],this.isLoading=!0,this.searchQuery="",this.changeChannelMode=!1,this.fetchVideos=(t="")=>{if(this.isLoading=!0,this.connection.isOnline)this.api.fetchVideos(this.channelId,t).subscribe(this.handleResponse);else{const t=localStorage.getItem("videos");this.videos=t?JSON.parse(t):[],this.isLoading=!1}},this.searchVideos=t=>{if("Enter"==t.key){if(this.isLoading=!0,""==this.searchQuery.trim())return void this.fetchVideos();const t=this.searchQuery.split(" ");this.api.searchVideos(this.channelId,this.searchQuery,"").subscribe(e=>{e.items=e.items.filter(e=>t.some(t=>e.snippet.title.toLowerCase().includes(t.toLowerCase()))),this.handleResponse(e)})}},this.handleResponse=t=>{this.isLoading=!1,this.videos=t.items,this.videosUnsorted=t.items,this.sortedBy="",this.sortedByType="",this.nextPageToken=t.items.length<this.api.resultsPerPage?"":t.nextPageToken,this.prevPageToken=t.items.length<this.api.resultsPerPage?"":t.prevPageToken,this.saveVideosToLocalStorage()},this.saveVideosToLocalStorage=()=>{localStorage.setItem("videos",JSON.stringify(this.videos))},this.showDetails=t=>{this.router.navigate([`/watch/${t.snippet.resourceId.videoId}`])},this.paginate=t=>{"next"==t&&this.nextPageToken?this.fetchVideos(this.nextPageToken):"prev"==t&&this.prevPageToken&&this.fetchVideos(this.prevPageToken)},this.sortBy=t=>{this.sortedByType=this.sortedBy==t&&"asc"==this.sortedByType?"desc":"asc",this.sortedBy=t,"title"==t?this.videos=this.videos.sort("asc"==this.sortedByType?(t,e)=>t.snippet.title.localeCompare(e.snippet.title):(t,e)=>e.snippet.title.localeCompare(t.snippet.title)):"publishedAt"==t&&(this.videos=this.videos.sort("asc"==this.sortedByType?(t,e)=>new Date(t.snippet.publishedAt).getTime()-new Date(e.snippet.publishedAt).getTime():(t,e)=>new Date(e.snippet.publishedAt).getTime()-new Date(t.snippet.publishedAt).getTime()))},this.showChannelChanger=()=>{this.newChannel="",this.changeChannelMode=!this.changeChannelMode},this.changeChannel=t=>{if("Enter"==t.key&&""!=this.newChannel){if(this.newChannel.startsWith("https://www.youtube.com/channel/")){const t=this.newChannel.match(/youtube.com\/channel\/([^#\&\?]*).*/);t&&2==t.length&&(this.channelId=t[1],this.fetchVideos())}else this.channelId=this.newChannel,this.fetchVideos();this.changeChannelMode=!1,this.db.updateChannel(this.channelId)}}}ngOnInit(){return Object(Yi.b)(this,void 0,void 0,function*(){if(this.connection.isOnline)this.channelId=(yield this.db.getSettings()).channelId,localStorage.setItem("channelId",this.channelId);else{const t=localStorage.getItem("channelId");this.channelId=t||"UCWOA1ZGywLbqmigxE4Qlvuw"}this.fetchVideos()})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(As),r.Kb(N_),r.Kb(Ii),r.Kb(j_))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-home"]],decls:8,vars:8,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","fixed-top"],["class","container",4,"ngIf"],[1,"container","navbar-top-fix","pr-0","pl-0"],["class","loader-container",4,"ngIf"],["class","no-data",4,"ngIf"],["class","table-responsive-lg",4,"ngIf"],["class","d-flex justify-content-end p-3",4,"ngIf"],[1,"container"],[1,"navbar-brand",3,"routerLink"],["src","assets/logo.png","alt","logo","height","30",1,"d-flex","align-self-center"],["type","button",1,"btn","btn-light","change-channel-btn",3,"disabled","click"],[1,"fas","fa-exchange-alt","mr-2"],[1,"search-container","d-flex"],["type","button",1,"btn","btn-light","btn-circle","w-50","h-50","mr-2","d-flex","align-items-center","justify-content-center",3,"routerLink","disabled"],[1,"fas","fa-heart"],["type","text","placeholder","Search by video title",1,"form-control","rounded-pill","search-input",3,"ngModel","disabled","ngModelChange","keydown"],["type","button",1,"btn","btn-light",3,"click"],[1,"fas","fa-arrow-left"],["type","text","placeholder","Enter channel link or id and hit Enter",1,"form-control","rounded-pill","channel-input",3,"ngModel","ngModelChange","keydown"],[1,"loader-container"],[1,"loader"],[1,"no-data"],[1,"fas","fa-video-slash"],[1,"table-responsive-lg"],[1,"table"],[1,"sortable"],[3,"click"],[4,"ngFor","ngForOf"],["alt","video thumbnail",1,"thumbnail",3,"src"],[1,"title-header"],[1,"publishedat-header"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],[1,"d-flex","justify-content-end","p-3"],["type","button",1,"btn","btn-secondary","paginate-btn","mr-1",3,"disabled","click"],[1,"fas","fa-caret-left"],["type","button",1,"btn","btn-secondary","paginate-btn",3,"disabled","click"],[1,"fas","fa-caret-right"]],template:function(t,e){1&t&&(r.Nb(0,"nav",0),r.gc(1,Bw,11,8,"div",1),r.gc(2,Hw,4,1,"div",1),r.Mb(),r.Nb(3,"div",2),r.gc(4,zw,3,0,"div",3),r.gc(5,Kw,4,0,"div",4),r.gc(6,Gw,13,11,"div",5),r.gc(7,Ww,5,2,"div",6),r.Mb()),2&t&&(r.Ab(1),r.ac("ngIf",!e.changeChannelMode),r.Ab(1),r.ac("ngIf",e.changeChannelMode),r.Ab(1),r.Cb("channel-mode",e.changeChannelMode),r.Ab(1),r.ac("ngIf",e.isLoading),r.Ab(1),r.ac("ngIf",!e.isLoading&&0==e.videos.length),r.Ab(1),r.ac("ngIf",!e.isLoading&&e.videos.length>0),r.Ab(1),r.ac("ngIf",!e.isLoading&&e.videos.length>0))},directives:[ct,Ai,xi,F_,J_,bw,at],pipes:[dt],styles:['@charset "UTF-8";.search-container[_ngcontent-%COMP%]{margin-left:10px}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{padding:25px 50px 25px 85px;width:285px;background:url(/assets/search.svg) no-repeat 45px 50% #f5f5f5;background-size:24px;border:none;border-radius:50%;transition:background-color .2s}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:not([disabled]):hover{background-color:#e6e6e6}.channel-input[_ngcontent-%COMP%]{padding:25px 50px 25px 85px;width:100%;margin-left:10px;background:url(/assets/search.svg) no-repeat 45px 50% #f5f5f5;background-size:24px;border:none;border-radius:50%;transition:background-color .2s}.channel-input[_ngcontent-%COMP%]:not([disabled]):hover{background-color:#e6e6e6}.thumbnail[_ngcontent-%COMP%]{height:100px;margin:10px 0;border-radius:5px}.title-header[_ngcontent-%COMP%]{display:block;min-width:200px}.publishedat-header[_ngcontent-%COMP%]{display:block;min-width:100px}.table[_ngcontent-%COMP%]{border-collapse:initial;border-spacing:0 5px;margin-bottom:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none;padding:20px 0}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#eee}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;border-bottom:1px solid #dee2e6}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 30px;font-weight:700;color:#000;border-color:#cbcbcb}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not([disabled]):hover{background:#e02c33;border-color:#e02c33;color:#fff}.sortable[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;cursor:pointer}.sortable[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"\uf0d8";top:-5px}.sortable[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after, .sortable[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{font-family:Font Awesome\\ 5 Free;font-weight:900;position:absolute;left:-20px}.sortable[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"\uf0d7";bottom:-4px}.sortable.active.desc[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after, .sortable.active[_ngcontent-%COMP%]:not(.desc)   span[_ngcontent-%COMP%]:before{opacity:.3}.sortable.active[_ngcontent-%COMP%] ~ th[_ngcontent-%COMP%], .sortable.not-active[_ngcontent-%COMP%]{opacity:.5}.paginate-btn[_ngcontent-%COMP%]{background:#dcdcdc;border-color:#dcdcdc;color:#848484;font-size:24px;line-height:20px}.paginate-btn[_ngcontent-%COMP%]:not([disabled]):hover{background:#aaa;color:#000}@media screen and (max-width:992px){.channel-input[_ngcontent-%COMP%]{width:calc(100% - 50px)}}@media screen and (max-width:664px){.search-container[_ngcontent-%COMP%]{width:100%;margin-left:0}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:calc(100% - 60px);margin-top:10px}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px}}@media screen and (max-width:311px){.change-channel-btn[_ngcontent-%COMP%]{width:100%;margin-top:10px}}']}),t})()},{path:"watch/:id",component:jw},{path:"favorites",component:Vw}];let Yw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[qi.forRoot(Qw)],qi]}),t})();function Zw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"button",3),r.Ub("click",function(){return r.dc(t),r.Wb().reload()}),r.hc(1,"Reload"),r.Mb()}}function Xw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"a",4),r.Ub("click",function(){return r.dc(t),r.Wb().statusChanged=!1}),r.Nb(1,"strong"),r.hc(2,"x"),r.Mb(),r.Mb()}}let Jw=(()=>{class t{constructor(t){this.title="inMobly task",this.connected=!0,this.statusChanged=!1,this.reload=()=>document.location.reload(),this.connected=navigator.onLine,t.connectionChanged.subscribe(t=>{this.connected=t,this.statusChanged=!0})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(j_))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:6,vars:7,consts:[[1,"connection-status"],["type","button","class","btn btn-outline-light btn-sm ml-2",3,"click",4,"ngIf"],["class","ml-3",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-light","btn-sm","ml-2",3,"click"],[1,"ml-3",3,"click"]],template:function(t,e){1&t&&(r.Lb(0,"router-outlet"),r.Nb(1,"div",0),r.Nb(2,"span"),r.hc(3),r.Mb(),r.gc(4,Zw,2,0,"button",1),r.gc(5,Xw,3,0,"a",2),r.Mb()),2&t&&(r.Ab(1),r.Cb("active",e.connected)("hidden",!e.statusChanged),r.Ab(2),r.ic(e.connected?"Connected to the internet":"No internet connection"),r.Ab(1),r.ac("ngIf",e.connected),r.Ab(1),r.ac("ngIf",e.connected))},directives:[Ni,ct],styles:[".connection-status[_ngcontent-%COMP%]{position:fixed;bottom:0;right:20px;padding:10px 15px;text-align:center;color:#fff;background:red;border-radius:5px 5px 0 0;font-size:14px;transition:bottom .5s}.connection-status.active[_ngcontent-%COMP%]{background:green}.connection-status.hidden[_ngcontent-%COMP%]{bottom:-55px}.connection-status[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;cursor:pointer;text-decoration:none}.connection-status[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}"]}),t})();class tE{}const eE="*";function nE(t,e=null){return{type:2,steps:t,options:e}}function rE(t){return{type:6,styles:t,offset:null}}function iE(t){Promise.resolve(null).then(t)}class sE{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){iE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class oE{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?iE(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function aE(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function uE(t){switch(t.length){case 0:return new sE;case 1:return t[0];default:return new oE(t)}}function cE(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case eE:a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function lE(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&hE(n,"start",t)));break;case"done":t.onDone(()=>r(n&&hE(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&hE(n,"destroy",t)))}}function hE(t,e,n){const r=n.totalTime,i=dE(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function dE(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function fE(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function pE(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let gE=(t,e)=>!1,mE=(t,e)=>!1,yE=(t,e,n)=>[];const bE=aE();(bE||"undefined"!=typeof Element)&&(gE=(t,e)=>t.contains(e),mE=(()=>{if(bE||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):mE}})(),yE=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let vE=null,_E=!1;function wE(t){vE||(vE=("undefined"!=typeof document?document.body:null)||{},_E=!!vE.style&&"WebkitAppearance"in vE.style);let e=!0;return vE.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in vE.style,!e&&_E)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in vE.style),e}const EE=mE,SE=gE,OE=yE;function CE(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let TE=(()=>{class t{validateStyleProperty(t){return wE(t)}matchesElement(t,e){return EE(t,e)}containsElement(t,e){return SE(t,e)}query(t,e,n){return OE(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new sE(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),IE=(()=>{class t{}return t.NOOP=new TE,t})();const xE="ng-enter",AE="ng-leave",kE="ng-trigger",NE=".ng-trigger",jE="ng-animating",DE=".ng-animating";function RE(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:PE(parseFloat(e[1]),e[2])}function PE(t,e){switch(e){case"s":return 1e3*t;default:return t}}function ME(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=PE(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=PE(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function LE(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function FE(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else LE(t,n);return n}function VE(t,e,n){return n?e+":"+n+";":""}function UE(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=VE(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=VE(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function qE(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=QE(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),aE()&&UE(t))}function BE(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=QE(e);t.style[n]=""}),aE()&&UE(t))}function HE(t){return Array.isArray(t)?1==t.length?t[0]:nE(t):t}const zE=new RegExp("{{\\s*(.+?)\\s*}}","g");function KE(t){let e=[];if("string"==typeof t){let n;for(;n=zE.exec(t);)e.push(n[1]);zE.lastIndex=0}return e}function $E(t,e,n){const r=t.toString(),i=r.replace(zE,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function GE(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const WE=/-+([a-z0-9])/g;function QE(t){return t.replace(WE,(...t)=>t[1].toUpperCase())}function YE(t,e){return 0===t||0===e}function ZE(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach(function(e){n[e]=JE(t,e)})}}return e}function XE(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function JE(t,e){return window.getComputedStyle(t)[e]}const tS="*";function eS(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(iS(i,o)),"<"!=s[0]||i==tS&&o==tS||e.push(iS(o,i))}(t,n,e)):n.push(t),n}const nS=new Set(["true","1"]),rS=new Set(["false","0"]);function iS(t,e){const n=nS.has(t)||rS.has(t),r=nS.has(e)||rS.has(e);return(i,s)=>{let o=t==tS||t==i,a=e==tS||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?nS.has(t):rS.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?nS.has(e):rS.has(e)),o&&a}}const sS=new RegExp("s*:selfs*,?","g");function oS(t,e,n){return new aS(t).build(e,n)}class aS{constructor(t){this._driver=t}build(t,e){const n=new uS(e);return this._resetContextStyleTimingState(n),XE(this,HE(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(cS(t)){const e=t;Object.keys(e).forEach(t=>{KE(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=GE(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=XE(this,HE(t.animation),e);return{type:1,matchers:eS(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:lS(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>XE(this,t,e)),options:lS(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=XE(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:lS(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return hS(ME(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=hS(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||ME(r,e),hS(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:rE({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=rE(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==eE?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(cS(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=KE(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(cS(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(cS(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*p;e.currentTime=d+f.delay+o,f.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:XE(this,HE(t.animation),e),options:lS(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:lS(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:lS(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(sS,"")),[t=t.replace(/@\*/g,NE).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,DE),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,fE(e.collectedStyles,e.currentQuerySelector,{});const o=XE(this,HE(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:lS(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:ME(t.timings,e.errors,!0);return{type:12,animation:XE(this,HE(t.animation),e),timings:n,options:null}}}class uS{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function cS(t){return!Array.isArray(t)&&"object"==typeof t}function lS(t){var e;return t?(t=LE(t)).params&&(t.params=(e=t.params)?LE(e):null):t={},t}function hS(t,e,n){return{duration:t,delay:e,easing:n}}function dS(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class fS{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const pS=new RegExp(":enter","g"),gS=new RegExp(":leave","g");function mS(t,e,n,r,i,s={},o={},a,u,c=[]){return(new yS).buildKeyframes(t,e,n,r,i,s,o,a,u,c)}class yS{buildKeyframes(t,e,n,r,i,s,o,a,u,c=[]){u=u||new fS;const l=new vS(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),XE(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[dS(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?RE(n.duration):null,s=null!=n.delay?RE(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),XE(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=bS);const t=RE(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>XE(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?RE(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),XE(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return ME(e.params?$E(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?RE(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=bS);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),XE(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;XE(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const bS={};class vS{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new _S(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=RE(n.duration)),null!=n.delay&&(r.delay=RE(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=$E(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new vS(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=bS,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new wS(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(pS,"."+this._enterClassName)).replace(gS,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class _S{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new _S(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||eE,this._currentKeyframe[t]=eE}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=eE})):FE(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=$E(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:eE),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=FE(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==eE&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?GE(t.values()):[],s=e.size?GE(e.values()):[];if(n){const t=r[0],e=LE(t);t.offset=0,e.offset=1,r=[t,e]}return dS(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class wS extends _S{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=FE(t[0],!1);a.offset=0,i.push(a);const u=FE(t[0],!1);u.offset=ES(o),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let o=FE(t[r],!1);o.offset=ES((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return dS(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function ES(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class SS{}class OS extends SS{normalizePropertyName(t,e){return QE(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(CS[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const CS=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function TS(t,e,n,r,i,s,o,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const IS={};class xS{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||IS,d=this.buildStyles(n,o&&o.params||IS,l),f=a&&a.params||IS,p=this.buildStyles(r,f,l),g=new Set,m=new Map,y=new Map,b="void"===r,v={params:Object.assign(Object.assign({},h),f)},_=c?[]:mS(t,e,this.ast.animation,i,s,d,p,v,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return TS(e,this._triggerName,n,r,b,d,p,[],[],m,y,w,l);_.forEach(t=>{const n=t.element,r=fE(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=fE(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const E=GE(g.values());return TS(e,this._triggerName,n,r,b,d,p,_,E,m,y,w)}}class AS{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=LE(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=$E(s,r,e)),n[t]=s})}}),n}}class kS{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new AS(t.style,t.options&&t.options.params||{})}),NS(this.states,"true","1"),NS(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new xS(t,e,this.states))}),this.fallbackTransition=new xS(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function NS(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const jS=new fS;class DS{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=oS(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=cE(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=mS(this._driver,e,i,xE,AE,{},{},n,jS,r),s.forEach(t=>{const e=fE(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,eE)})});const a=uE(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=dE(e,"","","");return lE(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const RS="ng-animate-queued",PS="ng-animate-disabled",MS=".ng-animate-disabled",LS=[],FS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},VS={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class US{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=LE(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const qS="void",BS=new US(qS);class HS{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,YS(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=fE(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=fE(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(YS(t,kE),YS(t,"ng-trigger-"+e),a[e]=BS),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new KS(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(YS(t,kE),YS(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new US(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=BS),u.value!==qS&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{BE(t,n),qE(t,r)})}return}const c=fE(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(YS(t,RS),s.onStart(()=>{ZS(t,RS)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,NE,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,qS,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&uE(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||BS,a=new US(qS),u=new KS(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==FS||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){YS(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=dE(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,lE(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class zS{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new HS(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if($S(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!$S(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),YS(t,PS)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ZS(t,PS))}removeNode(t,e,n,r){if($S(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return $S(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,NE,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,DE,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return uE(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=FS,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,MS)&&this.markElementAsDisabled(t,!1),this.driver.query(t,MS,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)YS(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?uE(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new fS,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=QS(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=xE+p++;f.set(e,n),t.forEach(t=>YS(t,n))});const g=[],m=new Set,y=new Set;for(let k=0;k<this.collectedLeaveElements.length;k++){const t=this.collectedLeaveElements[k],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const b=new Map,v=QS(h,Array.from(m));v.forEach((t,e)=>{const n=AE+p++;b.set(e,n),t.forEach(t=>YS(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>ZS(t,n))}),v.forEach((t,e)=>{const n=b.get(e);t.forEach(t=>ZS(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let k=this._namespaceList.length-1;k>=0;k--)this._namespaceList[k].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=b.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>BE(i,p.fromStyles)),e.onDestroy(()=>qE(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>BE(i,p.fromStyles)),e.onDestroy(()=>qE(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>fE(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,S=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(S.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{fE(E,e,[]).push(t),t.destroy()})});const O=g.filter(t=>tO(t,a,u)),C=new Map;WS(C,this.driver,y,u,eE).forEach(t=>{tO(t,a,u)&&O.push(t)});const T=new Map;d.forEach((t,e)=>{WS(T,this.driver,new Set(t),a,"!")}),O.forEach(t=>{const e=C.get(t),n=T.get(t);C.set(t,Object.assign(Object.assign({},e),n))});const I=[],x=[],A={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>qE(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=A;if(S.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=S.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>S.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,E,i,T,C);if(s.setRealPlayer(n),t===A)I.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=uE(e)),r.push(s)}}else BE(e,o.fromStyles),s.onDestroy(()=>qE(e,o.toStyles)),x.push(s),c.has(e)&&r.push(s)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=uE(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let k=0;k<g.length;k++){const t=g[k],e=t.__ng_removed;if(ZS(t,AE),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,DE,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?XS(this,t,r):this.processLeaveNode(t)}return g.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==qS;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=fE(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}BE(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new sE(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return JS(t,e),e}((n.get(h)||LS).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=s.get(h),y=cE(0,this._normalizer,0,e.keyframes,g,m),b=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new KS(t,o,h);e.setRealPlayer(b),u.push(e)}return b});u.forEach(t=>{fE(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>YS(t,jE));const d=uE(h);return d.onDestroy(()=>{c.forEach(t=>ZS(t,jE)),qE(a,e.toStyles)}),l.forEach(t=>{fE(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new sE(t.duration,t.delay)}}class KS{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new sE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>lE(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){fE(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function $S(t){return t&&1===t.nodeType}function GS(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function WS(t,e,n,r,i){const s=[];n.forEach(t=>s.push(GS(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=VS,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>GS(t,s[a++])),o}function QS(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function s(t){if(!t)return 1;let e=i.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:s(o),i.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function YS(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function ZS(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function XS(t,e,n){uE(n).onDone(()=>t.processLeaveNode(e))}function JS(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof oE?JS(r.players,e):e.push(r)}}function tO(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class eO{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new zS(t,e,n),this._timelineEngine=new DS(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=oS(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new kS(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=pE(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=pE(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function nO(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=iO(e[0]),e.length>1&&(r=iO(e[e.length-1]))):e&&(n=iO(e)),n||r?new rO(t,n,r):null}let rO=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&qE(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qE(this._element,this._initialStyles),this._endStyles&&(qE(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(BE(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(BE(this._element,this._endStyles),this._endStyles=null),qE(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function iO(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];sO(i)&&(e=e||{},e[i]=t[i])}return e}function sO(t){return"display"===t||"position"===t}const oO="animation",aO="animationend";class uO{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=pO(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),fO(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),dO(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){cO(this._element,this._name,"paused")}resume(){cO(this._element,this._name,"running")}setPosition(t){const e=lO(this._element,this._name);this._position=t*this._duration,fO(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),dO(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=pO(t,"").split(","),r=hO(n,e);r>=0&&(n.splice(r,1),fO(t,"",n.join(",")))}(this._element,this._name))}}function cO(t,e,n){fO(t,"PlayState",n,lO(t,e))}function lO(t,e){const n=pO(t,"");return n.indexOf(",")>0?hO(n.split(","),e):hO([n],e)}function hO(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function dO(t,e,n){n?t.removeEventListener(aO,e):t.addEventListener(aO,e)}function fO(t,e,n,r){const i=oO+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function pO(t,e){return t.style[oO+e]||""}class gO{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new uO(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:JE(this.element,n))})}this.currentSnapshot=t}}class mO extends sE{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=CE(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class yO{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return wE(t)}matchesElement(t,e){return EE(t,e)}containsElement(t,e){return SE(t,e)}query(t,e,n){return OE(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>CE(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(t,e,n,r,i,s=[],o){const a=s.filter(t=>t instanceof gO),u={};YE(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=ZE(t,e,u));if(0==n)return new mO(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=nO(t,e),f=new gO(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class bO{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:JE(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class vO{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(_O().toString()),this._cssKeyframesDriver=new yO}validateStyleProperty(t){return wE(t)}matchesElement(t,e){return EE(t,e)}containsElement(t,e){return SE(t,e)}query(t,e,n){return OE(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(t=>t instanceof bO);YE(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=nO(t,e=ZE(t,e=e.map(t=>FE(t,!1)),u));return new bO(t,e,a,l)}}function _O(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let wO=(()=>{class t extends tE{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.R.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?nE(t):t;return OO(this._renderer,null,e,"register",[n]),new EO(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.F),r.Rb(o))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class EO extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new SO(this._id,t,e||{},this._renderer)}}class SO{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return OO(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function OO(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const CO="@",TO="@.disabled";let IO=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new xO("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new AO(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.F),r.Rb(eO),r.Rb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class xO{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==CO&&e==TO?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class AO extends xO{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==CO?"."==e.charAt(1)&&e==TO?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==CO){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=CO&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let kO=(()=>{class t extends eO{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(o),r.Rb(IE),r.Rb(SS))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const NO=[{provide:IE,useFactory:function(){return"function"==typeof _O()?new vO:new yO}},{provide:new r.r("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:tE,useClass:wO},{provide:SS,useFactory:function(){return new OS}},{provide:eO,useClass:kO},{provide:r.F,useFactory:function(t,e,n){return new IO(t,e,n)},deps:[Rt,eO,r.A]}];let jO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:NO,imports:[Gt]}),t})();const DO={apiKey:"AIzaSyBIGbzhZePd9-EIMj4509SnmSBNo1WlDYM",authDomain:"inmobly-task-58e70.firebaseapp.com",projectId:"inmobly-task-58e70",storageBucket:"inmobly-task-58e70.appspot.com",messagingSenderId:"793870635691",appId:"1:793870635691:web:46938a92b00a3935f45dee"};var RO=n("z6cu"),PO=n("n6bG");function MO(t,e,n,r){return Object(PO.a)(n)&&(r=n,n=void 0),r?MO(t,e,n).pipe(Object(ye.a)(t=>Object(te.a)(t)?r(...t):r(t))):new se.a(r=>{LO(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function LO(t,e,n,r,i){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),s=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),s=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),s=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let s=0,o=t.length;s<o;s++)LO(t[s],e,n,r,i)}r.add(s)}var FO=n("KqfI");const VO=new se.a(FO.a);var UO=n("oB13"),qO=n("WMd4");class BO{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new HO(t,this.delay,this.scheduler))}}class HO extends ee.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(HO.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new zO(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(qO.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(qO.a.createComplete()),this.unsubscribe()}}class zO{constructor(t,e){this.time=t,this.notification=e}}const KO="Service workers are disabled or not supported by this browser";class $O{constructor(t){if(this.serviceWorker=t,t){const e=MO(t,"controllerchange").pipe(Object(ye.a)(()=>t.controller)),n=fe(ge(()=>Object(Qt.a)(t.controller)),e);this.worker=n.pipe(ke(t=>!!t)),this.registration=this.worker.pipe(ve(()=>t.getRegistration()));const r=MO(t,"message").pipe(Object(ye.a)(t=>t.data)).pipe(ke(t=>t&&t.type)).pipe(Object(UO.a)(new Yt.a));r.connect(),this.events=r}else this.worker=this.events=this.registration=ge(()=>Object(RO.a)(new Error("Service workers are disabled or not supported by this browser")))}postMessage(t,e){return this.worker.pipe(Se(1),Object(Ye.a)(n=>{n.postMessage(Object.assign({action:t},e))})).toPromise().then(()=>{})}postMessageWithStatus(t,e,n){const r=this.waitForStatus(n),i=this.postMessage(t,e);return Promise.all([r,i]).then(()=>{})}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){return this.events.pipe(ke(e=>e.type===t))}nextEventOfType(t){return this.eventsOfType(t).pipe(Se(1))}waitForStatus(t){return this.eventsOfType("STATUS").pipe(ke(e=>e.nonce===t),Se(1),Object(ye.a)(t=>{if(!t.status)throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let GO=(()=>{class t{constructor(t){if(this.sw=t,this.subscriptionChanges=new Yt.a,!t.isEnabled)return this.messages=VO,this.notificationClicks=VO,void(this.subscription=VO);this.messages=this.sw.eventsOfType("PUSH").pipe(Object(ye.a)(t=>t.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Object(ye.a)(t=>t.data)),this.pushManager=this.sw.registration.pipe(Object(ye.a)(t=>t.pushManager));const e=this.pushManager.pipe(ve(t=>t.getSubscription()));this.subscription=Object(t_.a)(e,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(KO));const e={userVisibleOnly:!0};let n=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(n.length));for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return e.applicationServerKey=r,this.pushManager.pipe(ve(t=>t.subscribe(e)),Se(1)).toPromise().then(t=>(this.subscriptionChanges.next(t),t))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Se(1),ve(t=>{if(null===t)throw new Error("Not subscribed to push notifications.");return t.unsubscribe().then(t=>{if(!t)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(KO))}decodeBase64(t){return atob(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb($O))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),WO=(()=>{class t{constructor(t){if(this.sw=t,!t.isEnabled)return this.available=VO,this.activated=VO,void(this.unrecoverable=VO);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(KO));const t=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(KO));const t=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:t},t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb($O))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class QO{}const YO=new r.r("NGSW_REGISTER_SCRIPT");function ZO(t,e,n,i){return()=>{if(!pt(i)||!("serviceWorker"in navigator)||!1===n.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)s=n.registrationStrategy();else{const[e,...r]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(e){case"registerImmediately":s=Object(Qt.a)(null);break;case"registerWithDelay":s=XO(+r[0]||0);break;case"registerWhenStable":s=r[0]?Object(t_.a)(JO(t),XO(+r[0])):JO(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(r.A).runOutsideAngular(()=>s.pipe(Se(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(t=>console.error("Service worker registration failed with:",t))))}}function XO(t){return Object(Qt.a)(null).pipe(function(t,e=ks.a){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new BO(r,e))}(t))}function JO(t){return t.get(r.g).isStable.pipe(ke(t=>t))}function tC(t,e){return new $O(pt(e)&&!1!==t.enabled?navigator.serviceWorker:void 0)}let eC=(()=>{class t{static register(e,n={}){return{ngModule:t,providers:[{provide:YO,useValue:e},{provide:QO,useValue:n},{provide:$O,useFactory:tC,deps:[QO,r.C]},{provide:r.d,useFactory:ZO,deps:[r.s,YO,QO,r.C],multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[GO,WO]}),t})(),nC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t,bootstrap:[Jw]}),t.\u0275inj=r.Hb({providers:[],imports:[[Gt,Yw,jO,xs,Ls.a.initializeApp(DO),k_,ww,Cw,eC.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"})]]}),t})();Object(r.T)(),Kt().bootstrapModule(nC).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),s=n("SeVD");class o extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(s.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);